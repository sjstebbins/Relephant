function WebSpeechRecognition(){var t=this;t.continuous=!1,t.lang="",t.maxAlternatives=1,t.status_array=status_array_en,t.image_array=image_array_mic;var e,n=!1;t.supported=function(){return!!t.recognition},t.statusText=function(e){t.status_elem=t.getElem(e),t.refreshState()},t.statusImage=function(e){t.image_elem=t.getElem(e),t.refreshState()},t.finalResults=function(e){t.final_results=t.getElem(e)},t.interimResults=function(e){t.interim_results=t.getElem(e)},t.inProgress=function(){return n},t.start=function(){n=!0,e=!1,t.final_transcript="",t.setText(t.final_results,""),t.setText(t.interim_results,""),t.recognition.continuous=t.continuous,t.recognition.interimResults=!!t.interim_results,t.recognition.maxAlternatives=t.maxAlternatives,""!=t.lang&&(t.recognition.lang=t.lang),t.recognition.start(),t.onState("allow")},t.stop=function(){n=!1,t.recognition.stop()},t.toggleStartStop=function(){reco.inProgress()?reco.stop():reco.start()},t.onState=function(e){t.onStatusChange(e),t.onImageChange(e),t.currentState=e},t.refreshState=function(){t.onState(t.currentState)},t.onStatusChange=function(e){if(t.status_elem){var n=t.status_array[e];n?(t.setText(t.status_elem,n),t.status_elem.style.visibility="visible"):t.status_elem.style.visibility="hidden"}},t.onImageChange=function(e){if(t.image_elem){var n=t.image_array[e];n||(n=t.image_array.disable),t.image_elem.src=n}},t.setText=function(e,n){e&&("INPUT"==e.nodeName?e.value=n:e.innerHTML=t.linebreak(n))},t.getElem=function(t){return"string"==typeof t?document.getElementById(t):t};var i=/\n\n/g,s=/\n/g;t.linebreak=function(t){return t.replace(i,"<p></p>").replace(s,"<br>")};var r=/\S/;t.capitalize=function(t){return t.replace(r,function(t){return t.toUpperCase()})},"webkitSpeechRecognition"in window?(t.recognition=new webkitSpeechRecognition,t.final_transcript="",t.interim_transcript="",t.onState("ready"),t.onEnd=null,t.recognition.onstart=function(){n=!0,t.onState("active")},t.recognition.onerror=function(n){("no-speech"==n.error||"audio-capture"==n.error||"not-allowed"==n.error)&&(t.onState(n.error),e=!0)},t.recognition.onend=function(){if(n=!1,!e){if(""==t.final_transcript)return void t.onState("ready");t.onState("complete"),t.onEnd&&t.onEnd()}},t.recognition.onresult=function(e){t.interim_transcript="";for(var n=e.resultIndex;n<e.results.length;++n)e.results[n].isFinal?t.final_transcript+=e.results[n][0].transcript:t.interim_transcript+=e.results[n][0].transcript;t.final_transcript=t.capitalize(t.final_transcript),t.setText(t.final_results,t.final_transcript),t.setText(t.interim_results,t.interim_transcript),t.onResult&&t.onResult()}):t.onState("upgrade")}function backboneReady(){rephantoRouter=new RephantoRouter,rephantoRouter.start(),setDate()}function setDate(){$("#datetimepicker1").datetimepicker()}function prettyDateTime(t){return t.toDateString()+" at "+t.toLocaleTimeString()}(function(){var t=this,e=t._,n={},i=Array.prototype,s=Object.prototype,r=Function.prototype,a=i.push,o=i.slice,u=i.concat,l=s.toString,c=s.hasOwnProperty,d=i.forEach,h=i.map,f=i.reduce,p=i.reduceRight,m=i.filter,g=i.every,v=i.some,_=i.indexOf,y=i.lastIndexOf,w=Array.isArray,b=Object.keys,k=r.bind,D=function(t){return t instanceof D?t:this instanceof D?void(this._wrapped=t):new D(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=D),exports._=D):t._=D,D.VERSION="1.6.0";var M=D.each=D.forEach=function(t,e,i){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var s=0,r=t.length;r>s;s++)if(e.call(i,t[s],s,t)===n)return}else for(var a=D.keys(t),s=0,r=a.length;r>s;s++)if(e.call(i,t[a[s]],a[s],t)===n)return;return t};D.map=D.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):(M(t,function(t,s,r){i.push(e.call(n,t,s,r))}),i)};var S="Reduce of empty array with no initial value";D.reduce=D.foldl=D.inject=function(t,e,n,i){var s=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=D.bind(e,i)),s?t.reduce(e,n):t.reduce(e);if(M(t,function(t,r,a){s?n=e.call(i,n,t,r,a):(n=t,s=!0)}),!s)throw new TypeError(S);return n},D.reduceRight=D.foldr=function(t,e,n,i){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=D.bind(e,i)),s?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var a=D.keys(t);r=a.length}if(M(t,function(o,u,l){u=a?a[--r]:--r,s?n=e.call(i,n,t[u],u,l):(n=t[u],s=!0)}),!s)throw new TypeError(S);return n},D.find=D.detect=function(t,e,n){var i;return x(t,function(t,s,r){return e.call(n,t,s,r)?(i=t,!0):void 0}),i},D.filter=D.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(M(t,function(t,s,r){e.call(n,t,s,r)&&i.push(t)}),i)},D.reject=function(t,e,n){return D.filter(t,function(t,i,s){return!e.call(n,t,i,s)},n)},D.every=D.all=function(t,e,i){e||(e=D.identity);var s=!0;return null==t?s:g&&t.every===g?t.every(e,i):(M(t,function(t,r,a){return(s=s&&e.call(i,t,r,a))?void 0:n}),!!s)};var x=D.some=D.any=function(t,e,i){e||(e=D.identity);var s=!1;return null==t?s:v&&t.some===v?t.some(e,i):(M(t,function(t,r,a){return s||(s=e.call(i,t,r,a))?n:void 0}),!!s)};D.contains=D.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):x(t,function(t){return t===e})},D.invoke=function(t,e){var n=o.call(arguments,2),i=D.isFunction(e);return D.map(t,function(t){return(i?e:t[e]).apply(t,n)})},D.pluck=function(t,e){return D.map(t,D.property(e))},D.where=function(t,e){return D.filter(t,D.matches(e))},D.findWhere=function(t,e){return D.find(t,D.matches(e))},D.max=function(t,e,n){if(!e&&D.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,s=-1/0;return M(t,function(t,r,a){var o=e?e.call(n,t,r,a):t;o>s&&(i=t,s=o)}),i},D.min=function(t,e,n){if(!e&&D.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,s=1/0;return M(t,function(t,r,a){var o=e?e.call(n,t,r,a):t;s>o&&(i=t,s=o)}),i},D.shuffle=function(t){var e,n=0,i=[];return M(t,function(t){e=D.random(n++),i[n-1]=i[e],i[e]=t}),i},D.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=D.values(t)),t[D.random(t.length-1)]):D.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return null==t?D.identity:D.isFunction(t)?t:D.property(t)};D.sortBy=function(t,e,n){return e=T(e),D.pluck(D.map(t,function(t,i,s){return{value:t,index:i,criteria:e.call(n,t,i,s)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,i){var s={};return n=T(n),M(e,function(r,a){var o=n.call(i,r,a,e);t(s,o,r)}),s}};D.groupBy=C(function(t,e,n){D.has(t,e)?t[e].push(n):t[e]=[n]}),D.indexBy=C(function(t,e,n){t[e]=n}),D.countBy=C(function(t,e){D.has(t,e)?t[e]++:t[e]=1}),D.sortedIndex=function(t,e,n,i){n=T(n);for(var s=n.call(i,e),r=0,a=t.length;a>r;){var o=r+a>>>1;n.call(i,t[o])<s?r=o+1:a=o}return r},D.toArray=function(t){return t?D.isArray(t)?o.call(t):t.length===+t.length?D.map(t,D.identity):D.values(t):[]},D.size=function(t){return null==t?0:t.length===+t.length?t.length:D.keys(t).length},D.first=D.head=D.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:o.call(t,0,e)},D.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},D.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},D.rest=D.tail=D.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},D.compact=function(t){return D.filter(t,D.identity)};var O=function(t,e,n){return e&&D.every(t,D.isArray)?u.apply(n,t):(M(t,function(t){D.isArray(t)||D.isArguments(t)?e?a.apply(n,t):O(t,e,n):n.push(t)}),n)};D.flatten=function(t,e){return O(t,e,[])},D.without=function(t){return D.difference(t,o.call(arguments,1))},D.partition=function(t,e){var n=[],i=[];return M(t,function(t){(e(t)?n:i).push(t)}),[n,i]},D.uniq=D.unique=function(t,e,n,i){D.isFunction(e)&&(i=n,n=e,e=!1);var s=n?D.map(t,n,i):t,r=[],a=[];return M(s,function(n,i){(e?i&&a[a.length-1]===n:D.contains(a,n))||(a.push(n),r.push(t[i]))}),r},D.union=function(){return D.uniq(D.flatten(arguments,!0))},D.intersection=function(t){var e=o.call(arguments,1);return D.filter(D.uniq(t),function(t){return D.every(e,function(e){return D.contains(e,t)})})},D.difference=function(t){var e=u.apply(i,o.call(arguments,1));return D.filter(t,function(t){return!D.contains(e,t)})},D.zip=function(){for(var t=D.max(D.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=D.pluck(arguments,""+n);return e},D.object=function(t,e){if(null==t)return{};for(var n={},i=0,s=t.length;s>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},D.indexOf=function(t,e,n){if(null==t)return-1;var i=0,s=t.length;if(n){if("number"!=typeof n)return i=D.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,s+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;s>i;i++)if(t[i]===e)return i;return-1},D.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(y&&t.lastIndexOf===y)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var s=i?n:t.length;s--;)if(t[s]===e)return s;return-1},D.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),s=0,r=new Array(i);i>s;)r[s++]=t,t+=n;return r};var Y=function(){};D.bind=function(t,e){var n,i;if(k&&t.bind===k)return k.apply(t,o.call(arguments,1));if(!D.isFunction(t))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(o.call(arguments)));Y.prototype=t.prototype;var s=new Y;Y.prototype=null;var r=t.apply(s,n.concat(o.call(arguments)));return Object(r)===r?r:s}},D.partial=function(t){var e=o.call(arguments,1);return function(){for(var n=0,i=e.slice(),s=0,r=i.length;r>s;s++)i[s]===D&&(i[s]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},D.bindAll=function(t){var e=o.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return M(e,function(e){t[e]=D.bind(t[e],t)}),t},D.memoize=function(t,e){var n={};return e||(e=D.identity),function(){var i=e.apply(this,arguments);return D.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},D.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},D.defer=function(t){return D.delay.apply(D,[t,1].concat(o.call(arguments,1)))},D.throttle=function(t,e,n){var i,s,r,a=null,o=0;n||(n={});var u=function(){o=n.leading===!1?0:D.now(),a=null,r=t.apply(i,s),i=s=null};return function(){var l=D.now();o||n.leading!==!1||(o=l);var c=e-(l-o);return i=this,s=arguments,0>=c?(clearTimeout(a),a=null,o=l,r=t.apply(i,s),i=s=null):a||n.trailing===!1||(a=setTimeout(u,c)),r}},D.debounce=function(t,e,n){var i,s,r,a,o,u=function(){var l=D.now()-a;e>l?i=setTimeout(u,e-l):(i=null,n||(o=t.apply(r,s),r=s=null))};return function(){r=this,s=arguments,a=D.now();var l=n&&!i;return i||(i=setTimeout(u,e)),l&&(o=t.apply(r,s),r=s=null),o}},D.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},D.wrap=function(t,e){return D.partial(e,t)},D.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},D.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},D.keys=function(t){if(!D.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)D.has(t,n)&&e.push(n);return e},D.values=function(t){for(var e=D.keys(t),n=e.length,i=new Array(n),s=0;n>s;s++)i[s]=t[e[s]];return i},D.pairs=function(t){for(var e=D.keys(t),n=e.length,i=new Array(n),s=0;n>s;s++)i[s]=[e[s],t[e[s]]];return i},D.invert=function(t){for(var e={},n=D.keys(t),i=0,s=n.length;s>i;i++)e[t[n[i]]]=n[i];return e},D.functions=D.methods=function(t){var e=[];for(var n in t)D.isFunction(t[n])&&e.push(n);return e.sort()},D.extend=function(t){return M(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},D.pick=function(t){var e={},n=u.apply(i,o.call(arguments,1));return M(n,function(n){n in t&&(e[n]=t[n])}),e},D.omit=function(t){var e={},n=u.apply(i,o.call(arguments,1));for(var s in t)D.contains(n,s)||(e[s]=t[s]);return e},D.defaults=function(t){return M(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},D.clone=function(t){return D.isObject(t)?D.isArray(t)?t.slice():D.extend({},t):t},D.tap=function(t,e){return e(t),t};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof D&&(t=t._wrapped),e instanceof D&&(e=e._wrapped);var s=l.call(t);if(s!=l.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;var a=t.constructor,o=e.constructor;if(a!==o&&!(D.isFunction(a)&&a instanceof a&&D.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var u=0,c=!0;if("[object Array]"==s){if(u=t.length,c=u==e.length)for(;u--&&(c=A(t[u],e[u],n,i)););}else{for(var d in t)if(D.has(t,d)&&(u++,!(c=D.has(e,d)&&A(t[d],e[d],n,i))))break;if(c){for(d in e)if(D.has(e,d)&&!u--)break;c=!u}}return n.pop(),i.pop(),c};D.isEqual=function(t,e){return A(t,e,[],[])},D.isEmpty=function(t){if(null==t)return!0;if(D.isArray(t)||D.isString(t))return 0===t.length;for(var e in t)if(D.has(t,e))return!1;return!0},D.isElement=function(t){return!(!t||1!==t.nodeType)},D.isArray=w||function(t){return"[object Array]"==l.call(t)},D.isObject=function(t){return t===Object(t)},M(["Arguments","Function","String","Number","Date","RegExp"],function(t){D["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),D.isArguments(arguments)||(D.isArguments=function(t){return!(!t||!D.has(t,"callee"))}),"function"!=typeof/./&&(D.isFunction=function(t){return"function"==typeof t}),D.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},D.isNaN=function(t){return D.isNumber(t)&&t!=+t},D.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},D.isNull=function(t){return null===t},D.isUndefined=function(t){return void 0===t},D.has=function(t,e){return c.call(t,e)},D.noConflict=function(){return t._=e,this},D.identity=function(t){return t},D.constant=function(t){return function(){return t}},D.property=function(t){return function(e){return e[t]}},D.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},D.times=function(t,e,n){for(var i=Array(Math.max(0,t)),s=0;t>s;s++)i[s]=e.call(n,s);return i},D.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},D.now=Date.now||function(){return(new Date).getTime()};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=D.invert(N.escape);var E={escape:new RegExp("["+D.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+D.keys(N.unescape).join("|")+")","g")};D.each(["escape","unescape"],function(t){D[t]=function(e){return null==e?"":(""+e).replace(E[t],function(e){return N[t][e]})}}),D.result=function(t,e){if(null==t)return void 0;var n=t[e];return D.isFunction(n)?n.call(t):n},D.mixin=function(t){M(D.functions(t),function(e){var n=D[e]=t[e];D.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),R.call(this,n.apply(D,t))}})};var I=0;D.uniqueId=function(t){var e=++I+"";return t?t+e:e},D.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g;D.template=function(t,e,n){var i;n=D.defaults({},n,D.templateSettings);var s=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(s,function(e,n,i,s,o){return a+=t.slice(r,o).replace(U,function(t){return"\\"+L[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),r=o+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(e)return i(e,D);var u=function(t){return i.call(this,t,D)};return u.source="function("+(n.variable||"obj")+"){\n"+a+"}",u},D.chain=function(t){return D(t).chain()};var R=function(t){return this._chain?D(t).chain():t};D.mixin(D),M(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];D.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],R.call(this,n)}}),M(["concat","join","slice"],function(t){var e=i[t];D.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),D.extend(D.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return D})}).call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,s){t.Backbone=e(t,s,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){{var s=t.Backbone,r=[],a=(r.push,r.slice);r.splice}e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var s=this,r=n.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,i)},off:function(t,e,i){var s,r,a,o,u,c,d,h;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(o=t?[t]:n.keys(this._events),u=0,c=o.length;c>u;u++)if(t=o[u],a=this._events[t]){if(this._events[t]=s=[],e||i)for(d=0,h=a.length;h>d;d++)r=a[d],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&c(n,e),i&&c(i,arguments),this},stopListening:function(t,e,i){var s=this._listeningTo;if(!s)return this;var r=!e&&!i;i||"object"!=typeof e||(i=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,i,this),(r||n.isEmpty(t._events))&&delete this._listeningTo[a];return this}},u=/\s+/,l=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return!1}if(u.test(n)){for(var r=n.split(u),a=0,o=r.length;o>a;a++)t[e].apply(t,[r[a]].concat(i));return!1}return!0},c=function(t,e){var n,i=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,a,o);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}},d={listenTo:"on",listenToOnce:"once"};n.each(d,function(t,e){o[e]=function(e,i,s){var r=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=n.uniqueId("l"));return r[a]=e,s||"object"!=typeof i||(s=this),e[t](i,s,this),this}}),o.bind=o.on,o.unbind=o.off,n.extend(e,o);var h=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,r,a,o,u,l,c,d;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;a=i.unset,u=i.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],n.isEqual(d[s],e)||o.push(s),n.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete d[s]:d[s]=e;if(!u){o.length&&(this._pending=i);for(var h=0,f=o.length;f>h;h++)this.trigger("change:"+o[h],this,d[o[h]],i)}if(l)return this;if(!u)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)n.isEqual(s[r],e=t[r])||((i||(i={}))[r]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,i){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,i=n.extend({validate:!0},i),s&&!i.wait){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},o,s)),void 0===i.parse&&(i.parse=!0);var u=this,l=i.success;return i.success=function(t){u.attributes=o;var e=u.parse(t,i);return i.wait&&(e=n.extend(s||{},e)),n.isObject(e)&&!u.set(e,i)?!1:(l&&l(u,t,i),void u.trigger("sync",u,t,i))},U(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=s),a=this.sync(r,this,i),s&&i.wait&&(this.attributes=o),a},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&s(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(t){h.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(p.prototype,o,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;r>s;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,m),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var s,r,a,o,u,l,c,d=e.at,f=this.model,p=this.comparator&&null==d&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],_=[],y={},w=e.add,b=e.merge,k=e.remove,D=!p&&w&&k?[]:!1;for(s=0,r=t.length;r>s;s++){if(u=t[s]||{},a=u instanceof h?o=u:u[f.prototype.idAttribute||"id"],l=this.get(a))k&&(y[l.cid]=!0),b&&(u=u===o?o.attributes:u,e.parse&&(u=l.parse(u,e)),l.set(u,e),p&&!c&&l.hasChanged(g)&&(c=!0)),t[s]=l;else if(w){if(o=t[s]=this._prepareModel(u,e),!o)continue;v.push(o),this._addReference(o,e)}o=l||o,!D||!o.isNew()&&y[o.id]||D.push(o),y[o.id]=!0}if(k){for(s=0,r=this.length;r>s;++s)y[(o=this.models[s]).cid]||_.push(o);_.length&&this.remove(_,e)}if(v.length||D&&D.length)if(p&&(c=!0),this.length+=v.length,null!=d)for(s=0,r=v.length;r>s;s++)this.models.splice(d+s,0,v[s]);else{D&&(this.models.length=0);var M=D||v;for(s=0,r=M.length;r>s;s++)this.models.push(M[s])}if(c&&this.sort({silent:!0}),!e.silent){for(s=0,r=v.length;r>s;s++)(o=v[s]).trigger("add",o,this,e);(c||D&&D.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,s=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),s&&s(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var _=["groupBy","countBy","sortBy","indexBy"];n.each(_,function(t){p.prototype[t]=function(e,i){var s=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,s,i)}});var y=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var s=e.match(w),r=s[1],a=s[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,i):this.$el.on(r,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,s){var r=D[t];n.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=n.result(i,"url")||L()),null!=s.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&k&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=s.xhr=e.ajax(n.extend(a,s));return i.trigger("request",i,u,s),u};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var M=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,T=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(M.prototype,o,{initialize:function(){},route:function(t,i,s){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var r=this;return e.history.route(t,function(n){var a=r._extractParameters(t,n);r.execute(s,a),r.trigger.apply(r,["route:"+i].concat(a)),r.trigger("route",i,a),e.history.trigger("route",r,i,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(S,"(?:$1)?").replace(x,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var O=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)
},Y=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,N=/msie [\w.]+/,E=/\/$/,I=/#.*$/;O.started=!1,n.extend(O.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(E,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(Y,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,r=N.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(A,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(Y,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!O.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(I,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new O;var P=function(t,e){var i,s=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,e);var r=function(){this.constructor=i};return r.prototype=s.prototype,i.prototype=new r,t&&n.extend(i.prototype,t),i.__super__=s.prototype,i};h.extend=p.extend=M.extend=y.extend=O.extend=P;var L=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(t,e){return function(n){return c(t.call(this,n),e)}}function i(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function s(){}function r(t){k(t),o(this,t)}function a(t){var e=g(t),n=e.year||0,i=e.month||0,s=e.week||0,r=e.day||0,a=e.hour||0,o=e.minute||0,u=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*u+6e4*o+36e5*a,this._days=+r+7*s,this._months=+i+12*n,this._data={},this._bubble()}function o(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function u(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&ge.hasOwnProperty(e)&&(n[e]=t[e]);return n}function l(t){return 0>t?Math.ceil(t):Math.floor(t)}function c(t,e,n){for(var i=""+Math.abs(t),s=t>=0;i.length<e;)i="0"+i;return(s?n?"+":"":"-")+i}function d(t,e,n,i){var s,r,a=e._milliseconds,o=e._days,u=e._months;a&&t._d.setTime(+t._d+a*n),(o||u)&&(s=t.minute(),r=t.hour()),o&&t.date(t.date()+o*n),u&&t.month(t.month()+u*n),a&&!i&&ie.updateOffset(t),(o||u)&&(t.minute(s),t.hour(r))}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function p(t,e,n){var i,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(i=0;s>i;i++)(n&&t[i]!==e[i]||!n&&_(t[i])!==_(e[i]))&&a++;return a+r}function m(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=ze[t]||Ve[e]||e}return t}function g(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=m(n),e&&(i[e]=t[n]));return i}function v(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}ie[e]=function(s,r){var a,o,u=ie.fn._lang[e],l=[];if("number"==typeof s&&(r=s,s=t),o=function(t){var e=ie().utc().set(i,t);return u.call(ie.fn._lang,e,s||"")},null!=r)return o(r);for(a=0;n>a;a++)l.push(o(a));return l}}function _(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function y(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function w(t){return b(t)?366:365}function b(t){return t%4===0&&t%100!==0||t%400===0}function k(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[le]<0||t._a[le]>11?le:t._a[ce]<1||t._a[ce]>y(t._a[ue],t._a[le])?ce:t._a[de]<0||t._a[de]>23?de:t._a[he]<0||t._a[he]>59?he:t._a[fe]<0||t._a[fe]>59?fe:t._a[pe]<0||t._a[pe]>999?pe:-1,t._pf._overflowDayOfYear&&(ue>e||e>ce)&&(e=ce),t._pf.overflow=e)}function D(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function M(t){return t?t.toLowerCase().replace("_","-"):t}function S(t,e){return e._isUTC?ie(t).zone(e._offset||0):ie(t).local()}function x(t,e){return e.abbr=t,me[t]||(me[t]=new s),me[t].set(e),me[t]}function T(t){delete me[t]}function C(t){var e,n,i,s,r=0,a=function(t){if(!me[t]&&ve)try{require("./lang/"+t)}catch(e){}return me[t]};if(!t)return ie.fn._lang;if(!h(t)){if(n=a(t))return n;t=[t]}for(;r<t.length;){for(s=M(t[r]).split("-"),e=s.length,i=M(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=a(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&p(s,i,!0)>=e-1)break;e--}r++}return ie.fn._lang}function O(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,n,i=t.match(be);for(e=0,n=i.length;n>e;e++)i[e]=Ze[i[e]]?Ze[i[e]]:O(i[e]);return function(s){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(s,t):i[e];return r}}function A(t,e){return t.isValid()?(e=N(e,t.lang()),Be[e]||(Be[e]=Y(e)),Be[e](t)):t.lang().invalidDate()}function N(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(ke.lastIndex=0;i>=0&&ke.test(t);)t=t.replace(ke,n),ke.lastIndex=0,i-=1;return t}function E(t,e){var n,i=e._strict;switch(t){case"DDDD":return Ie;case"YYYY":case"GGGG":case"gggg":return i?Pe:Se;case"Y":case"G":case"g":return Ue;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Le:xe;case"S":if(i)return Ne;case"SS":if(i)return Ee;case"SSS":if(i)return Ie;case"DDD":return Me;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ce;case"a":case"A":return C(e._l)._meridiemParse;case"X":return Ae;case"Z":case"ZZ":return Oe;case"T":return Ye;case"SSSS":return Te;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ee:De;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return De;default:return n=new RegExp(H(F(t.replace("\\","")),"i"))}}function I(t){t=t||"";var e=t.match(Oe)||[],n=e[e.length-1]||[],i=(n+"").match(je)||["-",0,0],s=+(60*i[1])+_(i[2]);return"+"===i[0]?-s:s}function P(t,e,n){var i,s=n._a;switch(t){case"M":case"MM":null!=e&&(s[le]=_(e)-1);break;case"MMM":case"MMMM":i=C(n._l).monthsParse(e),null!=i?s[le]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[ce]=_(e));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=_(e));break;case"YY":s[ue]=_(e)+(_(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":s[ue]=_(e);break;case"a":case"A":n._isPm=C(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[de]=_(e);break;case"m":case"mm":s[he]=_(e);break;case"s":case"ss":s[fe]=_(e);break;case"S":case"SS":case"SSS":case"SSSS":s[pe]=_(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=I(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function L(t){var e,n,i,s,r,a,o,u,l,c,d=[];if(!t._d){for(i=R(t),t._w&&null==t._a[ce]&&null==t._a[le]&&(r=function(e){var n=parseInt(e,10);return e?e.length<3?n>68?1900+n:2e3+n:n:null==t._a[ue]?ie().weekYear():t._a[ue]},a=t._w,null!=a.GG||null!=a.W||null!=a.E?o=J(r(a.GG),a.W||1,a.E,4,1):(u=C(t._l),l=null!=a.d?B(a.d,u):null!=a.e?parseInt(a.e,10)+u._week.dow:0,c=parseInt(a.w,10)||1,null!=a.d&&l<u._week.dow&&c++,o=J(r(a.gg),c,l,u._week.doy,u._week.dow)),t._a[ue]=o.year,t._dayOfYear=o.dayOfYear),t._dayOfYear&&(s=null==t._a[ue]?i[ue]:t._a[ue],t._dayOfYear>w(s)&&(t._pf._overflowDayOfYear=!0),n=V(s,0,t._dayOfYear),t._a[le]=n.getUTCMonth(),t._a[ce]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=d[e]=i[e];for(;7>e;e++)t._a[e]=d[e]=null==t._a[e]?2===e?1:0:t._a[e];d[de]+=_((t._tzm||0)/60),d[he]+=_((t._tzm||0)%60),t._d=(t._useUTC?V:z).apply(null,d)}}function U(t){var e;t._d||(e=g(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],L(t))}function R(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function W(t){t._a=[],t._pf.empty=!0;var e,n,i,s,r,a=C(t._l),o=""+t._i,u=o.length,l=0;for(i=N(t._f,a).match(be)||[],e=0;e<i.length;e++)s=i[e],n=(o.match(E(s,t))||[])[0],n&&(r=o.substr(0,o.indexOf(n)),r.length>0&&t._pf.unusedInput.push(r),o=o.slice(o.indexOf(n)+n.length),l+=n.length),Ze[s]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(s),P(s,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=u-l,o.length>0&&t._pf.unusedInput.push(o),t._isPm&&t._a[de]<12&&(t._a[de]+=12),t._isPm===!1&&12===t._a[de]&&(t._a[de]=0),L(t),k(t)}function F(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,s){return e||n||i||s})}function H(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function j(t){var n,i,s,r,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(r=0;r<t._f.length;r++)a=0,n=o({},t),n._pf=e(),n._f=t._f[r],W(n),D(n)&&(a+=n._pf.charsLeftOver,a+=10*n._pf.unusedTokens.length,n._pf.score=a,(null==s||s>a)&&(s=a,i=n));o(t,i||n)}function G(t){var e,n,i=t._i,s=Re.exec(i);if(s){for(t._pf.iso=!0,e=0,n=Fe.length;n>e;e++)if(Fe[e][1].exec(i)){t._f=Fe[e][0]+(s[6]||" ");break}for(e=0,n=He.length;n>e;e++)if(He[e][1].exec(i)){t._f+=He[e][0];break}i.match(Oe)&&(t._f+="Z"),W(t)}else t._d=new Date(i)}function $(e){var n=e._i,i=_e.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?G(e):h(n)?(e._a=n.slice(0),L(e)):f(n)?e._d=new Date(+n):"object"==typeof n?U(e):e._d=new Date(n)}function z(t,e,n,i,s,r,a){var o=new Date(t,e,n,i,s,r,a);return 1970>t&&o.setFullYear(t),o}function V(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function B(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function q(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}function X(t,e,n){var i=oe(Math.abs(t)/1e3),s=oe(i/60),r=oe(s/60),a=oe(r/24),o=oe(a/365),u=45>i&&["s",i]||1===s&&["m"]||45>s&&["mm",s]||1===r&&["h"]||22>r&&["hh",r]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",oe(a/30)]||1===o&&["y"]||["yy",o];return u[2]=e,u[3]=t>0,u[4]=n,q.apply({},u)}function Z(t,e,n){var i,s=n-e,r=n-t.day();return r>s&&(r-=7),s-7>r&&(r+=7),i=ie(t).add("d",r),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function J(t,e,n,i,s){var r,a,o=V(t,0,1).getUTCDay();return n=null!=n?n:s,r=s-o+(o>i?7:0)-(s>o?7:0),a=7*(e-1)+(n-s)+r+1,{year:a>0?t:t-1,dayOfYear:a>0?a:w(t-1)+a}}function Q(t){var e=t._i,n=t._f;return null===e?ie.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=C().preparse(e)),ie.isMoment(e)?(t=u(e),t._d=new Date(+e._d)):n?h(n)?j(t):W(t):$(t),new r(t))}function K(t,e){ie.fn[t]=ie.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),ie.updateOffset(this),this):this._d["get"+n+e]()}}function te(t){ie.duration.fn[t]=function(){return this._data[t]}}function ee(t,e){ie.duration.fn["as"+t]=function(){return+this/e}}function ne(t){var e=!1,n=ie;"undefined"==typeof ender&&(t?(ae.moment=function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},o(ae.moment,n)):ae.moment=ie)}for(var ie,se,re="2.5.1",ae=this,oe=Math.round,ue=0,le=1,ce=2,de=3,he=4,fe=5,pe=6,me={},ge={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ve="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,_e=/^\/?Date\((\-?\d+)/i,ye=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,we=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,be=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ke=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,De=/\d\d?/,Me=/\d{1,3}/,Se=/\d{1,4}/,xe=/[+\-]?\d{1,6}/,Te=/\d+/,Ce=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Oe=/Z|[\+\-]\d\d:?\d\d/gi,Ye=/T/i,Ae=/[\+\-]?\d+(\.\d{1,3})?/,Ne=/\d/,Ee=/\d\d/,Ie=/\d{3}/,Pe=/\d{4}/,Le=/[+-]?\d{6}/,Ue=/[+-]?\d+/,Re=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,We="YYYY-MM-DDTHH:mm:ssZ",Fe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],He=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],je=/([\+\-]|\d\d)/gi,Ge="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),$e={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ze={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ve={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Be={},qe="DDD w W M D d".split(" "),Xe="M D H h m s w W".split(" "),Ze={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+c(Math.abs(t),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return _(this.milliseconds()/100)},SS:function(){return c(_(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(_(t/60),2)+":"+c(_(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(_(t/60),2)+c(_(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Je=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];qe.length;)se=qe.pop(),Ze[se+"o"]=i(Ze[se],se);for(;Xe.length;)se=Xe.pop(),Ze[se+se]=n(Ze[se],2);for(Ze.DDDD=n(Ze.DDD,3),o(s.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=ie.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=ie([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var s=this._relativeTime[n];return"function"==typeof s?s(t,e,n,i):s.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Z(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ie=function(n,i,s,r){var a;return"boolean"==typeof s&&(r=s,s=t),a={},a._isAMomentObject=!0,a._i=n,a._f=i,a._l=s,a._strict=r,a._isUTC=!1,a._pf=e(),Q(a)},ie.utc=function(n,i,s,r){var a;return"boolean"==typeof s&&(r=s,s=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=s,a._i=n,a._f=i,a._strict=r,a._pf=e(),Q(a).utc()},ie.unix=function(t){return ie(1e3*t)},ie.duration=function(t,e){var n,i,s,r=t,o=null;return ie.isDuration(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(o=ye.exec(t))?(n="-"===o[1]?-1:1,r={y:0,d:_(o[ce])*n,h:_(o[de])*n,m:_(o[he])*n,s:_(o[fe])*n,ms:_(o[pe])*n}):(o=we.exec(t))&&(n="-"===o[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},r={y:s(o[2]),M:s(o[3]),d:s(o[4]),h:s(o[5]),m:s(o[6]),s:s(o[7]),w:s(o[8])}),i=new a(r),ie.isDuration(t)&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},ie.version=re,ie.defaultFormat=We,ie.updateOffset=function(){},ie.lang=function(t,e){var n;return t?(e?x(M(t),e):null===e?(T(t),t="en"):me[t]||C(t),n=ie.duration.fn._lang=ie.fn._lang=C(t),n._abbr):ie.fn._lang._abbr},ie.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),C(t)},ie.isMoment=function(t){return t instanceof r||null!=t&&t.hasOwnProperty("_isAMomentObject")},ie.isDuration=function(t){return t instanceof a},se=Je.length-1;se>=0;--se)v(Je[se]);for(ie.normalizeUnits=function(t){return m(t)},ie.invalid=function(t){var e=ie.utc(0/0);return null!=t?o(e._pf,t):e._pf.userInvalidated=!0,e},ie.parseZone=function(t){return ie(t).parseZone()},o(ie.fn=r.prototype,{clone:function(){return ie(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=ie(this).utc();return 0<t.year()&&t.year()<=9999?A(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return D(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?ie.utc(this._a):ie(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=A(this,t||ie.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?ie.duration(+e,t):ie.duration(t,e),d(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?ie.duration(+e,t):ie.duration(t,e),d(this,n,-1),this},diff:function(t,e,n){var i,s,r=S(t,this),a=6e4*(this.zone()-r.zone());return e=m(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+r.daysInMonth()),s=12*(this.year()-r.year())+(this.month()-r.month()),s+=(this-ie(this).startOf("month")-(r-ie(r).startOf("month")))/i,s-=6e4*(this.zone()-ie(this).startOf("month").zone()-(r.zone()-ie(r).startOf("month").zone()))/i,"year"===e&&(s/=12)):(i=this-r,s="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?s:l(s)},from:function(t,e){return ie.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ie(),t)},calendar:function(){var t=S(ie(),this).startOf("day"),e=this.diff(t,"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=B(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),ie.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=m(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=m(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ie(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ie(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+S(t,this).startOf(e)},min:function(t){return t=ie.apply(null,arguments),this>t?this:t},max:function(t){return t=ie.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=I(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&d(this,ie.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ie(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return y(this.year(),this.month())},dayOfYear:function(t){var e=oe((ie(this).startOf("day")-ie(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(t){var e=Z(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=Z(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=Z(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=m(t),this[t]()},set:function(t,e){return t=m(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=C(e),this)}}),se=0;se<Ge.length;se++)K(Ge[se].toLowerCase().replace(/s$/,""),Ge[se]);K("year","FullYear"),ie.fn.days=ie.fn.day,ie.fn.months=ie.fn.month,ie.fn.weeks=ie.fn.week,ie.fn.isoWeeks=ie.fn.isoWeek,ie.fn.toJSON=ie.fn.toISOString,o(ie.duration.fn=a.prototype,{_bubble:function(){var t,e,n,i,s=this._milliseconds,r=this._days,a=this._months,o=this._data;o.milliseconds=s%1e3,t=l(s/1e3),o.seconds=t%60,e=l(t/60),o.minutes=e%60,n=l(e/60),o.hours=n%24,r+=l(n/24),o.days=r%30,a+=l(r/30),o.months=a%12,i=l(a/12),o.years=i},weeks:function(){return l(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)},humanize:function(t){var e=+this,n=X(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=ie.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=ie.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=m(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=m(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ie.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||s||r?"T":"")+(i?i+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"}});for(se in $e)$e.hasOwnProperty(se)&&(ee(se,$e[se]),te(se.toLowerCase()));ee("Weeks",6048e5),ie.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ie.lang("en",{ordinal:function(t){var e=t%10,n=1===_(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),ve?(module.exports=ie,ne(!0)):"function"==typeof define&&define.amd?define("moment",function(e,n,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&ne(i.config().noGlobal===t),ie}):ne()}.call(this),function(t){if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){if("undefined"==typeof e)throw alert("momentjs is requried"),new Error("momentjs is required");var n=0,s=e,r=function(e,r){var a={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:new s({y:1900}),maxDate:(new s).add(100,"y"),showToday:!0,collapse:!0,language:"en",defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:!1},o={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},u=this,l=function(){var i,l=!1;if(u.options=t.extend({},a,r),u.options.icons=t.extend({},o,u.options.icons),u.element=t(e),d(),!u.options.pickTime&&!u.options.pickDate)throw new Error("Must choose at least one picker");if(u.id=n++,s.lang(u.options.language),u.date=s(),u.unset=!1,u.isInput=u.element.is("input"),u.component=!1,u.element.hasClass("input-group")&&(u.component=u.element.find(0==u.element.find(".datepickerbutton").size()?"[class^='input-group-']":".datepickerbutton")),u.format=u.options.format,i=s()._lang._longDateFormat,u.format||(u.format=u.options.pickDate?i.L:"",u.options.pickDate&&u.options.pickTime&&(u.format+=" "),u.format+=u.options.pickTime?i.LT:"",u.options.useSeconds&&(~i.LT.indexOf(" A")?u.format=u.format.split(" A")[0]+":ss A":u.format+=":ss")),u.use24hours=u.format.toLowerCase().indexOf("a")<1,u.component&&(l=u.component.find("span")),u.options.pickTime&&l&&l.addClass(u.options.icons.time),u.options.pickDate&&l&&(l.removeClass(u.options.icons.time),l.addClass(u.options.icons.date)),u.widget=t(F()).appendTo("body"),u.options.useSeconds&&!u.use24hours&&u.widget.width(300),u.minViewMode=u.options.minViewMode||0,"string"==typeof u.minViewMode)switch(u.minViewMode){case"months":u.minViewMode=1;break;case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.viewMode=u.options.viewMode||0,"string"==typeof u.viewMode)switch(u.viewMode){case"months":u.viewMode=1;break;case"years":u.viewMode=2;break;default:u.viewMode=0}if(u.options.disabledDates=R(u.options.disabledDates),u.options.enabledDates=R(u.options.enabledDates),u.startViewMode=u.viewMode,u.setMinDate(u.options.minDate),u.setMaxDate(u.options.maxDate),g(),v(),y(),w(),b(),m(),C(),O(),""!==u.options.defaultDate&&""==c().val()&&u.setValue(u.options.defaultDate),1!==u.options.minuteStepping){var h=u.date.minutes(),f=u.options.minuteStepping;u.date.minutes(Math.round(h/f)*f%60).seconds(0)}},c=function(){return u.isInput?u.element:dateStr=u.element.find("input")},d=function(){var t;t=(u.element.is("input"),u.element.data()),void 0!==t.dateFormat&&(u.options.format=t.dateFormat),void 0!==t.datePickdate&&(u.options.pickDate=t.datePickdate),void 0!==t.datePicktime&&(u.options.pickTime=t.datePicktime),void 0!==t.dateUseminutes&&(u.options.useMinutes=t.dateUseminutes),void 0!==t.dateUseseconds&&(u.options.useSeconds=t.dateUseseconds),void 0!==t.dateUsecurrent&&(u.options.useCurrent=t.dateUsecurrent),void 0!==t.dateMinutestepping&&(u.options.minuteStepping=t.dateMinutestepping),void 0!==t.dateMindate&&(u.options.minDate=t.dateMindate),void 0!==t.dateMaxdate&&(u.options.maxDate=t.dateMaxdate),void 0!==t.dateShowtoday&&(u.options.showToday=t.dateShowtoday),void 0!==t.dateCollapse&&(u.options.collapse=t.dateCollapse),void 0!==t.dateLanguage&&(u.options.language=t.dateLanguage),void 0!==t.dateDefaultdate&&(u.options.defaultDate=t.dateDefaultdate),void 0!==t.dateDisableddates&&(u.options.disabledDates=t.dateDisableddates),void 0!==t.dateEnableddates&&(u.options.enabledDates=t.dateEnableddates),void 0!==t.dateIcons&&(u.options.icons=t.dateIcons),void 0!==t.dateUsestrict&&(u.options.useStrict=t.dateUsestrict),void 0!==t.dateDirection&&(u.options.direction=t.dateDirection),void 0!==t.dateSidebyside&&(u.options.sideBySide=t.dateSidebyside)
},h=function(){var e="absolute",n=u.component?u.component.offset():u.element.offset(),i=t(window);u.width=u.component?u.component.outerWidth():u.element.outerWidth(),n.top=n.top+u.element.outerHeight();var s;"up"===u.options.direction?s="top":"bottom"===u.options.direction?s="bottom":"auto"===u.options.direction&&(s=n.top+u.widget.height()>i.height()+i.scrollTop()&&u.widget.height()+u.element.outerHeight()<n.top?"top":"bottom"),"top"===s?(n.top-=u.widget.height()+u.element.outerHeight()+15,u.widget.addClass("top").removeClass("bottom")):(n.top+=1,u.widget.addClass("bottom").removeClass("top")),void 0!==u.options.width&&u.widget.width(u.options.width),"left"===u.options.orientation&&(u.widget.addClass("left-oriented"),n.left=n.left-u.widget.width()+20),E()&&(e="fixed",n.top-=i.scrollTop(),n.left-=i.scrollLeft()),i.width()<n.left+u.widget.outerWidth()?(n.right=i.width()-n.left-u.width,n.left="auto",u.widget.addClass("pull-right")):(n.right="auto",u.widget.removeClass("pull-right")),u.widget.css({position:e,top:n.top,left:n.left,right:n.right})},f=function(t,e){s(u.date).isSame(s(t))||(u.element.trigger({type:"dp.change",date:s(u.date),oldDate:s(t)}),"change"!==e&&u.element.change())},p=function(t){u.element.trigger({type:"dp.error",date:s(t)})},m=function(t){s.lang(u.options.language);var e=t;e||(e=c().val(),e&&(u.date=s(e,u.format,u.options.useStrict)),u.date||(u.date=s())),u.viewDate=s(u.date).startOf("month"),_(),k()},g=function(){s.lang(u.options.language);var e,n=t("<tr>"),i=s.weekdaysMin();if(0==s()._lang._week.dow)for(e=0;7>e;e++)n.append('<th class="dow">'+i[e]+"</th>");else for(e=1;8>e;e++)n.append(7==e?'<th class="dow">'+i[0]+"</th>":'<th class="dow">'+i[e]+"</th>");u.widget.find(".datepicker-days thead").append(n)},v=function(){s.lang(u.options.language);for(var t="",e=0,n=s.monthsShort();12>e;)t+='<span class="month">'+n[e++]+"</span>";u.widget.find(".datepicker-months td").append(t)},_=function(){s.lang(u.options.language);var e,n,i,r,a,o,l,c,d=u.viewDate.year(),h=u.viewDate.month(),f=u.options.minDate.year(),p=u.options.minDate.month(),m=u.options.maxDate.year(),g=u.options.maxDate.month(),v=[],_=s.months();for(u.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-days th:eq(1)").text(_[h]+" "+d),e=s(u.viewDate).subtract("months",1),o=e.daysInMonth(),e.date(o).startOf("week"),(d==f&&p>=h||f>d)&&u.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(d==m&&h>=g||d>m)&&u.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),n=s(e).add(42,"d");e.isBefore(n);){if(e.weekday()===s().startOf("week").weekday()&&(i=t("<tr>"),v.push(i)),r="",e.year()<d||e.year()==d&&e.month()<h?r+=" old":(e.year()>d||e.year()==d&&e.month()>h)&&(r+=" new"),e.isSame(s({y:u.date.year(),M:u.date.month(),d:u.date.date()}))&&(r+=" active"),(L(e)||!U(e))&&(r+=" disabled"),u.options.showToday===!0&&e.isSame(s(),"day")&&(r+=" today"),u.options.daysOfWeekDisabled)for(a in u.options.daysOfWeekDisabled)if(e.day()==u.options.daysOfWeekDisabled[a]){r+=" disabled";break}i.append('<td class="day'+r+'">'+e.date()+"</td>"),e.add(1,"d")}for(u.widget.find(".datepicker-days tbody").empty().append(v),c=u.date.year(),_=u.widget.find(".datepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active"),c===d&&_.eq(u.date.month()).addClass("active"),f>c-1&&u.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),c+1>m&&u.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),a=0;12>a;a++)d==f&&p>a||f>d?t(_[a]).addClass("disabled"):(d==m&&a>g||d>m)&&t(_[a]).addClass("disabled");for(v="",d=10*parseInt(d/10,10),l=u.widget.find(".datepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td"),u.widget.find(".datepicker-years").find("th").removeClass("disabled"),f>d&&u.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),d+9>m&&u.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),d-=1,a=-1;11>a;a++)v+='<span class="year'+(-1===a||10===a?" old":"")+(c===d?" active":"")+(f>d||d>m?" disabled":"")+'">'+d+"</span>",d+=1;l.html(v)},y=function(){s.lang(u.options.language);var t,e,n,i=u.widget.find(".timepicker .timepicker-hours table"),r="";if(i.parent().hide(),u.use24hours)for(t=0,e=0;6>e;e+=1){for(r+="<tr>",n=0;4>n;n+=1)r+='<td class="hour">'+W(t.toString())+"</td>",t++;r+="</tr>"}else for(t=1,e=0;3>e;e+=1){for(r+="<tr>",n=0;4>n;n+=1)r+='<td class="hour">'+W(t.toString())+"</td>",t++;r+="</tr>"}i.html(r)},w=function(){var t,e,n=u.widget.find(".timepicker .timepicker-minutes table"),i="",s=0,r=u.options.minuteStepping;for(n.parent().hide(),(r=1)&&(r=5),t=0;t<Math.ceil(60/r/4);t++){for(i+="<tr>",e=0;4>e;e+=1)60>s?(i+='<td class="minute">'+W(s.toString())+"</td>",s+=r):i+="<td></td>";i+="</tr>"}n.html(i)},b=function(){var t,e,n=u.widget.find(".timepicker .timepicker-seconds table"),i="",s=0;for(n.parent().hide(),t=0;3>t;t++){for(i+="<tr>",e=0;4>e;e+=1)i+='<td class="second">'+W(s.toString())+"</td>",s+=5;i+="</tr>"}n.html(i)},k=function(){if(u.date){var t=u.widget.find(".timepicker span[data-time-component]"),e=u.date.hours(),n="AM";u.use24hours||(e>=12&&(n="PM"),0===e?e=12:12!=e&&(e%=12),u.widget.find(".timepicker [data-action=togglePeriod]").text(n)),t.filter("[data-time-component=hours]").text(W(e)),t.filter("[data-time-component=minutes]").text(W(u.date.minutes())),t.filter("[data-time-component=seconds]").text(W(u.date.second()))}},D=function(e){e.stopPropagation(),e.preventDefault(),u.unset=!1;var n,i,r,a,o=t(e.target).closest("span, td, th"),l=s(u.date);if(1===o.length&&!o.is(".disabled"))switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"switch":C(1);break;case"prev":case"next":r=H.modes[u.viewMode].navStep,"prev"===o[0].className&&(r=-1*r),u.viewDate.add(r,H.modes[u.viewMode].navFnc),_()}break;case"span":o.is(".month")?(n=o.parent().find("span").index(o),u.viewDate.month(n)):(i=parseInt(o.text(),10)||0,u.viewDate.year(i)),u.viewMode===u.minViewMode&&(u.date=s({y:u.viewDate.year(),M:u.viewDate.month(),d:u.viewDate.date(),h:u.date.hours(),m:u.date.minutes(),s:u.date.seconds()}),f(l,e.type),I()),C(-1),_();break;case"td":o.is(".day")&&(a=parseInt(o.text(),10)||1,n=u.viewDate.month(),i=u.viewDate.year(),o.is(".old")?0===n?(n=11,i-=1):n-=1:o.is(".new")&&(11==n?(n=0,i+=1):n+=1),u.date=s({y:i,M:n,d:a,h:u.date.hours(),m:u.date.minutes(),s:u.date.seconds()}),u.viewDate=s({y:i,M:n,d:Math.min(28,a)}),_(),I(),f(l,e.type))}},M={incrementHours:function(){P("add","hours",1)},incrementMinutes:function(){P("add","minutes",u.options.minuteStepping)},incrementSeconds:function(){P("add","seconds",1)},decrementHours:function(){P("subtract","hours",1)},decrementMinutes:function(){P("subtract","minutes",u.options.minuteStepping)},decrementSeconds:function(){P("subtract","seconds",1)},togglePeriod:function(){var t=u.date.hours();t>=12?t-=12:t+=12,u.date.hours(t)},showPicker:function(){u.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),u.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var n=u.widget.find(".timepicker [data-action=togglePeriod]").text(),i=parseInt(t(e.target).text(),10);"PM"==n&&(i+=12),u.date.hours(i),M.showPicker.call(u)},selectMinute:function(e){u.date.minutes(parseInt(t(e.target).text(),10)),M.showPicker.call(u)},selectSecond:function(e){u.date.seconds(parseInt(t(e.target).text(),10)),M.showPicker.call(u)}},S=function(e){var n=s(u.date),i=t(e.currentTarget).data("action"),r=M[i].apply(u,arguments);return x(e),u.date||(u.date=s({y:1970})),I(),k(),f(n,e.type),r},x=function(t){t.stopPropagation(),t.preventDefault()},T=function(e){s.lang(u.options.language);var n=t(e.target),i=s(u.date),r=s(n.val(),u.format,u.options.useStrict);r.isValid()&&!L(r)&&U(r)?(m(),u.setValue(r),f(i,e.type),I()):(u.viewDate=i,f(i,e.type),p(r),u.unset=!0)},C=function(t){t&&(u.viewMode=Math.max(u.minViewMode,Math.min(2,u.viewMode+t)));H.modes[u.viewMode].clsName;u.widget.find(".datepicker > div").hide().filter(".datepicker-"+H.modes[u.viewMode].clsName).show()},O=function(){var e,n,i,s,r;u.widget.on("click",".datepicker *",t.proxy(D,this)),u.widget.on("click","[data-action]",t.proxy(S,this)),u.widget.on("mousedown",t.proxy(x,this)),u.options.pickDate&&u.options.pickTime&&u.widget.on("click.togglePicker",".accordion-toggle",function(a){if(a.stopPropagation(),e=t(this),n=e.closest("ul"),i=n.find(".in"),s=n.find(".collapse:not(.in)"),i&&i.length){if(r=i.data("collapse"),r&&r.date-transitioning)return;i.collapse("hide"),s.collapse("show"),e.find("span").toggleClass(u.options.icons.time+" "+u.options.icons.date),u.element.find(".input-group-addon span").toggleClass(u.options.icons.time+" "+u.options.icons.date)}}),u.isInput?u.element.on({focus:t.proxy(u.show,this),change:t.proxy(T,this),blur:t.proxy(u.hide,this)}):(u.element.on({change:t.proxy(T,this)},"input"),u.component?u.component.on("click",t.proxy(u.show,this)):u.element.on("click",t.proxy(u.show,this)))},Y=function(){t(window).on("resize.datetimepicker"+u.id,t.proxy(h,this)),u.isInput||t(document).on("mousedown.datetimepicker"+u.id,t.proxy(u.hide,this))},A=function(){u.widget.off("click",".datepicker *",u.click),u.widget.off("click","[data-action]"),u.widget.off("mousedown",u.stopEvent),u.options.pickDate&&u.options.pickTime&&u.widget.off("click.togglePicker"),u.isInput?u.element.off({focus:u.show,change:u.change}):(u.element.off({change:u.change},"input"),u.component?u.component.off("click",u.show):u.element.off("click",u.show))},N=function(){t(window).off("resize.datetimepicker"+u.id),u.isInput||t(document).off("mousedown.datetimepicker"+u.id)},E=function(){if(u.element){var e,n=u.element.parents(),i=!1;for(e=0;e<n.length;e++)if("fixed"==t(n[e]).css("position")){i=!0;break}return i}return!1},I=function(){s.lang(u.options.language);var t="";u.unset||(t=s(u.date).format(u.format)),c().val(t),u.element.data("date",t),u.options.pickTime||u.hide()},P=function(t,e,n){s.lang(u.options.language);var i;return"add"==t?(i=s(u.date),23==i.hours()&&i.add(n,e),i.add(n,e)):i=s(u.date).subtract(n,e),L(s(i.subtract(n,e)))||L(i)?void p(i.format(u.format)):("add"==t?u.date.add(n,e):u.date.subtract(n,e),void(u.unset=!1))},L=function(t){return s.lang(u.options.language),t.isAfter(u.options.maxDate)||t.isBefore(u.options.minDate)?!0:u.options.disabledDates===!1?!1:u.options.disabledDates[s(t).format("YYYY-MM-DD")]===!0},U=function(t){return s.lang(u.options.language),u.options.enabledDates===!1?!0:u.options.enabledDates[s(t).format("YYYY-MM-DD")]===!0},R=function(t){var e={},n=0;for(i=0;i<t.length;i++)dDate=s(t[i]),dDate.isValid()&&(e[dDate.format("YYYY-MM-DD")]=!0,n++);return n>0?e:!1},W=function(t){return t=t.toString(),t.length>=2?t:"0"+t},F=function(){if(u.options.pickDate&&u.options.pickTime){var t="";return t='<div class="bootstrap-datetimepicker-widget'+(u.options.sideBySide?" timepicker-sbs":"")+' dropdown-menu" style="z-index:9999 !important;">',t+=u.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+H.template+'</div><div class="col-sm-6 timepicker">'+j.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(u.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+H.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+u.options.icons.time+'"></span></a></li><li'+(u.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+j.getTemplate()+"</div></li></ul>",t+="</div>"}return u.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+j.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+H.template+"</div></div>"},H={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},j={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};H.template='<div class="datepicker-days"><table class="table-condensed">'+H.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+H.headTemplate+H.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+H.headTemplate+H.contTemplate+"</table></div>",j.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+u.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(u.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+u.options.icons.up+'"></span></a>':"")+"</td>"+(u.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+u.options.icons.up+'"></span></a></td>':"")+(u.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+j.hourTemplate+'</td> <td class="separator">:</td><td>'+(u.options.useMinutes?j.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(u.options.useSeconds?'<td class="separator">:</td><td>'+j.secondTemplate+"</td>":"")+(u.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+u.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(u.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+u.options.icons.down+'"></span></a>':"")+"</td>"+(u.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+u.options.icons.down+'"></span></a></td>':"")+(u.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(u.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},u.destroy=function(){A(),N(),u.widget.remove(),u.element.removeData("DateTimePicker"),u.component&&u.component.removeData("DateTimePicker")},u.show=function(t){u.options.useCurrent===!0&&""==c().val()&&u.setValue(s().format(u.format)),u.widget.show(),u.height=u.component?u.component.outerHeight():u.element.outerHeight(),h(),u.element.trigger({type:"dp.show",date:s(u.date)}),Y(),t&&x(t)},u.disable=function(){var t=u.element.find("input");t.prop("disabled")||(t.prop("disabled",!0),A())},u.enable=function(){var t=u.element.find("input");t.prop("disabled")&&(t.prop("disabled",!1),O())},u.hide=function(e){if(!e||!t(e.target).is(u.element.attr("id"))){var n,i,r=u.widget.find(".collapse");for(n=0;n<r.length;n++)if(i=r.eq(n).data("collapse"),i&&i.date-transitioning)return;u.widget.hide(),u.viewMode=u.startViewMode,C(),u.element.trigger({type:"dp.hide",date:s(u.date)}),N()}},u.setValue=function(t){s.lang(u.options.language),t?u.unset=!1:(u.unset=!0,I()),s.isMoment(t)||(t=s(t)),t.isValid()?(u.date=t,I(),u.viewDate=s({y:u.date.year(),M:u.date.month()}),_(),k()):p(t)},u.getDate=function(){return u.unset?null:u.date},u.setDate=function(t){var e=s(u.date);u.setValue(t?t:null),f(e,"function")},u.setDisabledDates=function(t){u.options.disabledDates=R(t),u.viewDate&&m()},u.setEnabledDates=function(t){u.options.enabledDates=R(t),u.viewDate&&m()},u.setMaxDate=function(t){void 0!=t&&(u.options.maxDate=s(t),u.viewDate&&m())},u.setMinDate=function(t){void 0!=t&&(u.options.minDate=s(t),u.viewDate&&m())},l()};t.fn.datetimepicker=function(e){return this.each(function(){var n=t(this),i=n.data("DateTimePicker");i||n.data("DateTimePicker",new r(this,e))})}}),function(t,e){function n(e,n){var s,r,a,o=e.nodeName.toLowerCase();return"area"===o?(s=e.parentNode,r=s.name,e.href&&r&&"map"===s.nodeName.toLowerCase()?(a=t("img[usemap=#"+r+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,s,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function s(e,n,i,s){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?o["inner"+i].call(this):this.each(function(){t(this).css(a,s(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(a,s(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var s,r=t.ui[e].prototype;for(s in i)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([n,i[s]])},call:function(t,e,n){var i,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<s.length;i++)t.options[s[i][0]]&&s[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",s=!1;return e[i]>0?!0:(e[i]=1,s=e[i]>0,e[i]=0,s)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}s(e)},t.widget=function(e,n,i){var s,r,a,o,u={},l=e.split(".")[0];e=e.split(".")[1],s=l+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[l]=t[l]||{},r=t[l][e],a=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),o=new n,o.options=t.widget.extend({},o.options),t.each(i,function(e,i){return t.isFunction(i)?void(u[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},s=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(u[e]=i)}),a.prototype=t.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||e:e},u,{constructor:a,namespace:l,widgetName:e,widgetFullName:s}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete r._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(n){for(var s,r,a=i.call(arguments,1),o=0,u=a.length;u>o;o++)for(s in a[o])r=a[o][s],a[o].hasOwnProperty(s)&&r!==e&&(n[s]=t.isPlainObject(r)?t.isPlainObject(n[s])?t.widget.extend({},n[s],r):t.widget.extend({},r):r);return n},t.widget.bridge=function(n,s){var r=s.prototype.widgetFullName||n;t.fn[n]=function(a){var o="string"==typeof a,u=i.call(arguments,1),l=this;return a=!o&&u.length?t.widget.extend.apply(null,[a].concat(u)):a,this.each(o?function(){var i,s=t.data(this,r);return s?t.isFunction(s[a])&&"_"!==a.charAt(0)?(i=s[a].apply(s,u),i!==s&&i!==e?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+a+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,r);e?e.option(a||{})._init():t.data(this,r,new s(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var s,r,a,o=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(o={},s=n.split("."),n=s.shift(),s.length){for(r=o[n]=t.widget.extend({},this.options[n]),a=0;a<s.length-1;a++)r[s[a]]=r[s[a]]||{},r=r[s[a]];if(n=s.pop(),1===arguments.length)return r[n]===e?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var s,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=s=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),t.each(i,function(i,a){function o(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||t.guid++);var u=i.match(/^(\w+)\s*(.*)$/),l=u[1]+r.eventNamespace,c=u[2];c?s.delegate(c,l,o):n.bind(l,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var s,r,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(s in r)s in n||(n[s]=r[s]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,s,r){"string"==typeof s&&(s={effect:s});var a,o=s?s===!0||"number"==typeof s?n:s.effect||n:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=r,s.delay&&i.delay(s.delay),a&&t.effects&&t.effects.effect[o]?i[e](s):o!==e&&i[o]?i[o](s.duration,s.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,s=1===n.which,r="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return s&&!r&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(n=i.values&&i.values.length||1,s.length>n&&(s.slice(n).remove(),s=s.slice(0,n)),e=s.length;n>e;e++)a.push(r);this.handles=s.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,s,r,a,o,u,l,c=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-c.values(e));(s>n||s===n&&(e===c._lastChangedValue||c.values(e)===d.min))&&(s=n,r=t(this),a=e)}),o=this._start(e,a),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,r.addClass("ui-state-active").focus(),u=r.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-u.left-r.width()/2,top:e.pageY-u.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,i),this._animateOff=!0,!0))
},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,s,r;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),s=this._valueMax()-this._valueMin(),r=this._valueMin()+i*s,this._trimAlignValue(r)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,s,r;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>i||1===e&&i>n)&&(n=i),n!==this.values(e)&&(s=this.values(),s[e]=n,r=this._trigger("slide",t,{handle:this.handles[e],value:n,values:s}),i=this.values(e?0:1),r!==!1&&this.values(e,n))):n!==this.value()&&(r=this._trigger("slide",t,{handle:this.handles[e],value:n}),r!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,s,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,s=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,n){var i,s=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;s>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,s,r,a=this.options.range,o=this.options,u=this,l=this._animateOff?!1:o.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=(u.values(i)-u._valueMin())/(u._valueMax()-u._valueMin())*100,c["horizontal"===u.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[l?"animate":"css"](c,o.animate),u.options.range===!0&&("horizontal"===u.orientation?(0===i&&u.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},o.animate),1===i&&u.range[l?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:o.animate})):(0===i&&u.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},o.animate),1===i&&u.range[l?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:o.animate}))),e=n}):(i=this.value(),s=this._valueMin(),r=this._valueMax(),n=r!==s?(i-s)/(r-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](c,o.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},o.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:o.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},o.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(n){var i,s,r,a,o=t(n.target).data("ui-slider-handle-index");switch(n.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(n.target).addClass("ui-state-active"),i=this._start(n,o),i===!1))return}switch(a=this.options.step,s=r=this.options.values&&this.options.values.length?this.values(o):this.value(),n.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;r=this._trimAlignValue(s+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;r=this._trimAlignValue(s-a)}this._slide(n,o,r)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(jQuery);var status_array_en={ready:"Click on the microphone icon and begin speaking.",active:"Speak now.","no-speech":'No speech was detected. You may need to adjust your <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892"> microphone settings</a>.',"audio-capture":'No microphone was found. Ensure that a microphone is installed and that <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892"> microphone settings</a> are configured correctly.',allow:'Click the "Allow" button above to enable your microphone.',"not-allowed":"Permission to use microphone is denied. To change, go to chrome://settings/contentExceptions#media-stream",upgrade:'Web Speech API is not supported by this browser.  Upgrade to <a href="//www.google.com/chrome">Chrome</a>.'},image_array_mic={ready:"/assets/mic-64613180017f36853cfc3a53e0600a9d.gif",complete:"mic.gif",active:"/assets/mic_animate-517cf92a957a635c69d8a394008568b4.gif","no-speech":"/assets/mic-64613180017f36853cfc3a53e0600a9d.gif",disable:"/assets/mic_slash-a5c6c047e775e2f572a1445e4a988c6f.gif"},TreemapUtils=TreemapUtils||{};TreemapUtils.KeySpline=function(t){function e(t,e){return 1-3*e+3*t}function n(t,e){return 3*e-6*t}function i(t){return 3*t}function s(t,s,r){return((e(s,r)*t+n(s,r))*t+i(s))*t}function r(t,s,r){return 3*e(s,r)*t*t+2*n(s,r)*t+i(s)}function a(t){for(var e=t,n=0;4>n;++n){var i=r(e,o,l);if(0==i)return e;var a=s(e,o,l)-t;e-=a/i}return e}var o=t.mX1||0,u=t.mY1||0,l=t.mX2||1,c=t.mY2||1;this.get=function(t){return o==u&&l==c?t:s(a(t),u,c)}},TreemapUtils.Easing={ease:{mX1:.25,mY1:.1,mX2:.25,mY2:1},linear:{mX1:0,mY1:0,mX2:1,mY2:1},"ease-in":{mX1:.42,mY1:0,mX2:1,mY2:1},"ease-out":{mX1:0,mY1:0,mX2:.58,mY2:1},"ease-in-out":{mX1:.42,mY1:0,mX2:.58,mY2:1}},TreemapUtils.sumArray=function(){function t(t,e){return t+e}return function(e){return e.reduce(t)}}(),TreemapUtils.deepCopy=function(t){if("[object Array]"===Object.prototype.toString.call(t)){for(var e=[],n=0,i=t.length;i>n;n++)e[n]=arguments.callee(t[n]);return e}if("object"==typeof t){var n,e={};for(n in t)e[n]=arguments.callee(t[n]);return e}return t},TreemapUtils.changeColor=function(t,e,n){t=t.replace(/^\s*|\s*$/,""),t=t.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var i=Math.round(256*e)*(n?-1:1),s=t.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),r=s&&null!==s[4]?s[4]:null,a=s?[s[1],s[2],s[3]]:t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(t,e,n,i){return parseInt(e,16)+","+parseInt(n,16)+","+parseInt(i,16)}).split(/,/);return s?"rgb"+(null!==r?"a":"")+"("+Math[n?"max":"min"](parseInt(a[0],10)+i,n?0:255)+", "+Math[n?"max":"min"](parseInt(a[1],10)+i,n?0:255)+", "+Math[n?"max":"min"](parseInt(a[2],10)+i,n?0:255)+(null!==r?", "+r:"")+")":["#",Math[n?"max":"min"](parseInt(a[0],10)+i,n?0:255).toString(16).lpad("0",2),Math[n?"max":"min"](parseInt(a[1],10)+i,n?0:255).toString(16).lpad("0",2),Math[n?"max":"min"](parseInt(a[2],10)+i,n?0:255).toString(16).lpad("0",2)].join("")},TreemapUtils.lighterColor=function(t,e){return TreemapUtils.changeColor(t,e,!1)},TreemapUtils.darkerColor=function(t,e){return TreemapUtils.changeColor(t,e,!0)},TreemapUtils.rgb2hex=function(t){var e="#"+(t[2]|t[1]<<8|t[0]<<16).toString(16).lpad("0",6);return e},TreemapUtils.avgRgb=function(t){return Math.floor(TreemapUtils.sumArray(t)/3)},TreemapUtils.hex2rgb=function(t){return t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(t,e,n,i){return parseInt(e,16)+","+parseInt(n,16)+","+parseInt(i,16)}).split(/,/)},TreemapUtils.squarify=function(t,e){var n,i=function(t){this.setX=function(e){t[2]-=e-t[0],t[0]=e},this.setY=function(e){t[3]-=e-t[1],t[1]=e},this.getX=function(){return t[0]},this.getY=function(){return t[1]},this.getW=function(){return t[2]},this.getH=function(){return t[3]},this.getWidth=function(){return Math.min(t[2],t[3])}},s=function(t,e){var n=Math.max.apply(null,t),i=Math.min.apply(null,t),s=TreemapUtils.sumArray(t),r=s*s,a=e*e;return Math.max(a*n/r,r/(a*i))},r=function(t){var e,n,i,s=c.getX(),r=c.getY(),a=s+c.getW(),o=r+c.getH();if(c.getW()<c.getH()){for(e=Math.ceil(TreemapUtils.sumArray(t)/c.getW()),r+e>=o&&(e=o-r),n=0;n<t.length;n++)i=Math.ceil(t[n]/e),(s+i>a||n+1===t.length)&&(i=a-s),u.push([s,r,i,e]),s+=i;c.setY(r+e)}else{for(e=Math.ceil(TreemapUtils.sumArray(t)/c.getH()),s+e>=a&&(e=a-s),n=0;n<t.length;n++)i=Math.ceil(t[n]/e),(r+i>o||n+1===t.length)&&(i=o-r),u.push([s,r,e,i]),r+=i;c.setX(s+e)}},a=function(t){var e=[];if(e.push(t.shift()),0===t.length)return e;var n=e.slice(),i=c.getWidth();do{if(n.push(t[0]),!(s(e,i)>s(n,i)))break;e=n.slice(),t.shift()}while(t.length>0);return e},o=function(t){do r(a(t));while(t.length>0)},u=[],l=[];if(t[2]<=0||t[3]<=0)for(n=0;n<e.length;n++)u.push(t.slice());else{l=e.map(function(e){return e*t[2]*t[3]});var c=new i(t.slice());o(l)}return u},function(t){t.widget("ui.treemap",{options:{dimensions:[1080,400],colorStops:[{val:0,color:"#08f"},{val:.5,color:"#03f"},{val:1,color:"#005"}],colorResolution:1024,naColor:"#000",innerNodeHeaderHeightPx:12,innerNodeHeaderLabeller:function(t,e,n,i){t.rect(e[0],e[1],e[2],e[3]),t.clip(),t.fillStyle="#555",t.font="0.625em Verdana, Geneva, sans-serif",t.fillText(i,e[0],e[1]+10)},innerNodeHeaderGradient:function(t,e){var n=t.createLinearGradient(e[0],e[1],e[0],e[1]+e[3]);return n.addColorStop(0,"#ccc"),n.addColorStop(.5,"#fff"),n.addColorStop(.9,"#fff"),n.addColorStop(1,"#555"),n},leafNodeBodyLabeller:function(t,e,n,i){t.rect(e[0],e[1],e[2],e[3]),t.clip(),t.fillStyle=TreemapUtils.avgRgb(n)<=200?"#fff":"#888",t.font="0.9em Lucida Grande, Geneva, sans-serif; margin-top: 20px",t.fillText(i,e[0],e[1]+10)},leafNodeBodyGradient:function(t,e,n){var i=.1*Math.min(e[2],e[3]),s=Math.max(e[2],e[3]),r=e[0]+.5*e[2],a=e[1]+.5*e[3],o=t.createRadialGradient(r,a,i,r,a,s);return o.addColorStop(0,TreemapUtils.lighterColor(TreemapUtils.rgb2hex(n),.2)),o.addColorStop(1,TreemapUtils.darkerColor(TreemapUtils.rgb2hex(n),.2)),o},layoutMethod:TreemapUtils.squarify,sizeOption:0,colorOption:0,nodeBorderWidth:.5,labelsEnabled:!0,animationEnabled:!0,animationDurationMs:1e3,animationEasing:{},postProcessCurve:{},nodeData:{}},_create:function(){this.stats={}},_init:function(){this.stats={},this._refreshCanvas(),this._refreshColorGradient(),this._refreshColor(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels()},_setOption:function(e){switch(t.Widget.prototype._setOption.apply(this,arguments),e){case"dimensions":this._refreshCanvas(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels();break;case"layoutMethod":this._refreshLayout(),this._renderNodes(),this._renderNodeLabels();break;case"labelsEnabled":this._renderNodes(),this._renderNodeLabels();break;case"leafNodeBodyGradient":this._renderNodes(),this._renderNodeLabels();break;case"colorStops":this._refreshColorGradient(),this._refreshColor(),this._renderNodes(),this._renderNodeLabels();break;case"colorOption":this._refreshColor(),this._renderNodes(),this._renderNodeLabels();break;case"sizeOption":this._refreshLayout(),this._animateOptionChange();break;case"postProcessCurve":this._refreshLayout(),this._animateOptionChange();break;case"nodeData":this._refreshColor(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels()}},_animateOptionChange:function(){function t(s){var s=Date.now(),r=s-n;r<i.options.animationDurationMs?(i._animateNodes(e.get(r/i.options.animationDurationMs)),requestAnimationFrame(t)):(i._animationActive=!1,i._renderNodes(),i._renderNodeLabels())}if(1==this.options.animationEnabled){!function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};window.requestAnimationFrame=t}(),this._animationActive=!0;var e=new TreemapUtils.KeySpline(this.options.animationEasing),n=Date.now(),i=this;requestAnimationFrame(t)}else this._renderNodes(),this._renderNodeLabels()},_animateNodes:function(t){var e=function(i){var r,a,o;for(a=0;a<i.length;a++)if(i[a].hasOwnProperty("children")===!1){if(void 0!==i[a].prevGeometry)for(r=i[a].prevGeometry.body.slice(),o=0;4>o;o++)r[o]+=(i[a].geometry.body[o]-i[a].prevGeometry.body[o])*t;else r=i[a].geometry.body;s.save(),s.fillStyle=n.options.leafNodeBodyGradient.call(n,s,r,i[a].computedColor),s.fillRect(r[0],r[1],r[2],r[3]),s.restore()}else e(i[a].children)},n=this,i=n.element.find("canvas")[0],s=i.getContext("2d");s.clearRect(0,0,i.width,i.height),e([n.options.nodeData])},_renderNodes:function(){if(void 0===this._animationActive||this._animationActive!==!0){var t=function(n){var i,r,a,o,u;for(o=0;o<n.length;o++){if(e._isRootNode(n[o])===!1){if(i=n[o].geometry.body,r=n[o].geometry.header,a=i.slice(),i[2]<=0||i[3]<=0)continue;for(s.save(),n[o].hasOwnProperty("children")&&null!==r?(s.fillStyle=e.options.innerNodeHeaderGradient.call(e,s,r,n[o].computedColor),s.fillRect(r[0],r[1],r[2],r[3]),n[o].hasOwnProperty("children")&&0===e.options.nodeBorderWidth&&(s.strokeStyle="#000",s.lineWidth=.5,s.beginPath(),s.moveTo(r[0]+r[2],r[1]),s.lineTo(r[0]+r[2],r[1]+r[3]),s.closePath(),s.stroke()),a[0]=r[0],a[1]=r[1],a[3]=r[3]+i[3]):(s.fillStyle=e.options.leafNodeBodyGradient.call(e,s,i,n[o].computedColor),s.fillRect(i[0],i[1],i[2],i[3])),s.restore(),u=0;u<a[3];u++)e._addRunlength(a[0],a[0]+a[2],a[1]+u,n[o].id)}n[o].hasOwnProperty("children")&&t(n[o].children)}},e=this,n=new Date,i=e.element.find("canvas")[0],s=i.getContext("2d");s.clearRect(0,0,i.width,i.height),e._clearScanLines(),t([e.options.nodeData]);var r=new Date;e.stats.renderLayoutMsec=r-n}},_renderNodeLabels:function(){if((void 0===this._animationActive||this._animationActive!==!0)&&this.options.labelsEnabled===!0){var t=function(n){var i,r,a;for(a=0;a<n.length;a++){if(e._isRootNode(n[a])===!1){if(i=n[a].geometry.body,r=n[a].geometry.header,i[2]<=0||i[3]<=0){n[a].hasOwnProperty("children")===!1&&(e.stats.leafNodeCnt+=1);continue}s.save(),s.beginPath(),n[a].hasOwnProperty("children")?null!==r&&e.options.innerNodeHeaderLabeller.call(e,s,r,n[a].computedColor,n[a].id):(e.options.leafNodeBodyLabeller.call(e,s,i,n[a].computedColor,n[a].id),e.stats.leafNodeCnt+=1,e.stats.renderedLeafNodeCnt+=1),s.restore()}n[a].hasOwnProperty("children")&&t(n[a].children)}},e=this;e.stats.leafNodeCnt=0,e.stats.renderedLeafNodeCnt=0;var n=new Date,i=e.element.find("canvas")[0],s=i.getContext("2d");t([e.options.nodeData]);var r=new Date;e.stats.renderLabelsMsec=r-n}},_refreshCanvas:function(){var t=this.element.find("canvas");t&&t.remove(),t=document.createElement("canvas"),t.setAttribute("width",this.options.dimensions[0]),t.setAttribute("height",this.options.dimensions[1]);var e=this;this.element.append(t).mousemove(function(t){if(void 0===e._animationActive||e._animationActive!==!0){var n,i,s,r,a=e.element.offset(),o=parseInt(a.left,10),u=parseInt(a.top,10),l=e.options.dimensions[0],c=e.options.dimensions[1];if(t.pageX<o+l&&t.pageY<u+c){for(n=e._coordsToId(t.pageX-o,t.pageY-u),i=[],r=0;r<n.length;r++)i.push(e._getNode([n[r]]));s={nodes:i,ids:n},e._trigger("mousemove",t,s)}}}).click(function(t){if(void 0===e._animationActive||e._animationActive!==!0){var n,i,s,r,a=e.element.offset(),o=parseInt(a.left,10),u=parseInt(a.top,10),l=e.options.dimensions[0],c=e.options.dimensions[1];if(t.pageX<o+l&&t.pageY<u+c){for(n=e._coordsToId(t.pageX-o,t.pageY-u),i=[],r=0;r<n.length;r++)i.push(e._getNode([n[r]]));s={nodes:i,ids:n},e._trigger("click",t,s)}}})},_refreshColorGradient:function(){var t,e,n,i=document.createElement("canvas"),s=this.options.colorStops;for(i.setAttribute("width",this.options.colorResolution),i.setAttribute("height",1),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(i),t=i.getContext("2d"),e=t.createLinearGradient(0,0,this.options.colorResolution,0),n=0;n<s.length;n+=1)e.addColorStop(s[n].val,s[n].color);t.fillStyle=e,t.fillRect(0,0,this.options.colorResolution,1),this.options.colorGradientMap=t.getImageData(0,0,this.options.colorResolution,1)},_refreshColor:function(){function t(n){var i;for(i=0;i<n.length;i++)void 0!==n[i].color&&(n[i].colorVal=n[i].color[e.options.colorOption],n[i].computedColor=e._getRgbColor(n[i].colorVal)),n[i].hasOwnProperty("children")&&t(n[i].children)}var e=this;t([e.options.nodeData])},_refreshLayout:function(){function t(t){if(0!==Object.getOwnPropertyNames(n.options.postProcessCurve).length){var e;for(e=0;e<t.length;e++)t[e]=s.get(t[e]);var i=TreemapUtils.sumArray(t);for(e=0;e<t.length;e++)t[e]=t[e]/i}return t}function e(i,s){var r,a,o,u,l=[];for(s.sort(function(t,e){return t.size[n.options.sizeOption]>e.size[n.options.sizeOption]?-1:t.size[n.options.sizeOption]<e.size[n.options.sizeOption]?1:0}),u=0;u<s.length;u++)l[u]=n._isRootNode(s[u])===!0?1:s[u].size[n.options.sizeOption];for(t(l),o=n.options.layoutMethod([i[0],i[1],i[2],i[3]],l),u=0;u<s.length;u++)s[u].geometry&&(s[u].prevGeometry=TreemapUtils.deepCopy(s[u].geometry)),s[u].geometry={body:o[u],header:null},n._addNode2NodeList(s[u]);for(u=0;u<s.length;u++)s[u].hasOwnProperty("children")&&(r=s[u].geometry.body,a=s[u].geometry.header,n._isRootNode(s[u])===!1&&r[3]-n.options.innerNodeHeaderHeightPx>0&&(a=s[u].geometry.header=r.slice(),a[3]=n.options.innerNodeHeaderHeightPx,r[1]+=n.options.innerNodeHeaderHeightPx,r[3]-=n.options.innerNodeHeaderHeightPx),n._isRootNode(s[u])===!1&&r[2]-n.options.nodeBorderWidth>0&&r[3]-n.options.nodeBorderWidth>0&&(n.options.dimensions[0]>r[0]+r[2]&&(r[2]-=n.options.nodeBorderWidth,null!==a&&(a[2]-=n.options.nodeBorderWidth)),n.options.dimensions[1]>r[1]+r[3]&&(r[3]-=n.options.nodeBorderWidth)),e(r,s[u].children))}var n=this,i=new Date,s=new TreemapUtils.KeySpline(this.options.postProcessCurve),r=[0,0,n.options.dimensions[0],n.options.dimensions[1]];n._clearNodeList(),e(r,[n.options.nodeData]);var a=new Date;n.stats.computeLayoutMsec=a-i},_getRgbColor:function(t){if(null===t)return TreemapUtils.hex2rgb(this.options.naColor);var e=this.options.colorGradientMap.data,n=4*Math.floor(t*(e.length/4));return[e[n],e[n+1],e[n+2]]},_clearScanLines:function(){this.scanLines&&(this.scanLines.length=0,this.scanLines=[])},_addRunlength:function(t,e,n,i){void 0===this.scanLines&&(this.scanLines=[]),y_str=parseInt(n,10),this.scanLines[y_str]||(this.scanLines[y_str]=[]),this.scanLines[y_str].push([t,e,i])},_coordsToId:function(t,e){var n,i,s,r,a,o,u;if(void 0===this.scanLines)return[];if(n=this.scanLines[e],a=[],n)for(u=n.length-1;u>=0;u--)i=n[u],s=i[0],r=i[1],o=i[2],t>=s&&r>t&&a.push(o);return a},_clearNodeList:function(){this.nodeList&&(this.nodeList={})},_addNode2NodeList:function(t){void 0===this.nodeList&&(this.nodeList={}),this.nodeList[t.id]||(this.nodeList[t.id]=t)},_getNode:function(t){return this.nodeList[t]},_isRootNode:function(t){return this.options.nodeData===t?!0:!1},destroy:function(){this.element.find("canvas").remove(),t(window).unbind("resize"),t.Widget.prototype.destroy.call(this)}})}(jQuery),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.lpad=function(t,e){for(var n=this;n.length<e;)n=t+n;return n},String.prototype.rpad=function(t,e){for(var n=this;n.length<e;)n+=t;return n};var WordModel=Backbone.Model.extend({urlRoot:"/words"}),WordCollection=Backbone.Collection.extend({model:WordModel,url:function(){var t=window.location.pathname.match(/\/\d+$/)[0].replace("/","");return"/users/"+t+"/words"},graphObjectInDateTimeRange:function(t,e,n){for(var i=[],s=this.timeIntervals(t,e,n),r=0;r<s.length;r++){var a=this.wordModelsFromStartToEnd(s[r],s[r+1]);i.push({x:s[r],y:a})}return i},wordModelsFromStartToEnd:function(t,e){var n=this.filter(function(n){var i=new Date(Date.parse(n.get("created_at"))).getTime()/1e3;return i>t&&e>i});return n},timeIntervals:function(t,e,n){for(var i=[],s=e-t,r=0;s>r;r+=n)i.push(t+r);return i},earliestTimeInRange:function(t,e){var n=this.wordModelsFromStartToEnd(t,e),i=_.sortBy(n,function(t){return new Date(Date.parse(t.get("created_at")))}),s=i[0];return new Date(Date.parse(s.get("created_at"))).getTime()/1e3},wordString:function(t,e){var n=this.wordModelsFromStartToEnd(t,e),i=_.map(n,function(t){return t.get("letters")});return i.join("+")}}),reco=new WebSpeechRecognition,SpeechInputView=Backbone.View.extend({el:"#speech-input",events:{"click button#microphone":"microphoneButton"},initialize:function(){this.wordStorage=[],reco.statusText("status"),reco.statusImage("status_img"),reco.finalResults("final_span"),reco.interimResults("interim_span"),reco.continuous=!0,reco.maxAlternatives=1,reco.recognition.onresult=function(t){for(var e="",n=t.resultIndex;n<t.results.length;++n)if(t.results[n].isFinal){var i=t.results[n][0].transcript.trim().split(" ");_.each(i,function(t){this.wordStorage.push(t)}.bind(this))}else e+=t.results[n][0].transcript;document.getElementById("interim_span").innerHTML=e}.bind(this),this.listenForWords()},microphoneButton:function(){reco.toggleStartStop()},listenForWords:function(){setInterval(function(){_.each(this.wordStorage,function(t){var e={letters:t};this.collection.create(e,{wait:!0})}.bind(this)),this.wordStorage=[]}.bind(this),2e3)}}),graph,stringToQuery,WordListView=Backbone.View.extend({el:"#word-chart",events:{"click button#word-search":"wordSearch","click button#datetimebutton":"resetTime","click button#alchemy":"setUpAlchemy","click div.treemap-node":"googleResults","click button#transcript":"generateTranscript","click button#live":"startLiveChart"},initialize:function(){self=this,this.$("#chart_container").remove(),$("<div id=chart_container></div>").insertBefore("#slider-range"),this.collection.fetch(),this.listenTo(this.collection,"add",this.addToTempStorage),this.DEFAULTHOURSPAST=1,this.SMOOTHING=1.001,this.tempWordStorage=[],this.startDate=this.setStartDate(),this.endDate=(new Date).getTime(),this.xIntervalSeconds=this.setIntervalSeconds((this.endDate-this.startDate)/1e3),this.graphObjectArray=this.queryDBforGraphData(this.xIntervalSeconds),this.render()},render:function(){this.lineDataArray=this.getLineDataArray(this.graphObjectArray),this.initializeChart(),graph.render(),this.setSlider(),this.setTickInterval()},updateSliderInterval:function(){console.log("hi")},startLiveChart:function(){clearInterval(this.currentInterval),this.$("#chart_container").remove(),$("<div id=chart_container></div>").insertBefore("#slider-range"),this.collection.fetch(),this.startDate=(new Date).getTime()-6e4,this.endDate=(new Date).getTime(),this.xIntervalSeconds=.1,this.graphObjectArray=this.queryDBforGraphData(this.xIntervalSeconds),this.render()},setIntervalSeconds:function(t){var e,n=3600;return e=2*n>t?1:24*n>t?5:84*n>t?10:168*n>t?30:720*n>t?150:1200,$("#tick-interval").text(e+" seconds"),e},generateTranscript:function(){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var t=this.collection.wordString(leftSliderDateTime,rightSliderDateTime).split("+").join(" ");$("#transcript-box").empty(),$("#transcript-box").slideDown(),$("#transcript-box").append("<h4 id=transcript-title>Trancript from "+prettyDateTime(new Date(1e3*leftSliderDateTime))+" to "+prettyDateTime(new Date(1e3*rightSliderDateTime))+":</h4>"),$("#transcript-box").append("<p id=transcript-content>"+t+"</p>"),$("html, body").animate({scrollTop:$("#transcript-box").offset().top-80},400)},sliderDateTimes:function(){var t=new Date-this.startDate,e=parseFloat(document.getElementById("left-slider").style.left)/100,n=parseFloat(document.getElementById("right-slider").style.left)/100,i=(e*t+this.startDate)/1e3,s=(n*t+this.startDate)/1e3;return[i,s]},resetTime:function(){this.startDate=this.setStartDate(),clearInterval(this.currentInterval),this.initialize()},getLineDataArray:function(t){return _.map(t,function(t){return{x:t.x,y:t.y.length}})},wordSearch:function(){var t=[{x:this.startDate/1e3,y:0}],e=$("#search-input").val(),n=this.sliderDateTimes()[0],i=this.sliderDateTimes()[1];_.each(this.graphObjectArray,function(s){s.y.length>0&&_.each(s.y,function(r,a,o){r.get("letters").toLowerCase()===e.toLowerCase()&&s.x>n&&s.x<i&&t.push({x:s.x,y:o.length})}.bind(this))}.bind(this));var s=Math.floor(255*Math.random()),r=Math.floor(255*Math.random()),a=Math.floor(255*Math.random()),o="rgb("+s+","+r+","+a+")",u=t.length-1;graph.series.push({data:t,renderer:"scatterplot",color:o}),$("#legend").append("<div class='search-term' style='background: "+o+";'><span class='search-count'>("+u+")</span> "+e+"</div>"),graph.render(),$("html, body").animate({scrollTop:$("body").offset().top+100},400)},setUpAlchemy:function(){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var t=this.collection.wordString(leftSliderDateTime,rightSliderDateTime);this.renderAlchemy(t)},renderAlchemy:function(t){$.ajax({url:"/alchemy_search",method:"post",data:{words:t},dataType:"json"}).done(function(t){var e=0;_.each(t.entities,function(t){e+=parseFloat(t.relevance)});var n=_.map(t.entities,function(t){var n=parseFloat(t.relevance);return{id:t.text+" - "+t.type,size:[n/e],color:[n]}});this.treemap(n),$("html, body").animate({scrollTop:$("#treemap").offset().top-80},400)}.bind(this))},setTickInterval:function(){var t=1,e=this.endDate/1e3;this.currentInterval=setInterval(function(){var n=e+this.xIntervalSeconds*t,i=this.lineDataArray,s=_.map(this.tempWordStorage,function(t){return new WordModel({letters:t})}),r=0===this.tempWordStorage.length?i[i.length-1].y/this.SMOOTHING:this.tempWordStorage.length;this.lineDataArray.push({x:n,y:r}),this.graphObjectArray.push({x:n,y:s}),this.tempWordStorage=[],graph.render(),t++}.bind(this),1e3*this.xIntervalSeconds)},setStartDate:function(){$(".form-control").css("border-color","#ddd"),$("#tick-interval").parent().find("p").remove();var t=$(".form-control").val();if(""===t)return(new Date).getTime()-60*this.DEFAULTHOURSPAST*60*1e3;var e=new Date(t).getTime();return e>(new Date).getTime()&&($(".form-control").css("border-color","red"),$("#tick-interval").parent().append("<p>Time cannot be in the future</p>"),e=(new Date).getTime()-60*this.DEFAULTHOURSPAST*60*1e3),e},initializeChart:function(){$("#chart_container").prepend("<div id='chart'>"),$("#chart_container").prepend("<div id='y_axis'>"),graph=new Rickshaw.Graph({element:document.querySelector("#chart"),renderer:"multi",width:1100,height:400,series:[{data:this.lineDataArray,renderer:"line",color:"steelblue"}]});new Rickshaw.Graph.Axis.Time({graph:graph,timeUnit:"seconds"}),new Rickshaw.Graph.Axis.Y({graph:graph,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById("y_axis")}),new Rickshaw.Graph.HoverDetail({graph:graph,formatter:function(t,e,n){var i=_.filter(this.graphObjectArray,function(t){return t.x===e}.bind(this));if(i.length>0){var s=_.map(i[0].y,function(t){return t.get("letters")});$("#legend-datetime").text(prettyDateTime(new Date(1e3*e))),$("#legend-words").text(s.join(" "))}return i[0].y.length>0?"word count: "+n:"word count: 0"}.bind(this)})},queryDBforGraphData:function(t){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var e=this.collection.graphObjectInDateTimeRange(leftSliderDateTime,rightSliderDateTime,t);return e},addToTempStorage:function(t){this.tempWordStorage.push(t.get("letters"))},setSlider:function(){new Rickshaw.Graph.RangeSlider({graph:graph,element:document.querySelector("#slider-range")})},treemap:function(t){$("#treemap").remove(),$("<div id='treemap'>").insertBefore("#google-results"),t.length>0?$("#treemap").treemap({nodeData:{id:"group 1",children:t}}).bind("treemapclick",this.mouseclickhandler):this.displayRelephantError()},displayRelephantError:function(){$('<div id="RelephantError">RelephantError: No concepts found. Try adjusting your search window or recording more conversations.</div>').appendTo("#treemap")},mouseclickhandler:function(t,e){var n=(e.nodes,e.ids),i=(n[0].split(" - ")[1],n[0].split(" - ")[0]);self.googleResults(i.toLowerCase().split(" ").join("+"))},googleResults:function(t){console.log(t);var e;$.ajax({url:"/google_search",method:"get",data:{entity:t},dataType:"json"}).done(function(t){e=t.items,this.googleResultsRender(e),$("html, body").animate({scrollTop:$("#google-results").offset().top-80},400),$(scrollTop())}.bind(this))},googleResultsRender:function(t){$("#google-results").empty(),_.each(t,function(t){var e=t.title,n=t.snippet,i=t.link;$('<div id="google-result"><a href="'+i+'"><h3>'+e+"</h3></a><br><p>"+n+"</p></div>").appendTo("#google-results")})}}),RephantoRouter=Backbone.Router.extend({routes:{"":"show"},initialize:function(){this.collection=new WordCollection},start:function(){Backbone.history.start()},show:function(){this.collection.fetch({success:function(){this.speechInputView=new SpeechInputView({collection:this.collection}),this.wordListView=new WordListView({collection:this.collection})}.bind(this)})}}),rephantoRouter;$(document).ready(backboneReady),$(document).on("page:load",function(){Backbone.history.stop(),backboneReady()});