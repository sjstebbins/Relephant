function WebSpeechRecognition(){var t=this;t.continuous=!1,t.lang="",t.maxAlternatives=1,t.status_array=status_array_en,t.image_array=image_array_mic;var e,i=!1;t.supported=function(){return!!t.recognition},t.statusText=function(e){t.status_elem=t.getElem(e),t.refreshState()},t.statusImage=function(e){t.image_elem=t.getElem(e),t.refreshState()},t.finalResults=function(e){t.final_results=t.getElem(e)},t.interimResults=function(e){t.interim_results=t.getElem(e)},t.inProgress=function(){return i},t.start=function(){i=!0,e=!1,t.final_transcript="",t.setText(t.final_results,""),t.setText(t.interim_results,""),t.recognition.continuous=t.continuous,t.recognition.interimResults=!!t.interim_results,t.recognition.maxAlternatives=t.maxAlternatives,""!=t.lang&&(t.recognition.lang=t.lang),t.recognition.start(),t.onState("allow")},t.stop=function(){i=!1,t.recognition.stop()},t.toggleStartStop=function(){reco.inProgress()?reco.stop():reco.start()},t.onState=function(e){t.onStatusChange(e),t.onImageChange(e),t.currentState=e},t.refreshState=function(){t.onState(t.currentState)},t.onStatusChange=function(e){if(t.status_elem){var i=t.status_array[e];i?(t.setText(t.status_elem,i),t.status_elem.style.visibility="visible"):t.status_elem.style.visibility="hidden"}},t.onImageChange=function(e){if(t.image_elem){var i=t.image_array[e];i||(i=t.image_array.disable),t.image_elem.src=i}},t.setText=function(e,i){e&&("INPUT"==e.nodeName?e.value=i:e.innerHTML=t.linebreak(i))},t.getElem=function(t){return"string"==typeof t?document.getElementById(t):t};var n=/\n\n/g,s=/\n/g;t.linebreak=function(t){return t.replace(n,"<p></p>").replace(s,"<br>")};var r=/\S/;t.capitalize=function(t){return t.replace(r,function(t){return t.toUpperCase()})},"webkitSpeechRecognition"in window?(t.recognition=new webkitSpeechRecognition,t.final_transcript="",t.interim_transcript="",t.onState("ready"),t.onEnd=null,t.recognition.onstart=function(){i=!0,t.onState("active")},t.recognition.onerror=function(i){("no-speech"==i.error||"audio-capture"==i.error||"not-allowed"==i.error)&&(t.onState(i.error),e=!0)},t.recognition.onend=function(){if(i=!1,!e){if(""==t.final_transcript)return void t.onState("ready");t.onState("complete"),t.onEnd&&t.onEnd()}},t.recognition.onresult=function(e){t.interim_transcript="";for(var i=e.resultIndex;i<e.results.length;++i)e.results[i].isFinal?t.final_transcript+=e.results[i][0].transcript:t.interim_transcript+=e.results[i][0].transcript;t.final_transcript=t.capitalize(t.final_transcript),t.setText(t.final_results,t.final_transcript),t.setText(t.interim_results,t.interim_transcript),t.onResult&&t.onResult()}):t.onState("upgrade")}function backboneReady(){rephantoRouter=new RephantoRouter,rephantoRouter.start(),runJoyride(),initializeToolTip()}function prettyDateTime(t){return t.toDateString()+" at "+t.toLocaleTimeString()}function runJoyride(){$("#joyRideTipContent").joyride({nextButton:!0,tipAnimation:"pop",cookieMonster:!0,cookieName:"JoyRide"})}function initializeToolTip(){$("#tooltip a").click(function(){runJoyride()})}(function(){var t=this,e=t._,i={},n=Array.prototype,s=Object.prototype,r=Function.prototype,a=n.push,o=n.slice,l=n.concat,u=s.toString,c=s.hasOwnProperty,d=n.forEach,h=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,y=n.indexOf,_=n.lastIndexOf,w=Array.isArray,b=Object.keys,x=r.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var D=k.each=k.forEach=function(t,e,n){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var s=0,r=t.length;r>s;s++)if(e.call(n,t[s],s,t)===i)return}else for(var a=k.keys(t),s=0,r=a.length;r>s;s++)if(e.call(n,t[a[s]],a[s],t)===i)return;return t};k.map=k.collect=function(t,e,i){var n=[];return null==t?n:h&&t.map===h?t.map(e,i):(D(t,function(t,s,r){n.push(e.call(i,t,s,r))}),n)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return n&&(e=k.bind(e,n)),s?t.reduce(e,i):t.reduce(e);if(D(t,function(t,r,a){s?i=e.call(n,i,t,r,a):(i=t,s=!0)}),!s)throw new TypeError(S);return i},k.reduceRight=k.foldr=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=k.bind(e,n)),s?t.reduceRight(e,i):t.reduceRight(e);var r=t.length;if(r!==+r){var a=k.keys(t);r=a.length}if(D(t,function(o,l,u){l=a?a[--r]:--r,s?i=e.call(n,i,t[l],l,u):(i=t[l],s=!0)}),!s)throw new TypeError(S);return i},k.find=k.detect=function(t,e,i){var n;return M(t,function(t,s,r){return e.call(i,t,s,r)?(n=t,!0):void 0}),n},k.filter=k.select=function(t,e,i){var n=[];return null==t?n:m&&t.filter===m?t.filter(e,i):(D(t,function(t,s,r){e.call(i,t,s,r)&&n.push(t)}),n)},k.reject=function(t,e,i){return k.filter(t,function(t,n,s){return!e.call(i,t,n,s)},i)},k.every=k.all=function(t,e,n){e||(e=k.identity);var s=!0;return null==t?s:g&&t.every===g?t.every(e,n):(D(t,function(t,r,a){return(s=s&&e.call(n,t,r,a))?void 0:i}),!!s)};var M=k.some=k.any=function(t,e,n){e||(e=k.identity);var s=!1;return null==t?s:v&&t.some===v?t.some(e,n):(D(t,function(t,r,a){return s||(s=e.call(n,t,r,a))?i:void 0}),!!s)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):M(t,function(t){return t===e})},k.invoke=function(t,e){var i=o.call(arguments,2),n=k.isFunction(e);return k.map(t,function(t){return(n?e:t[e]).apply(t,i)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var n=-1/0,s=-1/0;return D(t,function(t,r,a){var o=e?e.call(i,t,r,a):t;o>s&&(n=t,s=o)}),n},k.min=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var n=1/0,s=1/0;return D(t,function(t,r,a){var o=e?e.call(i,t,r,a):t;s>o&&(n=t,s=o)}),n},k.shuffle=function(t){var e,i=0,n=[];return D(t,function(t){e=k.random(i++),n[i-1]=n[e],n[e]=t}),n},k.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,i){return e=T(e),k.pluck(k.map(t,function(t,n,s){return{value:t,index:n,criteria:e.call(i,t,n,s)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,i,n){var s={};return i=T(i),D(e,function(r,a){var o=i.call(n,r,a,e);t(s,o,r)}),s}};k.groupBy=C(function(t,e,i){k.has(t,e)?t[e].push(i):t[e]=[i]}),k.indexBy=C(function(t,e,i){t[e]=i}),k.countBy=C(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,i,n){i=T(i);for(var s=i.call(n,e),r=0,a=t.length;a>r;){var o=r+a>>>1;i.call(n,t[o])<s?r=o+1:a=o}return r},k.toArray=function(t){return t?k.isArray(t)?o.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:o.call(t,0,e)},k.initial=function(t,e,i){return o.call(t,0,t.length-(null==e||i?1:e))},k.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,i){return o.call(t,null==e||i?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var $=function(t,e,i){return e&&k.every(t,k.isArray)?l.apply(i,t):(D(t,function(t){k.isArray(t)||k.isArguments(t)?e?a.apply(i,t):$(t,e,i):i.push(t)}),i)};k.flatten=function(t,e){return $(t,e,[])},k.without=function(t){return k.difference(t,o.call(arguments,1))},k.partition=function(t,e){var i=[],n=[];return D(t,function(t){(e(t)?i:n).push(t)}),[i,n]},k.uniq=k.unique=function(t,e,i,n){k.isFunction(e)&&(n=i,i=e,e=!1);var s=i?k.map(t,i,n):t,r=[],a=[];return D(s,function(i,n){(e?n&&a[a.length-1]===i:k.contains(a,i))||(a.push(i),r.push(t[n]))}),r},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=o.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(n,o.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=k.pluck(arguments,""+i);return e},k.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},k.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,s+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;s>n;n++)if(t[n]===e)return n;return-1},k.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(_&&t.lastIndexOf===_)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var s=n?i:t.length;s--;)if(t[s]===e)return s;return-1},k.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=0,r=new Array(n);n>s;)r[s++]=t,t+=i;return r};var O=function(){};k.bind=function(t,e){var i,n;if(x&&t.bind===x)return x.apply(t,o.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return i=o.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(o.call(arguments)));O.prototype=t.prototype;var s=new O;O.prototype=null;var r=t.apply(s,i.concat(o.call(arguments)));return Object(r)===r?r:s}},k.partial=function(t){var e=o.call(arguments,1);return function(){for(var i=0,n=e.slice(),s=0,r=n.length;r>s;s++)n[s]===k&&(n[s]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},k.bindAll=function(t){var e=o.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return D(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var i={};return e||(e=k.identity),function(){var n=e.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},k.delay=function(t,e){var i=o.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(o.call(arguments,1)))},k.throttle=function(t,e,i){var n,s,r,a=null,o=0;i||(i={});var l=function(){o=i.leading===!1?0:k.now(),a=null,r=t.apply(n,s),n=s=null};return function(){var u=k.now();o||i.leading!==!1||(o=u);var c=e-(u-o);return n=this,s=arguments,0>=c?(clearTimeout(a),a=null,o=u,r=t.apply(n,s),n=s=null):a||i.trailing===!1||(a=setTimeout(l,c)),r}},k.debounce=function(t,e,i){var n,s,r,a,o,l=function(){var u=k.now()-a;e>u?n=setTimeout(l,e-u):(n=null,i||(o=t.apply(r,s),r=s=null))};return function(){r=this,s=arguments,a=k.now();var u=i&&!n;return n||(n=setTimeout(l,e)),u&&(o=t.apply(r,s),r=s=null),o}},k.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(b)return b(t);var e=[];for(var i in t)k.has(t,i)&&e.push(i);return e},k.values=function(t){for(var e=k.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},k.pairs=function(t){for(var e=k.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];return n},k.invert=function(t){for(var e={},i=k.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},k.functions=k.methods=function(t){var e=[];for(var i in t)k.isFunction(t[i])&&e.push(i);return e.sort()},k.extend=function(t){return D(o.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},k.pick=function(t){var e={},i=l.apply(n,o.call(arguments,1));return D(i,function(i){i in t&&(e[i]=t[i])}),e},k.omit=function(t){var e={},i=l.apply(n,o.call(arguments,1));for(var s in t)k.contains(i,s)||(e[s]=t[s]);return e},k.defaults=function(t){return D(o.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var A=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var s=u.call(t);if(s!=u.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=i.length;r--;)if(i[r]==t)return n[r]==e;var a=t.constructor,o=e.constructor;if(a!==o&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1;i.push(t),n.push(e);var l=0,c=!0;if("[object Array]"==s){if(l=t.length,c=l==e.length)for(;l--&&(c=A(t[l],e[l],i,n)););}else{for(var d in t)if(k.has(t,d)&&(l++,!(c=k.has(e,d)&&A(t[d],e[d],i,n))))break;if(c){for(d in e)if(k.has(e,d)&&!l--)break;c=!l}}return i.pop(),n.pop(),c};k.isEqual=function(t,e){return A(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},D(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var i in t)if(t[i]!==e[i])return!1;return!0}},k.times=function(t,e,i){for(var n=Array(Math.max(0,t)),s=0;t>s;s++)n[s]=e.call(i,s);return n},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=k.invert(N.escape);var I={escape:new RegExp("["+k.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(N.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return N[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var i=t[e];return k.isFunction(i)?i.call(t):i},k.mixin=function(t){D(k.functions(t),function(e){var i=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),P.call(this,i.apply(k,t))}})};var E=0;k.uniqueId=function(t){var e=++E+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,i){var n;i=k.defaults({},i,k.templateSettings);var s=new RegExp([(i.escape||Y).source,(i.interpolate||Y).source,(i.evaluate||Y).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(s,function(e,i,n,s,o){return a+=t.slice(r,o).replace(L,function(t){return"\\"+j[t]}),i&&(a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),r=o+e.length,e}),a+="';\n",i.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(i.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(e)return n(e,k);var l=function(t){return n.call(this,t,k)};return l.source="function("+(i.variable||"obj")+"){\n"+a+"}",l},k.chain=function(t){return k(t).chain()};var P=function(t){return this._chain?k(t).chain():t};k.mixin(k),D(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];k.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],P.call(this,i)}}),D(["concat","join","slice"],function(t){var e=n[t];k.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var s=t.Backbone,r=[],a=(r.push,r.slice);r.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,l,c,d,h;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),l=0,c=o.length;c>l;l++)if(t=o[l],a=this._events[t]){if(this._events[t]=s=[],e||n)for(d=0,h=a.length;h>d;d++)r=a[d],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},l=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var r=i.split(l),a=0,o=r.length;o>a;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(t,e){o[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return r[a]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var h=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(h.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,l,u,c,d;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,l=n.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(d[s],e)||o.push(s),i.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete d[s]:d[s]=e;if(!l){o.length&&(this._pending=n);for(var h=0,p=o.length;p>h;h++)this.trigger("change:"+o[h],this,d[o[h]],n)}if(u)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},L(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(t){l.attributes=o;var e=l.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!l.set(e,n)?!1:(u&&u(l,t,n),void l.trigger("sync",l,t,n))},L(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;L(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){h.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,o,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;r>s;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,l,u,c,d=e.at,p=this.model,f=this.comparator&&null==d&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],y=[],_={},w=e.add,b=e.merge,x=e.remove,k=!f&&w&&x?[]:!1;for(s=0,r=t.length;r>s;s++){if(l=t[s]||{},a=l instanceof h?o=l:l[p.prototype.idAttribute||"id"],u=this.get(a))x&&(_[u.cid]=!0),b&&(l=l===o?o.attributes:l,e.parse&&(l=u.parse(l,e)),u.set(l,e),f&&!c&&u.hasChanged(g)&&(c=!0)),t[s]=u;else if(w){if(o=t[s]=this._prepareModel(l,e),!o)continue;v.push(o),this._addReference(o,e)}o=u||o,!k||!o.isNew()&&_[o.id]||k.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;r>s;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(v.length||k&&k.length)if(f&&(c=!0),this.length+=v.length,null!=d)for(s=0,r=v.length;r>s;s++)this.models.splice(d+s,0,v[s]);else{k&&(this.models.length=0);var D=k||v;for(s=0,r=D.length;r>s;s++)this.models.push(D[s])}if(c&&this.sort({silent:!0}),!e.silent){for(s=0,r=v.length;r>s;s++)(o=v[s]).trigger("add",o,this,e);(c||k&&k.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},L(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(w),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=k[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,l,s),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var D=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,M=/(\(\?)?:\w+/g,T=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(D.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(S,"(?:$1)?").replace(M,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null
})}});var $=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,N=/msie [\w.]+/,I=/\/$/,E=/#.*$/;$.started=!1,i.extend($.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(I,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(O,"")},start:function(t){if($.started)throw new Error("Backbone.history has already been started");$.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=N.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(A,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(O,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),$.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!$.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(E,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new $;var Y=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};h.extend=f.extend=D.extend=_.extend=$.extend=Y;var j=function(){throw new Error('A "url" property or function must be specified')},L=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(t,e){return function(i){return c(t.call(this,i),e)}}function n(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function s(){}function r(t){x(t),o(this,t)}function a(t){var e=g(t),i=e.year||0,n=e.month||0,s=e.week||0,r=e.day||0,a=e.hour||0,o=e.minute||0,l=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*l+6e4*o+36e5*a,this._days=+r+7*s,this._months=+n+12*i,this._data={},this._bubble()}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function l(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&ge.hasOwnProperty(e)&&(i[e]=t[e]);return i}function u(t){return 0>t?Math.ceil(t):Math.floor(t)}function c(t,e,i){for(var n=""+Math.abs(t),s=t>=0;n.length<e;)n="0"+n;return(s?i?"+":"":"-")+n}function d(t,e,i,n){var s,r,a=e._milliseconds,o=e._days,l=e._months;a&&t._d.setTime(+t._d+a*i),(o||l)&&(s=t.minute(),r=t.hour()),o&&t.date(t.date()+o*i),l&&t.month(t.month()+l*i),a&&!n&&ne.updateOffset(t),(o||l)&&(t.minute(s),t.hour(r))}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function f(t,e,i){var n,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&y(t[n])!==y(e[n]))&&a++;return a+r}function m(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Ge[t]||Ve[e]||e}return t}function g(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=m(i),e&&(n[e]=t[i]));return n}function v(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}ne[e]=function(s,r){var a,o,l=ne.fn._lang[e],u=[];if("number"==typeof s&&(r=s,s=t),o=function(t){var e=ne().utc().set(n,t);return l.call(ne.fn._lang,e,s||"")},null!=r)return o(r);for(a=0;i>a;a++)u.push(o(a));return u}}function y(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function _(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function w(t){return b(t)?366:365}function b(t){return t%4===0&&t%100!==0||t%400===0}function x(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[ue]<0||t._a[ue]>11?ue:t._a[ce]<1||t._a[ce]>_(t._a[le],t._a[ue])?ce:t._a[de]<0||t._a[de]>23?de:t._a[he]<0||t._a[he]>59?he:t._a[pe]<0||t._a[pe]>59?pe:t._a[fe]<0||t._a[fe]>999?fe:-1,t._pf._overflowDayOfYear&&(le>e||e>ce)&&(e=ce),t._pf.overflow=e)}function k(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function D(t){return t?t.toLowerCase().replace("_","-"):t}function S(t,e){return e._isUTC?ne(t).zone(e._offset||0):ne(t).local()}function M(t,e){return e.abbr=t,me[t]||(me[t]=new s),me[t].set(e),me[t]}function T(t){delete me[t]}function C(t){var e,i,n,s,r=0,a=function(t){if(!me[t]&&ve)try{require("./lang/"+t)}catch(e){}return me[t]};if(!t)return ne.fn._lang;if(!h(t)){if(i=a(t))return i;t=[t]}for(;r<t.length;){for(s=D(t[r]).split("-"),e=s.length,n=D(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=a(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&f(s,n,!0)>=e-1)break;e--}r++}return ne.fn._lang}function $(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function O(t){var e,i,n=t.match(be);for(e=0,i=n.length;i>e;e++)n[e]=Qe[n[e]]?Qe[n[e]]:$(n[e]);return function(s){var r="";for(e=0;i>e;e++)r+=n[e]instanceof Function?n[e].call(s,t):n[e];return r}}function A(t,e){return t.isValid()?(e=N(e,t.lang()),qe[e]||(qe[e]=O(e)),qe[e](t)):t.lang().invalidDate()}function N(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(xe.lastIndex=0;n>=0&&xe.test(t);)t=t.replace(xe,i),xe.lastIndex=0,n-=1;return t}function I(t,e){var i,n=e._strict;switch(t){case"DDDD":return Ee;case"YYYY":case"GGGG":case"gggg":return n?Ye:Se;case"Y":case"G":case"g":return Le;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?je:Me;case"S":if(n)return Ne;case"SS":if(n)return Ie;case"SSS":if(n)return Ee;case"DDD":return De;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ce;case"a":case"A":return C(e._l)._meridiemParse;case"X":return Ae;case"Z":case"ZZ":return $e;case"T":return Oe;case"SSSS":return Te;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ie:ke;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return ke;default:return i=new RegExp(H(R(t.replace("\\","")),"i"))}}function E(t){t=t||"";var e=t.match($e)||[],i=e[e.length-1]||[],n=(i+"").match(Ue)||["-",0,0],s=+(60*n[1])+y(n[2]);return"+"===n[0]?-s:s}function Y(t,e,i){var n,s=i._a;switch(t){case"M":case"MM":null!=e&&(s[ue]=y(e)-1);break;case"MMM":case"MMMM":n=C(i._l).monthsParse(e),null!=n?s[ue]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[ce]=y(e));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=y(e));break;case"YY":s[le]=y(e)+(y(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":s[le]=y(e);break;case"a":case"A":i._isPm=C(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[de]=y(e);break;case"m":case"mm":s[he]=y(e);break;case"s":case"ss":s[pe]=y(e);break;case"S":case"SS":case"SSS":case"SSSS":s[fe]=y(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=E(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=e)}}function j(t){var e,i,n,s,r,a,o,l,u,c,d=[];if(!t._d){for(n=P(t),t._w&&null==t._a[ce]&&null==t._a[ue]&&(r=function(e){var i=parseInt(e,10);return e?e.length<3?i>68?1900+i:2e3+i:i:null==t._a[le]?ne().weekYear():t._a[le]},a=t._w,null!=a.GG||null!=a.W||null!=a.E?o=Z(r(a.GG),a.W||1,a.E,4,1):(l=C(t._l),u=null!=a.d?q(a.d,l):null!=a.e?parseInt(a.e,10)+l._week.dow:0,c=parseInt(a.w,10)||1,null!=a.d&&u<l._week.dow&&c++,o=Z(r(a.gg),c,u,l._week.doy,l._week.dow)),t._a[le]=o.year,t._dayOfYear=o.dayOfYear),t._dayOfYear&&(s=null==t._a[le]?n[le]:t._a[le],t._dayOfYear>w(s)&&(t._pf._overflowDayOfYear=!0),i=V(s,0,t._dayOfYear),t._a[ue]=i.getUTCMonth(),t._a[ce]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=d[e]=n[e];for(;7>e;e++)t._a[e]=d[e]=null==t._a[e]?2===e?1:0:t._a[e];d[de]+=y((t._tzm||0)/60),d[he]+=y((t._tzm||0)%60),t._d=(t._useUTC?V:G).apply(null,d)}}function L(t){var e;t._d||(e=g(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],j(t))}function P(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function W(t){t._a=[],t._pf.empty=!0;var e,i,n,s,r,a=C(t._l),o=""+t._i,l=o.length,u=0;for(n=N(t._f,a).match(be)||[],e=0;e<n.length;e++)s=n[e],i=(o.match(I(s,t))||[])[0],i&&(r=o.substr(0,o.indexOf(i)),r.length>0&&t._pf.unusedInput.push(r),o=o.slice(o.indexOf(i)+i.length),u+=i.length),Qe[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),Y(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-u,o.length>0&&t._pf.unusedInput.push(o),t._isPm&&t._a[de]<12&&(t._a[de]+=12),t._isPm===!1&&12===t._a[de]&&(t._a[de]=0),j(t),x(t)}function R(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})}function H(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(t){var i,n,s,r,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(r=0;r<t._f.length;r++)a=0,i=o({},t),i._pf=e(),i._f=t._f[r],W(i),k(i)&&(a+=i._pf.charsLeftOver,a+=10*i._pf.unusedTokens.length,i._pf.score=a,(null==s||s>a)&&(s=a,n=i));o(t,n||i)}function F(t){var e,i,n=t._i,s=Pe.exec(n);if(s){for(t._pf.iso=!0,e=0,i=Re.length;i>e;e++)if(Re[e][1].exec(n)){t._f=Re[e][0]+(s[6]||" ");break}for(e=0,i=He.length;i>e;e++)if(He[e][1].exec(n)){t._f+=He[e][0];break}n.match($e)&&(t._f+="Z"),W(t)}else t._d=new Date(n)}function z(e){var i=e._i,n=ye.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?F(e):h(i)?(e._a=i.slice(0),j(e)):p(i)?e._d=new Date(+i):"object"==typeof i?L(e):e._d=new Date(i)}function G(t,e,i,n,s,r,a){var o=new Date(t,e,i,n,s,r,a);return 1970>t&&o.setFullYear(t),o}function V(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function q(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function B(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function X(t,e,i){var n=oe(Math.abs(t)/1e3),s=oe(n/60),r=oe(s/60),a=oe(r/24),o=oe(a/365),l=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===r&&["h"]||22>r&&["hh",r]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",oe(a/30)]||1===o&&["y"]||["yy",o];return l[2]=e,l[3]=t>0,l[4]=i,B.apply({},l)}function Q(t,e,i){var n,s=i-e,r=i-t.day();return r>s&&(r-=7),s-7>r&&(r+=7),n=ne(t).add("d",r),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function Z(t,e,i,n,s){var r,a,o=V(t,0,1).getUTCDay();return i=null!=i?i:s,r=s-o+(o>n?7:0)-(s>o?7:0),a=7*(e-1)+(i-s)+r+1,{year:a>0?t:t-1,dayOfYear:a>0?a:w(t-1)+a}}function J(t){var e=t._i,i=t._f;return null===e?ne.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=C().preparse(e)),ne.isMoment(e)?(t=l(e),t._d=new Date(+e._d)):i?h(i)?U(t):W(t):z(t),new r(t))}function K(t,e){ne.fn[t]=ne.fn[t+"s"]=function(t){var i=this._isUTC?"UTC":"";return null!=t?(this._d["set"+i+e](t),ne.updateOffset(this),this):this._d["get"+i+e]()}}function te(t){ne.duration.fn[t]=function(){return this._data[t]}}function ee(t,e){ne.duration.fn["as"+t]=function(){return+this/e}}function ie(t){var e=!1,i=ne;"undefined"==typeof ender&&(t?(ae.moment=function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)},o(ae.moment,i)):ae.moment=ne)}for(var ne,se,re="2.5.1",ae=this,oe=Math.round,le=0,ue=1,ce=2,de=3,he=4,pe=5,fe=6,me={},ge={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ve="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,ye=/^\/?Date\((\-?\d+)/i,_e=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,we=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,be=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,xe=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ke=/\d\d?/,De=/\d{1,3}/,Se=/\d{1,4}/,Me=/[+\-]?\d{1,6}/,Te=/\d+/,Ce=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$e=/Z|[\+\-]\d\d:?\d\d/gi,Oe=/T/i,Ae=/[\+\-]?\d+(\.\d{1,3})?/,Ne=/\d/,Ie=/\d\d/,Ee=/\d{3}/,Ye=/\d{4}/,je=/[+-]?\d{6}/,Le=/[+-]?\d+/,Pe=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,We="YYYY-MM-DDTHH:mm:ssZ",Re=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],He=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ue=/([\+\-]|\d\d)/gi,Fe="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ze={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ge={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ve={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},qe={},Be="DDD w W M D d".split(" "),Xe="M D H h m s w W".split(" "),Qe={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+c(Math.abs(t),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return y(this.milliseconds()/100)},SS:function(){return c(y(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(y(t/60),2)+":"+c(y(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(y(t/60),2)+c(y(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Ze=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Be.length;)se=Be.pop(),Qe[se+"o"]=n(Qe[se],se);for(;Xe.length;)se=Xe.pop(),Qe[se+se]=i(Qe[se],2);for(Qe.DDDD=i(Qe.DDD,3),o(s.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=ne.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=ne([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Q(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ne=function(i,n,s,r){var a;return"boolean"==typeof s&&(r=s,s=t),a={},a._isAMomentObject=!0,a._i=i,a._f=n,a._l=s,a._strict=r,a._isUTC=!1,a._pf=e(),J(a)},ne.utc=function(i,n,s,r){var a;return"boolean"==typeof s&&(r=s,s=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=s,a._i=i,a._f=n,a._strict=r,a._pf=e(),J(a).utc()},ne.unix=function(t){return ne(1e3*t)},ne.duration=function(t,e){var i,n,s,r=t,o=null;return ne.isDuration(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(o=_e.exec(t))?(i="-"===o[1]?-1:1,r={y:0,d:y(o[ce])*i,h:y(o[de])*i,m:y(o[he])*i,s:y(o[pe])*i,ms:y(o[fe])*i}):(o=we.exec(t))&&(i="-"===o[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},r={y:s(o[2]),M:s(o[3]),d:s(o[4]),h:s(o[5]),m:s(o[6]),s:s(o[7]),w:s(o[8])}),n=new a(r),ne.isDuration(t)&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},ne.version=re,ne.defaultFormat=We,ne.updateOffset=function(){},ne.lang=function(t,e){var i;return t?(e?M(D(t),e):null===e?(T(t),t="en"):me[t]||C(t),i=ne.duration.fn._lang=ne.fn._lang=C(t),i._abbr):ne.fn._lang._abbr},ne.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),C(t)},ne.isMoment=function(t){return t instanceof r||null!=t&&t.hasOwnProperty("_isAMomentObject")},ne.isDuration=function(t){return t instanceof a},se=Ze.length-1;se>=0;--se)v(Ze[se]);for(ne.normalizeUnits=function(t){return m(t)},ne.invalid=function(t){var e=ne.utc(0/0);return null!=t?o(e._pf,t):e._pf.userInvalidated=!0,e},ne.parseZone=function(t){return ne(t).parseZone()},o(ne.fn=r.prototype,{clone:function(){return ne(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=ne(this).utc();return 0<t.year()&&t.year()<=9999?A(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return k(this)},isDSTShifted:function(){return this._a?this.isValid()&&f(this._a,(this._isUTC?ne.utc(this._a):ne(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=A(this,t||ne.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?ne.duration(+e,t):ne.duration(t,e),d(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?ne.duration(+e,t):ne.duration(t,e),d(this,i,-1),this},diff:function(t,e,i){var n,s,r=S(t,this),a=6e4*(this.zone()-r.zone());return e=m(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+r.daysInMonth()),s=12*(this.year()-r.year())+(this.month()-r.month()),s+=(this-ne(this).startOf("month")-(r-ne(r).startOf("month")))/n,s-=6e4*(this.zone()-ne(this).startOf("month").zone()-(r.zone()-ne(r).startOf("month").zone()))/n,"year"===e&&(s/=12)):(n=this-r,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-a)/864e5:"week"===e?(n-a)/6048e5:n),i?s:u(s)},from:function(t,e){return ne.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ne(),t)},calendar:function(){var t=S(ne(),this).startOf("day"),e=this.diff(t,"days",!0),i=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=q(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,i=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+i+"Month"](t),this.date(Math.min(e,this.daysInMonth())),ne.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(t){switch(t=m(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=m(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ne(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ne(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+S(t,this).startOf(e)},min:function(t){return t=ne.apply(null,arguments),this>t?this:t},max:function(t){return t=ne.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=E(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&d(this,ne.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ne(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return _(this.year(),this.month())},dayOfYear:function(t){var e=oe((ne(this).startOf("day")-ne(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(t){var e=Q(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=Q(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=Q(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=m(t),this[t]()},set:function(t,e){return t=m(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=C(e),this)}}),se=0;se<Fe.length;se++)K(Fe[se].toLowerCase().replace(/s$/,""),Fe[se]);K("year","FullYear"),ne.fn.days=ne.fn.day,ne.fn.months=ne.fn.month,ne.fn.weeks=ne.fn.week,ne.fn.isoWeeks=ne.fn.isoWeek,ne.fn.toJSON=ne.fn.toISOString,o(ne.duration.fn=a.prototype,{_bubble:function(){var t,e,i,n,s=this._milliseconds,r=this._days,a=this._months,o=this._data;o.milliseconds=s%1e3,t=u(s/1e3),o.seconds=t%60,e=u(t/60),o.minutes=e%60,i=u(e/60),o.hours=i%24,r+=u(i/24),o.days=r%30,a+=u(r/30),o.months=a%12,n=u(a/12),o.years=n},weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},humanize:function(t){var e=+this,i=X(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=ne.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=ne.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=m(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=m(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ne.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||s||r?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"}});for(se in ze)ze.hasOwnProperty(se)&&(ee(se,ze[se]),te(se.toLowerCase()));ee("Weeks",6048e5),ne.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ne.lang("en",{ordinal:function(t){var e=t%10,i=1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),ve?(module.exports=ne,ie(!0)):"function"==typeof define&&define.amd?define("moment",function(e,i,n){return n.config&&n.config()&&n.config().noGlobal!==!0&&ie(n.config().noGlobal===t),ne}):ie()}.call(this),function(t){if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){if("undefined"==typeof e)throw alert("momentjs is requried"),new Error("momentjs is required");var n=0,s=e,r=function(e,r){var a={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:new s({y:1900}),maxDate:(new s).add(100,"y"),showToday:!0,collapse:!0,language:"en",defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:!1},o={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},l=this,u=function(){var i,u=!1;if(l.options=t.extend({},a,r),l.options.icons=t.extend({},o,l.options.icons),l.element=t(e),d(),!l.options.pickTime&&!l.options.pickDate)throw new Error("Must choose at least one picker");if(l.id=n++,s.lang(l.options.language),l.date=s(),l.unset=!1,l.isInput=l.element.is("input"),l.component=!1,l.element.hasClass("input-group")&&(l.component=l.element.find(0==l.element.find(".datepickerbutton").size()?"[class^='input-group-']":".datepickerbutton")),l.format=l.options.format,i=s()._lang._longDateFormat,l.format||(l.format=l.options.pickDate?i.L:"",l.options.pickDate&&l.options.pickTime&&(l.format+=" "),l.format+=l.options.pickTime?i.LT:"",l.options.useSeconds&&(~i.LT.indexOf(" A")?l.format=l.format.split(" A")[0]+":ss A":l.format+=":ss")),l.use24hours=l.format.toLowerCase().indexOf("a")<1,l.component&&(u=l.component.find("span")),l.options.pickTime&&u&&u.addClass(l.options.icons.time),l.options.pickDate&&u&&(u.removeClass(l.options.icons.time),u.addClass(l.options.icons.date)),l.widget=t(R()).appendTo("body"),l.options.useSeconds&&!l.use24hours&&l.widget.width(300),l.minViewMode=l.options.minViewMode||0,"string"==typeof l.minViewMode)switch(l.minViewMode){case"months":l.minViewMode=1;break;case"years":l.minViewMode=2;break;default:l.minViewMode=0}if(l.viewMode=l.options.viewMode||0,"string"==typeof l.viewMode)switch(l.viewMode){case"months":l.viewMode=1;break;case"years":l.viewMode=2;break;default:l.viewMode=0}if(l.options.disabledDates=P(l.options.disabledDates),l.options.enabledDates=P(l.options.enabledDates),l.startViewMode=l.viewMode,l.setMinDate(l.options.minDate),l.setMaxDate(l.options.maxDate),g(),v(),_(),w(),b(),m(),C(),$(),""!==l.options.defaultDate&&""==c().val()&&l.setValue(l.options.defaultDate),1!==l.options.minuteStepping){var h=l.date.minutes(),p=l.options.minuteStepping;l.date.minutes(Math.round(h/p)*p%60).seconds(0)}},c=function(){return l.isInput?l.element:dateStr=l.element.find("input")},d=function(){var t;t=(l.element.is("input"),l.element.data()),void 0!==t.dateFormat&&(l.options.format=t.dateFormat),void 0!==t.datePickdate&&(l.options.pickDate=t.datePickdate),void 0!==t.datePicktime&&(l.options.pickTime=t.datePicktime),void 0!==t.dateUseminutes&&(l.options.useMinutes=t.dateUseminutes),void 0!==t.dateUseseconds&&(l.options.useSeconds=t.dateUseseconds),void 0!==t.dateUsecurrent&&(l.options.useCurrent=t.dateUsecurrent),void 0!==t.dateMinutestepping&&(l.options.minuteStepping=t.dateMinutestepping),void 0!==t.dateMindate&&(l.options.minDate=t.dateMindate),void 0!==t.dateMaxdate&&(l.options.maxDate=t.dateMaxdate),void 0!==t.dateShowtoday&&(l.options.showToday=t.dateShowtoday),void 0!==t.dateCollapse&&(l.options.collapse=t.dateCollapse),void 0!==t.dateLanguage&&(l.options.language=t.dateLanguage),void 0!==t.dateDefaultdate&&(l.options.defaultDate=t.dateDefaultdate),void 0!==t.dateDisableddates&&(l.options.disabledDates=t.dateDisableddates),void 0!==t.dateEnableddates&&(l.options.enabledDates=t.dateEnableddates),void 0!==t.dateIcons&&(l.options.icons=t.dateIcons),void 0!==t.dateUsestrict&&(l.options.useStrict=t.dateUsestrict),void 0!==t.dateDirection&&(l.options.direction=t.dateDirection),void 0!==t.dateSidebyside&&(l.options.sideBySide=t.dateSidebyside)
},h=function(){var e="absolute",i=l.component?l.component.offset():l.element.offset(),n=t(window);l.width=l.component?l.component.outerWidth():l.element.outerWidth(),i.top=i.top+l.element.outerHeight();var s;"up"===l.options.direction?s="top":"bottom"===l.options.direction?s="bottom":"auto"===l.options.direction&&(s=i.top+l.widget.height()>n.height()+n.scrollTop()&&l.widget.height()+l.element.outerHeight()<i.top?"top":"bottom"),"top"===s?(i.top-=l.widget.height()+l.element.outerHeight()+15,l.widget.addClass("top").removeClass("bottom")):(i.top+=1,l.widget.addClass("bottom").removeClass("top")),void 0!==l.options.width&&l.widget.width(l.options.width),"left"===l.options.orientation&&(l.widget.addClass("left-oriented"),i.left=i.left-l.widget.width()+20),I()&&(e="fixed",i.top-=n.scrollTop(),i.left-=n.scrollLeft()),n.width()<i.left+l.widget.outerWidth()?(i.right=n.width()-i.left-l.width,i.left="auto",l.widget.addClass("pull-right")):(i.right="auto",l.widget.removeClass("pull-right")),l.widget.css({position:e,top:i.top,left:i.left,right:i.right})},p=function(t,e){s(l.date).isSame(s(t))||(l.element.trigger({type:"dp.change",date:s(l.date),oldDate:s(t)}),"change"!==e&&l.element.change())},f=function(t){l.element.trigger({type:"dp.error",date:s(t)})},m=function(t){s.lang(l.options.language);var e=t;e||(e=c().val(),e&&(l.date=s(e,l.format,l.options.useStrict)),l.date||(l.date=s())),l.viewDate=s(l.date).startOf("month"),y(),x()},g=function(){s.lang(l.options.language);var e,i=t("<tr>"),n=s.weekdaysMin();if(0==s()._lang._week.dow)for(e=0;7>e;e++)i.append('<th class="dow">'+n[e]+"</th>");else for(e=1;8>e;e++)i.append(7==e?'<th class="dow">'+n[0]+"</th>":'<th class="dow">'+n[e]+"</th>");l.widget.find(".datepicker-days thead").append(i)},v=function(){s.lang(l.options.language);for(var t="",e=0,i=s.monthsShort();12>e;)t+='<span class="month">'+i[e++]+"</span>";l.widget.find(".datepicker-months td").append(t)},y=function(){s.lang(l.options.language);var e,i,n,r,a,o,u,c,d=l.viewDate.year(),h=l.viewDate.month(),p=l.options.minDate.year(),f=l.options.minDate.month(),m=l.options.maxDate.year(),g=l.options.maxDate.month(),v=[],y=s.months();for(l.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-days th:eq(1)").text(y[h]+" "+d),e=s(l.viewDate).subtract("months",1),o=e.daysInMonth(),e.date(o).startOf("week"),(d==p&&f>=h||p>d)&&l.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(d==m&&h>=g||d>m)&&l.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),i=s(e).add(42,"d");e.isBefore(i);){if(e.weekday()===s().startOf("week").weekday()&&(n=t("<tr>"),v.push(n)),r="",e.year()<d||e.year()==d&&e.month()<h?r+=" old":(e.year()>d||e.year()==d&&e.month()>h)&&(r+=" new"),e.isSame(s({y:l.date.year(),M:l.date.month(),d:l.date.date()}))&&(r+=" active"),(j(e)||!L(e))&&(r+=" disabled"),l.options.showToday===!0&&e.isSame(s(),"day")&&(r+=" today"),l.options.daysOfWeekDisabled)for(a in l.options.daysOfWeekDisabled)if(e.day()==l.options.daysOfWeekDisabled[a]){r+=" disabled";break}n.append('<td class="day'+r+'">'+e.date()+"</td>"),e.add(1,"d")}for(l.widget.find(".datepicker-days tbody").empty().append(v),c=l.date.year(),y=l.widget.find(".datepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active"),c===d&&y.eq(l.date.month()).addClass("active"),p>c-1&&l.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),c+1>m&&l.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),a=0;12>a;a++)d==p&&f>a||p>d?t(y[a]).addClass("disabled"):(d==m&&a>g||d>m)&&t(y[a]).addClass("disabled");for(v="",d=10*parseInt(d/10,10),u=l.widget.find(".datepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td"),l.widget.find(".datepicker-years").find("th").removeClass("disabled"),p>d&&l.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),d+9>m&&l.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),d-=1,a=-1;11>a;a++)v+='<span class="year'+(-1===a||10===a?" old":"")+(c===d?" active":"")+(p>d||d>m?" disabled":"")+'">'+d+"</span>",d+=1;u.html(v)},_=function(){s.lang(l.options.language);var t,e,i,n=l.widget.find(".timepicker .timepicker-hours table"),r="";if(n.parent().hide(),l.use24hours)for(t=0,e=0;6>e;e+=1){for(r+="<tr>",i=0;4>i;i+=1)r+='<td class="hour">'+W(t.toString())+"</td>",t++;r+="</tr>"}else for(t=1,e=0;3>e;e+=1){for(r+="<tr>",i=0;4>i;i+=1)r+='<td class="hour">'+W(t.toString())+"</td>",t++;r+="</tr>"}n.html(r)},w=function(){var t,e,i=l.widget.find(".timepicker .timepicker-minutes table"),n="",s=0,r=l.options.minuteStepping;for(i.parent().hide(),(r=1)&&(r=5),t=0;t<Math.ceil(60/r/4);t++){for(n+="<tr>",e=0;4>e;e+=1)60>s?(n+='<td class="minute">'+W(s.toString())+"</td>",s+=r):n+="<td></td>";n+="</tr>"}i.html(n)},b=function(){var t,e,i=l.widget.find(".timepicker .timepicker-seconds table"),n="",s=0;for(i.parent().hide(),t=0;3>t;t++){for(n+="<tr>",e=0;4>e;e+=1)n+='<td class="second">'+W(s.toString())+"</td>",s+=5;n+="</tr>"}i.html(n)},x=function(){if(l.date){var t=l.widget.find(".timepicker span[data-time-component]"),e=l.date.hours(),i="AM";l.use24hours||(e>=12&&(i="PM"),0===e?e=12:12!=e&&(e%=12),l.widget.find(".timepicker [data-action=togglePeriod]").text(i)),t.filter("[data-time-component=hours]").text(W(e)),t.filter("[data-time-component=minutes]").text(W(l.date.minutes())),t.filter("[data-time-component=seconds]").text(W(l.date.second()))}},k=function(e){e.stopPropagation(),e.preventDefault(),l.unset=!1;var i,n,r,a,o=t(e.target).closest("span, td, th"),u=s(l.date);if(1===o.length&&!o.is(".disabled"))switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"switch":C(1);break;case"prev":case"next":r=H.modes[l.viewMode].navStep,"prev"===o[0].className&&(r=-1*r),l.viewDate.add(r,H.modes[l.viewMode].navFnc),y()}break;case"span":o.is(".month")?(i=o.parent().find("span").index(o),l.viewDate.month(i)):(n=parseInt(o.text(),10)||0,l.viewDate.year(n)),l.viewMode===l.minViewMode&&(l.date=s({y:l.viewDate.year(),M:l.viewDate.month(),d:l.viewDate.date(),h:l.date.hours(),m:l.date.minutes(),s:l.date.seconds()}),p(u,e.type),E()),C(-1),y();break;case"td":o.is(".day")&&(a=parseInt(o.text(),10)||1,i=l.viewDate.month(),n=l.viewDate.year(),o.is(".old")?0===i?(i=11,n-=1):i-=1:o.is(".new")&&(11==i?(i=0,n+=1):i+=1),l.date=s({y:n,M:i,d:a,h:l.date.hours(),m:l.date.minutes(),s:l.date.seconds()}),l.viewDate=s({y:n,M:i,d:Math.min(28,a)}),y(),E(),p(u,e.type))}},D={incrementHours:function(){Y("add","hours",1)},incrementMinutes:function(){Y("add","minutes",l.options.minuteStepping)},incrementSeconds:function(){Y("add","seconds",1)},decrementHours:function(){Y("subtract","hours",1)},decrementMinutes:function(){Y("subtract","minutes",l.options.minuteStepping)},decrementSeconds:function(){Y("subtract","seconds",1)},togglePeriod:function(){var t=l.date.hours();t>=12?t-=12:t+=12,l.date.hours(t)},showPicker:function(){l.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),l.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var i=l.widget.find(".timepicker [data-action=togglePeriod]").text(),n=parseInt(t(e.target).text(),10);"PM"==i&&(n+=12),l.date.hours(n),D.showPicker.call(l)},selectMinute:function(e){l.date.minutes(parseInt(t(e.target).text(),10)),D.showPicker.call(l)},selectSecond:function(e){l.date.seconds(parseInt(t(e.target).text(),10)),D.showPicker.call(l)}},S=function(e){var i=s(l.date),n=t(e.currentTarget).data("action"),r=D[n].apply(l,arguments);return M(e),l.date||(l.date=s({y:1970})),E(),x(),p(i,e.type),r},M=function(t){t.stopPropagation(),t.preventDefault()},T=function(e){s.lang(l.options.language);var i=t(e.target),n=s(l.date),r=s(i.val(),l.format,l.options.useStrict);r.isValid()&&!j(r)&&L(r)?(m(),l.setValue(r),p(n,e.type),E()):(l.viewDate=n,p(n,e.type),f(r),l.unset=!0)},C=function(t){t&&(l.viewMode=Math.max(l.minViewMode,Math.min(2,l.viewMode+t)));H.modes[l.viewMode].clsName;l.widget.find(".datepicker > div").hide().filter(".datepicker-"+H.modes[l.viewMode].clsName).show()},$=function(){var e,i,n,s,r;l.widget.on("click",".datepicker *",t.proxy(k,this)),l.widget.on("click","[data-action]",t.proxy(S,this)),l.widget.on("mousedown",t.proxy(M,this)),l.options.pickDate&&l.options.pickTime&&l.widget.on("click.togglePicker",".accordion-toggle",function(a){if(a.stopPropagation(),e=t(this),i=e.closest("ul"),n=i.find(".in"),s=i.find(".collapse:not(.in)"),n&&n.length){if(r=n.data("collapse"),r&&r.date-transitioning)return;n.collapse("hide"),s.collapse("show"),e.find("span").toggleClass(l.options.icons.time+" "+l.options.icons.date),l.element.find(".input-group-addon span").toggleClass(l.options.icons.time+" "+l.options.icons.date)}}),l.isInput?l.element.on({focus:t.proxy(l.show,this),change:t.proxy(T,this),blur:t.proxy(l.hide,this)}):(l.element.on({change:t.proxy(T,this)},"input"),l.component?l.component.on("click",t.proxy(l.show,this)):l.element.on("click",t.proxy(l.show,this)))},O=function(){t(window).on("resize.datetimepicker"+l.id,t.proxy(h,this)),l.isInput||t(document).on("mousedown.datetimepicker"+l.id,t.proxy(l.hide,this))},A=function(){l.widget.off("click",".datepicker *",l.click),l.widget.off("click","[data-action]"),l.widget.off("mousedown",l.stopEvent),l.options.pickDate&&l.options.pickTime&&l.widget.off("click.togglePicker"),l.isInput?l.element.off({focus:l.show,change:l.change}):(l.element.off({change:l.change},"input"),l.component?l.component.off("click",l.show):l.element.off("click",l.show))},N=function(){t(window).off("resize.datetimepicker"+l.id),l.isInput||t(document).off("mousedown.datetimepicker"+l.id)},I=function(){if(l.element){var e,i=l.element.parents(),n=!1;for(e=0;e<i.length;e++)if("fixed"==t(i[e]).css("position")){n=!0;break}return n}return!1},E=function(){s.lang(l.options.language);var t="";l.unset||(t=s(l.date).format(l.format)),c().val(t),l.element.data("date",t),l.options.pickTime||l.hide()},Y=function(t,e,i){s.lang(l.options.language);var n;return"add"==t?(n=s(l.date),23==n.hours()&&n.add(i,e),n.add(i,e)):n=s(l.date).subtract(i,e),j(s(n.subtract(i,e)))||j(n)?void f(n.format(l.format)):("add"==t?l.date.add(i,e):l.date.subtract(i,e),void(l.unset=!1))},j=function(t){return s.lang(l.options.language),t.isAfter(l.options.maxDate)||t.isBefore(l.options.minDate)?!0:l.options.disabledDates===!1?!1:l.options.disabledDates[s(t).format("YYYY-MM-DD")]===!0},L=function(t){return s.lang(l.options.language),l.options.enabledDates===!1?!0:l.options.enabledDates[s(t).format("YYYY-MM-DD")]===!0},P=function(t){var e={},n=0;for(i=0;i<t.length;i++)dDate=s(t[i]),dDate.isValid()&&(e[dDate.format("YYYY-MM-DD")]=!0,n++);return n>0?e:!1},W=function(t){return t=t.toString(),t.length>=2?t:"0"+t},R=function(){if(l.options.pickDate&&l.options.pickTime){var t="";return t='<div class="bootstrap-datetimepicker-widget'+(l.options.sideBySide?" timepicker-sbs":"")+' dropdown-menu" style="z-index:9999 !important;">',t+=l.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+H.template+'</div><div class="col-sm-6 timepicker">'+U.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(l.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+H.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+l.options.icons.time+'"></span></a></li><li'+(l.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+U.getTemplate()+"</div></li></ul>",t+="</div>"}return l.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+U.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+H.template+"</div></div>"},H={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},U={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};H.template='<div class="datepicker-days"><table class="table-condensed">'+H.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+H.headTemplate+H.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+H.headTemplate+H.contTemplate+"</table></div>",U.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+l.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(l.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+l.options.icons.up+'"></span></a>':"")+"</td>"+(l.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+l.options.icons.up+'"></span></a></td>':"")+(l.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+U.hourTemplate+'</td> <td class="separator">:</td><td>'+(l.options.useMinutes?U.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(l.options.useSeconds?'<td class="separator">:</td><td>'+U.secondTemplate+"</td>":"")+(l.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+l.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(l.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+l.options.icons.down+'"></span></a>':"")+"</td>"+(l.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+l.options.icons.down+'"></span></a></td>':"")+(l.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(l.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},l.destroy=function(){A(),N(),l.widget.remove(),l.element.removeData("DateTimePicker"),l.component&&l.component.removeData("DateTimePicker")},l.show=function(t){l.options.useCurrent===!0&&""==c().val()&&l.setValue(s().format(l.format)),l.widget.show(),l.height=l.component?l.component.outerHeight():l.element.outerHeight(),h(),l.element.trigger({type:"dp.show",date:s(l.date)}),O(),t&&M(t)},l.disable=function(){var t=l.element.find("input");t.prop("disabled")||(t.prop("disabled",!0),A())},l.enable=function(){var t=l.element.find("input");t.prop("disabled")&&(t.prop("disabled",!1),$())},l.hide=function(e){if(!e||!t(e.target).is(l.element.attr("id"))){var i,n,r=l.widget.find(".collapse");for(i=0;i<r.length;i++)if(n=r.eq(i).data("collapse"),n&&n.date-transitioning)return;l.widget.hide(),l.viewMode=l.startViewMode,C(),l.element.trigger({type:"dp.hide",date:s(l.date)}),N()}},l.setValue=function(t){s.lang(l.options.language),t?l.unset=!1:(l.unset=!0,E()),s.isMoment(t)||(t=s(t)),t.isValid()?(l.date=t,E(),l.viewDate=s({y:l.date.year(),M:l.date.month()}),y(),x()):f(t)},l.getDate=function(){return l.unset?null:l.date},l.setDate=function(t){var e=s(l.date);l.setValue(t?t:null),p(e,"function")},l.setDisabledDates=function(t){l.options.disabledDates=P(t),l.viewDate&&m()},l.setEnabledDates=function(t){l.options.enabledDates=P(t),l.viewDate&&m()},l.setMaxDate=function(t){void 0!=t&&(l.options.maxDate=s(t),l.viewDate&&m())},l.setMinDate=function(t){void 0!=t&&(l.options.minDate=s(t),l.viewDate&&m())},u()};t.fn.datetimepicker=function(e){return this.each(function(){var i=t(this),n=i.data("DateTimePicker");n||i.data("DateTimePicker",new r(this,e))})}}),function(t,e){function i(e,i){var s,r,a,o=e.nodeName.toLowerCase();return"area"===o?(s=e.parentNode,r=s.name,e.href&&r&&"map"===s.nodeName.toLowerCase()?(a=t("img[usemap=#"+r+"]")[0],!!a&&n(a)):!1):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,s,r=t(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function s(e,i,n,s){return t.each(r,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?o["inner"+n].call(this):this.each(function(){t(this).css(a,s(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){t(this).css(a,s(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var s,r=t.ui[e].prototype;for(s in n)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([i,n[s]])},call:function(t,e,i){var n,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0?!0:(e[n]=1,s=e[n]>0,e[n]=0,s)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(r){}s(e)},t.widget=function(e,i,n){var s,r,a,o,l={},u=e.split(".")[0];e=e.split(".")[1],s=u+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[u]=t[u]||{},r=t[u][e],a=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),o=new i,o.options=t.widget.extend({},o.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}()):void(l[e]=n)}),a.prototype=t.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||e:e},l,{constructor:a,namespace:u,widgetName:e,widgetFullName:s}),r?(t.each(r._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete r._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(i){for(var s,r,a=n.call(arguments,1),o=0,l=a.length;l>o;o++)for(s in a[o])r=a[o][s],a[o].hasOwnProperty(s)&&r!==e&&(i[s]=t.isPlainObject(r)?t.isPlainObject(i[s])?t.widget.extend({},i[s],r):t.widget.extend({},r):r);return i},t.widget.bridge=function(i,s){var r=s.prototype.widgetFullName||i;t.fn[i]=function(a){var o="string"==typeof a,l=n.call(arguments,1),u=this;return a=!o&&l.length?t.widget.extend.apply(null,[a].concat(l)):a,this.each(o?function(){var n,s=t.data(this,r);return s?t.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,l),n!==s&&n!==e?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,r);e?e.option(a||{})._init():t.data(this,r,new s(a,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,r,a,o=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(o={},s=i.split("."),i=s.shift(),s.length){for(r=o[i]=t.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)r[s[a]]=r[s[a]]||{},r=r[s[a]];if(i=s.pop(),1===arguments.length)return r[i]===e?null:r[i];r[i]=n}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];o[i]=n}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,a){function o(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?s.delegate(c,u,o):i.bind(u,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,r,a=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,r){"string"==typeof s&&(s={effect:s});var a,o=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),a&&t.effects&&t.effects.effect[o]?n[e](s):o!==e&&n[o]?n[o](s.duration,s.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return s&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;i>e;e++)a.push(r);this.handles=s.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,r,a,o,l,u,c=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-c.values(e));(s>i||s===i&&(e===c._lastChangedValue||c.values(e)===d.min))&&(s=i,r=t(this),a=e)}),o=this._start(e,a),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,r.addClass("ui-state-active").focus(),l=r.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-r.width()/2,top:e.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,n),this._animateOff=!0,!0))
},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),r=this._valueMin()+n*s,this._trimAlignValue(r)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,s,r;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(s=this.values(),s[e]=i,r=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),n=this.values(e?0:1),r!==!1&&this.values(e,i))):i!==this.value()&&(r=this._trigger("slide",t,{handle:this.handles[e],value:i}),r!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,s,r,a=this.options.range,o=this.options,l=this,u=this._animateOff?!1:o.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[u?"animate":"css"](c,o.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},o.animate),1===n&&l.range[u?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:o.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},o.animate),1===n&&l.range[u?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:o.animate}))),e=i}):(n=this.value(),s=this._valueMin(),r=this._valueMax(),i=r!==s?(n-s)/(r-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](c,o.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},o.animate),"max"===a&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:o.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},o.animate),"max"===a&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(i){var n,s,r,a,o=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),n=this._start(i,o),n===!1))return}switch(a=this.options.step,s=r=this.options.values&&this.options.values.length?this.values(o):this.value(),i.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;r=this._trimAlignValue(s+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;r=this._trimAlignValue(s-a)}this._slide(i,o,r)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery);var status_array_en={ready:"Click on the microphone icon and begin speaking.",active:"Speak now.","no-speech":'No speech was detected. You may need to adjust your <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892"> microphone settings</a>.',"audio-capture":'No microphone was found. Ensure that a microphone is installed and that <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892"> microphone settings</a> are configured correctly.',allow:'Click the "Allow" button above to enable your microphone.',"not-allowed":"Permission to use microphone is denied. To change, go to chrome://settings/contentExceptions#media-stream",upgrade:'Web Speech API is not supported by this browser.  Upgrade to <a href="//www.google.com/chrome">Chrome</a>.'},image_array_mic={ready:"/assets/mic-64613180017f36853cfc3a53e0600a9d.gif",complete:"mic.gif",active:"/assets/mic_animate-517cf92a957a635c69d8a394008568b4.gif","no-speech":"/assets/mic-64613180017f36853cfc3a53e0600a9d.gif",disable:"/assets/mic_slash-a5c6c047e775e2f572a1445e4a988c6f.gif"},TreemapUtils=TreemapUtils||{};TreemapUtils.KeySpline=function(t){function e(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function n(t){return 3*t}function s(t,s,r){return((e(s,r)*t+i(s,r))*t+n(s))*t}function r(t,s,r){return 3*e(s,r)*t*t+2*i(s,r)*t+n(s)}function a(t){for(var e=t,i=0;4>i;++i){var n=r(e,o,u);if(0==n)return e;var a=s(e,o,u)-t;e-=a/n}return e}var o=t.mX1||0,l=t.mY1||0,u=t.mX2||1,c=t.mY2||1;this.get=function(t){return o==l&&u==c?t:s(a(t),l,c)}},TreemapUtils.Easing={ease:{mX1:.25,mY1:.1,mX2:.25,mY2:1},linear:{mX1:0,mY1:0,mX2:1,mY2:1},"ease-in":{mX1:.42,mY1:0,mX2:1,mY2:1},"ease-out":{mX1:0,mY1:0,mX2:.58,mY2:1},"ease-in-out":{mX1:.42,mY1:0,mX2:.58,mY2:1}},TreemapUtils.sumArray=function(){function t(t,e){return t+e}return function(e){return e.reduce(t)}}(),TreemapUtils.deepCopy=function(t){if("[object Array]"===Object.prototype.toString.call(t)){for(var e=[],i=0,n=t.length;n>i;i++)e[i]=arguments.callee(t[i]);return e}if("object"==typeof t){var i,e={};for(i in t)e[i]=arguments.callee(t[i]);return e}return t},TreemapUtils.changeColor=function(t,e,i){t=t.replace(/^\s*|\s*$/,""),t=t.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var n=Math.round(256*e)*(i?-1:1),s=t.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),r=s&&null!==s[4]?s[4]:null,a=s?[s[1],s[2],s[3]]:t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(t,e,i,n){return parseInt(e,16)+","+parseInt(i,16)+","+parseInt(n,16)}).split(/,/);return s?"rgb"+(null!==r?"a":"")+"("+Math[i?"max":"min"](parseInt(a[0],10)+n,i?0:255)+", "+Math[i?"max":"min"](parseInt(a[1],10)+n,i?0:255)+", "+Math[i?"max":"min"](parseInt(a[2],10)+n,i?0:255)+(null!==r?", "+r:"")+")":["#",Math[i?"max":"min"](parseInt(a[0],10)+n,i?0:255).toString(16).lpad("0",2),Math[i?"max":"min"](parseInt(a[1],10)+n,i?0:255).toString(16).lpad("0",2),Math[i?"max":"min"](parseInt(a[2],10)+n,i?0:255).toString(16).lpad("0",2)].join("")},TreemapUtils.lighterColor=function(t,e){return TreemapUtils.changeColor(t,e,!1)},TreemapUtils.darkerColor=function(t,e){return TreemapUtils.changeColor(t,e,!0)},TreemapUtils.rgb2hex=function(t){var e="#"+(t[2]|t[1]<<8|t[0]<<16).toString(16).lpad("0",6);return e},TreemapUtils.avgRgb=function(t){return Math.floor(TreemapUtils.sumArray(t)/3)},TreemapUtils.hex2rgb=function(t){return t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(t,e,i,n){return parseInt(e,16)+","+parseInt(i,16)+","+parseInt(n,16)}).split(/,/)},TreemapUtils.squarify=function(t,e){var i,n=function(t){this.setX=function(e){t[2]-=e-t[0],t[0]=e},this.setY=function(e){t[3]-=e-t[1],t[1]=e},this.getX=function(){return t[0]},this.getY=function(){return t[1]},this.getW=function(){return t[2]},this.getH=function(){return t[3]},this.getWidth=function(){return Math.min(t[2],t[3])}},s=function(t,e){var i=Math.max.apply(null,t),n=Math.min.apply(null,t),s=TreemapUtils.sumArray(t),r=s*s,a=e*e;return Math.max(a*i/r,r/(a*n))},r=function(t){var e,i,n,s=c.getX(),r=c.getY(),a=s+c.getW(),o=r+c.getH();if(c.getW()<c.getH()){for(e=Math.ceil(TreemapUtils.sumArray(t)/c.getW()),r+e>=o&&(e=o-r),i=0;i<t.length;i++)n=Math.ceil(t[i]/e),(s+n>a||i+1===t.length)&&(n=a-s),l.push([s,r,n,e]),s+=n;c.setY(r+e)}else{for(e=Math.ceil(TreemapUtils.sumArray(t)/c.getH()),s+e>=a&&(e=a-s),i=0;i<t.length;i++)n=Math.ceil(t[i]/e),(r+n>o||i+1===t.length)&&(n=o-r),l.push([s,r,e,n]),r+=n;c.setX(s+e)}},a=function(t){var e=[];if(e.push(t.shift()),0===t.length)return e;var i=e.slice(),n=c.getWidth();do{if(i.push(t[0]),!(s(e,n)>s(i,n)))break;e=i.slice(),t.shift()}while(t.length>0);return e},o=function(t){do r(a(t));while(t.length>0)},l=[],u=[];if(t[2]<=0||t[3]<=0)for(i=0;i<e.length;i++)l.push(t.slice());else{u=e.map(function(e){return e*t[2]*t[3]});var c=new n(t.slice());o(u)}return l},function(t){t.widget("ui.treemap",{options:{dimensions:[window.innerWidth-100,400],colorStops:[{val:0,color:"#08f"},{val:.5,color:"#03f"},{val:1,color:"#005"}],colorResolution:1024,naColor:"#000",innerNodeHeaderHeightPx:12,innerNodeHeaderLabeller:function(t,e,i,n){t.rect(e[0],e[1],e[2],e[3]),t.clip(),t.fillStyle="#555",t.font="0.625em Verdana, Geneva, sans-serif",t.fillText(n,e[0],e[1]+10)},innerNodeHeaderGradient:function(t,e){var i=t.createLinearGradient(e[0],e[1],e[0],e[1]+e[3]);return i.addColorStop(0,"#ccc"),i.addColorStop(.5,"#fff"),i.addColorStop(.9,"#fff"),i.addColorStop(1,"#555"),i},leafNodeBodyLabeller:function(t,e,i,n){t.rect(e[0],e[1],e[2],e[3]),t.clip(),t.fillStyle=TreemapUtils.avgRgb(i)<=200?"#fff":"#888",t.font="0.9em Lucida Grande, Geneva, sans-serif; margin-top: 20px",t.fillText(n,e[0],e[1]+10)},leafNodeBodyGradient:function(t,e,i){var n=.1*Math.min(e[2],e[3]),s=Math.max(e[2],e[3]),r=e[0]+.5*e[2],a=e[1]+.5*e[3],o=t.createRadialGradient(r,a,n,r,a,s);return o.addColorStop(0,TreemapUtils.lighterColor(TreemapUtils.rgb2hex(i),.2)),o.addColorStop(1,TreemapUtils.darkerColor(TreemapUtils.rgb2hex(i),.2)),o},layoutMethod:TreemapUtils.squarify,sizeOption:0,colorOption:0,nodeBorderWidth:.5,labelsEnabled:!0,animationEnabled:!0,animationDurationMs:1e3,animationEasing:{},postProcessCurve:{},nodeData:{}},_create:function(){this.stats={}},_init:function(){this.stats={},this._refreshCanvas(),this._refreshColorGradient(),this._refreshColor(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels()},_setOption:function(e){switch(t.Widget.prototype._setOption.apply(this,arguments),e){case"dimensions":this._refreshCanvas(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels();break;case"layoutMethod":this._refreshLayout(),this._renderNodes(),this._renderNodeLabels();break;case"labelsEnabled":this._renderNodes(),this._renderNodeLabels();break;case"leafNodeBodyGradient":this._renderNodes(),this._renderNodeLabels();break;case"colorStops":this._refreshColorGradient(),this._refreshColor(),this._renderNodes(),this._renderNodeLabels();break;case"colorOption":this._refreshColor(),this._renderNodes(),this._renderNodeLabels();break;case"sizeOption":this._refreshLayout(),this._animateOptionChange();break;case"postProcessCurve":this._refreshLayout(),this._animateOptionChange();break;case"nodeData":this._refreshColor(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels()}},_animateOptionChange:function(){function t(s){var s=Date.now(),r=s-i;r<n.options.animationDurationMs?(n._animateNodes(e.get(r/n.options.animationDurationMs)),requestAnimationFrame(t)):(n._animationActive=!1,n._renderNodes(),n._renderNodeLabels())}if(1==this.options.animationEnabled){!function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};window.requestAnimationFrame=t}(),this._animationActive=!0;var e=new TreemapUtils.KeySpline(this.options.animationEasing),i=Date.now(),n=this;requestAnimationFrame(t)}else this._renderNodes(),this._renderNodeLabels()},_animateNodes:function(t){var e=function(n){var r,a,o;for(a=0;a<n.length;a++)if(n[a].hasOwnProperty("children")===!1){if(void 0!==n[a].prevGeometry)for(r=n[a].prevGeometry.body.slice(),o=0;4>o;o++)r[o]+=(n[a].geometry.body[o]-n[a].prevGeometry.body[o])*t;else r=n[a].geometry.body;s.save(),s.fillStyle=i.options.leafNodeBodyGradient.call(i,s,r,n[a].computedColor),s.fillRect(r[0],r[1],r[2],r[3]),s.restore()}else e(n[a].children)},i=this,n=i.element.find("canvas")[0],s=n.getContext("2d");s.clearRect(0,0,n.width,n.height),e([i.options.nodeData])},_renderNodes:function(){if(void 0===this._animationActive||this._animationActive!==!0){var t=function(i){var n,r,a,o,l;for(o=0;o<i.length;o++){if(e._isRootNode(i[o])===!1){if(n=i[o].geometry.body,r=i[o].geometry.header,a=n.slice(),n[2]<=0||n[3]<=0)continue;for(s.save(),i[o].hasOwnProperty("children")&&null!==r?(s.fillStyle=e.options.innerNodeHeaderGradient.call(e,s,r,i[o].computedColor),s.fillRect(r[0],r[1],r[2],r[3]),i[o].hasOwnProperty("children")&&0===e.options.nodeBorderWidth&&(s.strokeStyle="#000",s.lineWidth=.5,s.beginPath(),s.moveTo(r[0]+r[2],r[1]),s.lineTo(r[0]+r[2],r[1]+r[3]),s.closePath(),s.stroke()),a[0]=r[0],a[1]=r[1],a[3]=r[3]+n[3]):(s.fillStyle=e.options.leafNodeBodyGradient.call(e,s,n,i[o].computedColor),s.fillRect(n[0],n[1],n[2],n[3])),s.restore(),l=0;l<a[3];l++)e._addRunlength(a[0],a[0]+a[2],a[1]+l,i[o].id)}i[o].hasOwnProperty("children")&&t(i[o].children)}},e=this,i=new Date,n=e.element.find("canvas")[0],s=n.getContext("2d");s.clearRect(0,0,n.width,n.height),e._clearScanLines(),t([e.options.nodeData]);var r=new Date;e.stats.renderLayoutMsec=r-i}},_renderNodeLabels:function(){if((void 0===this._animationActive||this._animationActive!==!0)&&this.options.labelsEnabled===!0){var t=function(i){var n,r,a;for(a=0;a<i.length;a++){if(e._isRootNode(i[a])===!1){if(n=i[a].geometry.body,r=i[a].geometry.header,n[2]<=0||n[3]<=0){i[a].hasOwnProperty("children")===!1&&(e.stats.leafNodeCnt+=1);continue}s.save(),s.beginPath(),i[a].hasOwnProperty("children")?null!==r&&e.options.innerNodeHeaderLabeller.call(e,s,r,i[a].computedColor,i[a].id):(e.options.leafNodeBodyLabeller.call(e,s,n,i[a].computedColor,i[a].id),e.stats.leafNodeCnt+=1,e.stats.renderedLeafNodeCnt+=1),s.restore()}i[a].hasOwnProperty("children")&&t(i[a].children)}},e=this;e.stats.leafNodeCnt=0,e.stats.renderedLeafNodeCnt=0;var i=new Date,n=e.element.find("canvas")[0],s=n.getContext("2d");t([e.options.nodeData]);var r=new Date;e.stats.renderLabelsMsec=r-i}},_refreshCanvas:function(){var t=this.element.find("canvas");t&&t.remove(),t=document.createElement("canvas"),t.setAttribute("width",this.options.dimensions[0]),t.setAttribute("height",this.options.dimensions[1]);var e=this;this.element.append(t).mousemove(function(t){if(void 0===e._animationActive||e._animationActive!==!0){var i,n,s,r,a=e.element.offset(),o=parseInt(a.left,10),l=parseInt(a.top,10),u=e.options.dimensions[0],c=e.options.dimensions[1];if(t.pageX<o+u&&t.pageY<l+c){for(i=e._coordsToId(t.pageX-o,t.pageY-l),n=[],r=0;r<i.length;r++)n.push(e._getNode([i[r]]));s={nodes:n,ids:i},e._trigger("mousemove",t,s)}}}).click(function(t){if(void 0===e._animationActive||e._animationActive!==!0){var i,n,s,r,a=e.element.offset(),o=parseInt(a.left,10),l=parseInt(a.top,10),u=e.options.dimensions[0],c=e.options.dimensions[1];if(t.pageX<o+u&&t.pageY<l+c){for(i=e._coordsToId(t.pageX-o,t.pageY-l),n=[],r=0;r<i.length;r++)n.push(e._getNode([i[r]]));s={nodes:n,ids:i},e._trigger("click",t,s)}}})},_refreshColorGradient:function(){var t,e,i,n=document.createElement("canvas"),s=this.options.colorStops;for(n.setAttribute("width",this.options.colorResolution),n.setAttribute("height",1),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(n),t=n.getContext("2d"),e=t.createLinearGradient(0,0,this.options.colorResolution,0),i=0;i<s.length;i+=1)e.addColorStop(s[i].val,s[i].color);t.fillStyle=e,t.fillRect(0,0,this.options.colorResolution,1),this.options.colorGradientMap=t.getImageData(0,0,this.options.colorResolution,1)},_refreshColor:function(){function t(i){var n;for(n=0;n<i.length;n++)void 0!==i[n].color&&(i[n].colorVal=i[n].color[e.options.colorOption],i[n].computedColor=e._getRgbColor(i[n].colorVal)),i[n].hasOwnProperty("children")&&t(i[n].children)}var e=this;t([e.options.nodeData])},_refreshLayout:function(){function t(t){if(0!==Object.getOwnPropertyNames(i.options.postProcessCurve).length){var e;for(e=0;e<t.length;e++)t[e]=s.get(t[e]);var n=TreemapUtils.sumArray(t);for(e=0;e<t.length;e++)t[e]=t[e]/n}return t}function e(n,s){var r,a,o,l,u=[];for(s.sort(function(t,e){return t.size[i.options.sizeOption]>e.size[i.options.sizeOption]?-1:t.size[i.options.sizeOption]<e.size[i.options.sizeOption]?1:0}),l=0;l<s.length;l++)u[l]=i._isRootNode(s[l])===!0?1:s[l].size[i.options.sizeOption];for(t(u),o=i.options.layoutMethod([n[0],n[1],n[2],n[3]],u),l=0;l<s.length;l++)s[l].geometry&&(s[l].prevGeometry=TreemapUtils.deepCopy(s[l].geometry)),s[l].geometry={body:o[l],header:null},i._addNode2NodeList(s[l]);for(l=0;l<s.length;l++)s[l].hasOwnProperty("children")&&(r=s[l].geometry.body,a=s[l].geometry.header,i._isRootNode(s[l])===!1&&r[3]-i.options.innerNodeHeaderHeightPx>0&&(a=s[l].geometry.header=r.slice(),a[3]=i.options.innerNodeHeaderHeightPx,r[1]+=i.options.innerNodeHeaderHeightPx,r[3]-=i.options.innerNodeHeaderHeightPx),i._isRootNode(s[l])===!1&&r[2]-i.options.nodeBorderWidth>0&&r[3]-i.options.nodeBorderWidth>0&&(i.options.dimensions[0]>r[0]+r[2]&&(r[2]-=i.options.nodeBorderWidth,null!==a&&(a[2]-=i.options.nodeBorderWidth)),i.options.dimensions[1]>r[1]+r[3]&&(r[3]-=i.options.nodeBorderWidth)),e(r,s[l].children))}var i=this,n=new Date,s=new TreemapUtils.KeySpline(this.options.postProcessCurve),r=[0,0,i.options.dimensions[0],i.options.dimensions[1]];i._clearNodeList(),e(r,[i.options.nodeData]);var a=new Date;i.stats.computeLayoutMsec=a-n},_getRgbColor:function(t){if(null===t)return TreemapUtils.hex2rgb(this.options.naColor);var e=this.options.colorGradientMap.data,i=4*Math.floor(t*(e.length/4));return[e[i],e[i+1],e[i+2]]},_clearScanLines:function(){this.scanLines&&(this.scanLines.length=0,this.scanLines=[])},_addRunlength:function(t,e,i,n){void 0===this.scanLines&&(this.scanLines=[]),y_str=parseInt(i,10),this.scanLines[y_str]||(this.scanLines[y_str]=[]),this.scanLines[y_str].push([t,e,n])},_coordsToId:function(t,e){var i,n,s,r,a,o,l;if(void 0===this.scanLines)return[];if(i=this.scanLines[e],a=[],i)for(l=i.length-1;l>=0;l--)n=i[l],s=n[0],r=n[1],o=n[2],t>=s&&r>t&&a.push(o);return a},_clearNodeList:function(){this.nodeList&&(this.nodeList={})},_addNode2NodeList:function(t){void 0===this.nodeList&&(this.nodeList={}),this.nodeList[t.id]||(this.nodeList[t.id]=t)},_getNode:function(t){return this.nodeList[t]},_isRootNode:function(t){return this.options.nodeData===t?!0:!1},destroy:function(){this.element.find("canvas").remove(),t(window).unbind("resize"),t.Widget.prototype.destroy.call(this)}})}(jQuery),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.lpad=function(t,e){for(var i=this;i.length<e;)i=t+i;return i},String.prototype.rpad=function(t,e){for(var i=this;i.length<e;)i+=t;return i},function(t,e,i){"use strict";var n={version:"2.1",tipLocation:"bottom",nubPosition:"auto",scroll:!0,scrollSpeed:300,timer:0,autoStart:!1,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookiePath:!1,localStorage:!1,localStorageKey:"joyride",tipContainer:"body",modal:!1,expose:!1,postExposeCallback:t.noop,preRideCallback:t.noop,postRideCallback:t.noop,preStepCallback:t.noop,postStepCallback:t.noop,template:{link:'<a href="#close" class="joyride-close-tip">X</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper" role="dialog"></div>',button:'<a href="#" class="joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'}},s=s||!1,r={},a={init:function(i){return this.each(function(){t.isEmptyObject(r)?(r=t.extend(!0,n,i),r.document=e.document,r.$document=t(r.document),r.$window=t(e),r.$content_el=t(this),r.$body=t(r.tipContainer),r.body_offset=t(r.tipContainer).position(),r.$tip_content=t("> li",r.$content_el),r.paused=!1,r.attempts=0,r.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},a.jquery_check(),t.isFunction(t.cookie)||(r.cookieMonster=!1),r.cookieMonster&&t.cookie(r.cookieName)||r.localStorage&&a.support_localstorage()&&localStorage.getItem(r.localStorageKey)||(r.$tip_content.each(function(e){a.create({$li:t(this),index:e})}),r.autoStart&&(!r.startTimerOnClick&&r.timer>0?(a.show("init"),a.startTimer()):a.show("init"))),r.$document.on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),r.$li.next().length<1?a.end():r.timer>0?(clearTimeout(r.automate),a.hide(),a.show(),a.startTimer()):(a.hide(),a.show())}),r.$document.on("click.joyride",".joyride-close-tip",function(t){t.preventDefault(),a.end(!0)}),r.$window.bind("resize.joyride",function(){if(r.$li){if(r.exposed&&r.exposed.length>0){var e=t(r.exposed);e.each(function(){var e=t(this);a.un_expose(e),a.expose(e)})}a.is_phone()?a.pos_phone():a.pos_default()}})):a.restart()})},resume:function(){a.set_li(),a.show()},nextTip:function(){r.$li.next().length<1?a.end():r.timer>0?(clearTimeout(r.automate),a.hide(),a.show(),a.startTimer()):(a.hide(),a.show())},tip_template:function(e){var i,n,s;return e.tip_class=e.tip_class||"",i=t(r.template.tip).addClass(e.tip_class),n=t.trim(t(e.li).html())+a.button_text(e.button_text)+r.template.link+a.timer_instance(e.index),s=t(r.template.wrapper),e.li.attr("data-aria-labelledby")&&s.attr("aria-labelledby",e.li.attr("data-aria-labelledby")),e.li.attr("data-aria-describedby")&&s.attr("aria-describedby",e.li.attr("data-aria-describedby")),i.append(s),i.first().attr("data-index",e.index),t(".joyride-content-wrapper",i).append(n),i[0]},timer_instance:function(e){var i;return i=0===e&&r.startTimerOnClick&&r.timer>0||0===r.timer?"":a.outerHTML(t(r.template.timer)[0])},button_text:function(e){return r.nextButton?(e=t.trim(e)||"Next",e=a.outerHTML(t(r.template.button).append(e)[0])):e="",e},create:function(e){var i=e.$li.attr("data-button")||e.$li.attr("data-text"),n=e.$li.attr("class"),s=t(a.tip_template({tip_class:n,index:e.index,button_text:i,li:e.$li}));t(r.tipContainer).append(s)},show:function(e){var n,s,o={},l=[],u=0,c=null;if(r.$li===i||-1===t.inArray(r.$li.index(),r.pauseAfter))if(r.paused?r.paused=!1:a.set_li(e),r.attempts=0,r.$li.length&&r.$target.length>0){for(e&&(r.preRideCallback(r.$li.index(),r.$next_tip),r.modal&&a.show_modal()),r.preStepCallback(r.$li.index(),r.$next_tip),l=(r.$li.data("options")||":").split(";"),u=l.length,n=u-1;n>=0;n--)s=l[n].split(":"),2===s.length&&(o[t.trim(s[0])]=t.trim(s[1]));r.tipSettings=t.extend({},r,o),r.tipSettings.tipLocationPattern=r.tipLocationPatterns[r.tipSettings.tipLocation],r.modal&&r.expose&&a.expose(),!/body/i.test(r.$target.selector)&&r.scroll&&a.scroll_to(),a.is_phone()?a.pos_phone(!0):a.pos_default(!0),c=t(".joyride-timer-indicator",r.$next_tip),/pop/i.test(r.tipAnimation)?(c.outerWidth(0),r.timer>0?(r.$next_tip.show(),c.animate({width:t(".joyride-timer-indicator-wrap",r.$next_tip).outerWidth()},r.timer)):r.$next_tip.show()):/fade/i.test(r.tipAnimation)&&(c.outerWidth(0),r.timer>0?(r.$next_tip.fadeIn(r.tipAnimationFadeSpeed),r.$next_tip.show(),c.animate({width:t(".joyride-timer-indicator-wrap",r.$next_tip).outerWidth()},r.timer)):r.$next_tip.fadeIn(r.tipAnimationFadeSpeed)),r.$current_tip=r.$next_tip,t(".joyride-next-tip",r.$current_tip).focus(),a.tabbable(r.$current_tip)}else r.$li&&r.$target.length<1?a.show():a.end();else r.paused=!0},is_phone:function(){return s?s.mq("only screen and (max-width: 767px)"):r.$window.width()<767?!0:!1},support_localstorage:function(){return s?s.localstorage:!!e.localStorage},hide:function(){r.modal&&r.expose&&a.un_expose(),r.modal||t(".joyride-modal-bg").hide(),r.$current_tip.hide(),r.postStepCallback(r.$li.index(),r.$current_tip)},set_li:function(t){t?(r.$li=r.$tip_content.eq(r.startOffset),a.set_next_tip(),r.$current_tip=r.$next_tip):(r.$li=r.$li.next(),a.set_next_tip()),a.set_target()},set_next_tip:function(){r.$next_tip=t(".joyride-tip-guide[data-index="+r.$li.index()+"]")},set_target:function(){var e=r.$li.attr("data-class"),i=r.$li.attr("data-id"),n=function(){return i?t(r.document.getElementById(i)):e?t("."+e).filter(":visible").first():t("body")};r.$target=n()},scroll_to:function(){var e,i;e=r.$window.height()/2,i=Math.ceil(r.$target.offset().top-e+r.$next_tip.outerHeight()),t("html, body").stop().animate({scrollTop:i},r.scrollSpeed)},paused:function(){return-1===t.inArray(r.$li.index()+1,r.pauseAfter)?!0:!1},destroy:function(){t.isEmptyObject(r)||r.$document.off(".joyride"),t(e).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(r.automate),r={}},restart:function(){r.autoStart?(a.hide(),r.$li=i,a.show("init")):(!r.startTimerOnClick&&r.timer>0?(a.show("init"),a.startTimer()):a.show("init"),r.autoStart=!0)},pos_default:function(e){var i=(Math.ceil(r.$window.height()/2),r.$next_tip.offset(),t(".joyride-nub",r.$next_tip)),n=Math.ceil(i.outerWidth()/2),s=Math.ceil(i.outerHeight()/2),o=e||!1;if(o&&(r.$next_tip.css("visibility","hidden"),r.$next_tip.show()),/body/i.test(r.$target.selector))r.$li.length&&a.pos_modal(i);else{var l=r.tipSettings.tipAdjustmentY?parseInt(r.tipSettings.tipAdjustmentY):0,u=r.tipSettings.tipAdjustmentX?parseInt(r.tipSettings.tipAdjustmentX):0;a.bottom()?(r.$next_tip.css({top:r.$target.offset().top+s+r.$target.outerHeight()+l,left:r.$target.offset().left+u}),/right/i.test(r.tipSettings.nubPosition)&&r.$next_tip.css("left",r.$target.offset().left-r.$next_tip.outerWidth()+r.$target.outerWidth()),a.nub_position(i,r.tipSettings.nubPosition,"top")):a.top()?(r.$next_tip.css({top:r.$target.offset().top-r.$next_tip.outerHeight()-s+l,left:r.$target.offset().left+u}),a.nub_position(i,r.tipSettings.nubPosition,"bottom")):a.right()?(r.$next_tip.css({top:r.$target.offset().top+l,left:r.$target.outerWidth()+r.$target.offset().left+n+u}),a.nub_position(i,r.tipSettings.nubPosition,"left")):a.left()&&(r.$next_tip.css({top:r.$target.offset().top+l,left:r.$target.offset().left-r.$next_tip.outerWidth()-n+u}),a.nub_position(i,r.tipSettings.nubPosition,"right")),!a.visible(a.corners(r.$next_tip))&&r.attempts<r.tipSettings.tipLocationPattern.length&&(i.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),r.tipSettings.tipLocation=r.tipSettings.tipLocationPattern[r.attempts],r.attempts++,a.pos_default(!0))}o&&(r.$next_tip.hide(),r.$next_tip.css("visibility","visible"))},pos_phone:function(e){var i=r.$next_tip.outerHeight(),n=(r.$next_tip.offset(),r.$target.outerHeight()),s=t(".joyride-nub",r.$next_tip),o=Math.ceil(s.outerHeight()/2),l=e||!1;s.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),l&&(r.$next_tip.css("visibility","hidden"),r.$next_tip.show()),/body/i.test(r.$target.selector)?r.$li.length&&a.pos_modal(s):a.top()?(r.$next_tip.offset({top:r.$target.offset().top-i-o}),s.addClass("bottom")):(r.$next_tip.offset({top:r.$target.offset().top+n+o}),s.addClass("top")),l&&(r.$next_tip.hide(),r.$next_tip.css("visibility","visible"))},pos_modal:function(t){a.center(),t.hide(),a.show_modal()},show_modal:function(){t(".joyride-modal-bg").length<1&&t("body").append(r.template.modal).show(),/pop/i.test(r.tipAnimation)?t(".joyride-modal-bg").show():t(".joyride-modal-bg").fadeIn(r.tipAnimationFadeSpeed)},expose:function(){var i,n,s,o,l="expose-"+Math.floor(1e4*Math.random());if(arguments.length>0&&arguments[0]instanceof t)s=arguments[0];else{if(!r.$target||/body/i.test(r.$target.selector))return!1;s=r.$target}return s.length<1?(e.console&&console.error("element not valid",s),!1):(i=t(r.template.expose),r.$body.append(i),i.css({top:s.offset().top,left:s.offset().left,width:s.outerWidth(!0),height:s.outerHeight(!0)}),n=t(r.template.exposeCover),o={zIndex:s.css("z-index"),position:s.css("position")},s.css("z-index",1*i.css("z-index")+1),"static"==o.position&&s.css("position","relative"),s.data("expose-css",o),n.css({top:s.offset().top,left:s.offset().left,width:s.outerWidth(!0),height:s.outerHeight(!0)}),r.$body.append(n),i.addClass(l),n.addClass(l),r.tipSettings.exposeClass&&(i.addClass(r.tipSettings.exposeClass),n.addClass(r.tipSettings.exposeClass)),s.data("expose",l),r.postExposeCallback(r.$li.index(),r.$next_tip,s),void a.add_exposed(s))},un_expose:function(){var i,n,s,o,l=!1;if(arguments.length>0&&arguments[0]instanceof t)n=arguments[0];else{if(!r.$target||/body/i.test(r.$target.selector))return!1;n=r.$target}return n.length<1?(e.console&&console.error("element not valid",n),!1):(i=n.data("expose"),s=t("."+i),arguments.length>1&&(l=arguments[1]),l===!0?t(".joyride-expose-wrapper,.joyride-expose-cover").remove():s.remove(),o=n.data("expose-css"),"auto"==o.zIndex?n.css("z-index",""):n.css("z-index",o.zIndex),o.position!=n.css("position")&&("static"==o.position?n.css("position",""):n.css("position",o.position)),n.removeData("expose"),n.removeData("expose-z-index"),void a.remove_exposed(n))
},add_exposed:function(e){r.exposed=r.exposed||[],e instanceof t?r.exposed.push(e[0]):"string"==typeof e&&r.exposed.push(e)},remove_exposed:function(e){var i;e instanceof t?i=e[0]:"string"==typeof e&&(i=e),r.exposed=r.exposed||[];for(var n=0;n<r.exposed.length;n++)if(r.exposed[n]==i)return void r.exposed.splice(n,1)},center:function(){var t=r.$window;return r.$next_tip.css({top:(t.height()-r.$next_tip.outerHeight())/2+t.scrollTop(),left:(t.width()-r.$next_tip.outerWidth())/2+t.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(r.tipSettings.tipLocation)},top:function(){return/top/i.test(r.tipSettings.tipLocation)},right:function(){return/right/i.test(r.tipSettings.tipLocation)},left:function(){return/left/i.test(r.tipSettings.tipLocation)},corners:function(t){var e=r.$window,i=e.height()/2,n=Math.ceil(r.$target.offset().top-i+r.$next_tip.outerHeight()),s=e.width()+e.scrollLeft(),a=e.height()+n,o=e.height()+e.scrollTop(),l=e.scrollTop();return l>n&&(l=0>n?0:n),a>o&&(o=a),[t.offset().top<l,s<t.offset().left+t.outerWidth(),o<t.offset().top+t.outerHeight(),e.scrollLeft()>t.offset().left]},visible:function(t){for(var e=t.length;e--;)if(t[e])return!1;return!0},nub_position:function(t,e,i){t.addClass("auto"===e?i:e)},startTimer:function(){r.$li.length?r.automate=setTimeout(function(){a.hide(),a.show(),a.startTimer()},r.timer):clearTimeout(r.automate)},end:function(e){e=e||!1,e&&r.$window.unbind("resize.joyride"),r.cookieMonster&&t.cookie(r.cookieName,"ridden",{expires:365,domain:r.cookieDomain,path:r.cookiePath}),r.localStorage&&localStorage.setItem(r.localStorageKey,!0),r.timer>0&&clearTimeout(r.automate),r.modal&&r.expose&&a.un_expose(),r.$current_tip&&r.$current_tip.hide(),r.$li&&(r.postStepCallback(r.$li.index(),r.$current_tip,e),r.postRideCallback(r.$li.index(),r.$current_tip,e)),t(".joyride-modal-bg").hide()},jquery_check:function(){return t.isFunction(t.fn.on)?!0:(t.fn.on=function(t,e,i){return this.delegate(e,t,i)},t.fn.off=function(t,e,i){return this.undelegate(e,t,i)},!1)},outerHTML:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)},version:function(){return r.version},tabbable:function(e){t(e).on("keydown",function(i){if(!i.isDefaultPrevented()&&i.keyCode&&27===i.keyCode)return i.preventDefault(),void a.end(!0);if(9===i.keyCode){var n=t(e).find(":tabbable"),s=n.filter(":first"),r=n.filter(":last");i.target!==r[0]||i.shiftKey?i.target===s[0]&&i.shiftKey&&(r.focus(1),i.preventDefault()):(s.focus(1),i.preventDefault())}})}};t.fn.joyride=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.joyride"):a.init.apply(this,arguments)}}(jQuery,this);var WordModel=Backbone.Model.extend({urlRoot:"/words"}),WordCollection=Backbone.Collection.extend({model:WordModel,url:function(){var t=window.location.pathname.match(/\/\d+$/)[0].replace("/","");return"/users/"+t+"/words"},graphObjectInDateTimeRange:function(t,e,i){for(var n=[],s=this.timeIntervals(t,e,i),r=0;r<s.length;r++){var a=this.wordModelsFromStartToEnd(s[r],s[r+1]);n.push({x:s[r],y:a})}return n},wordModelsFromStartToEnd:function(t,e){var i=this.filter(function(i){var n=new Date(Date.parse(i.get("created_at"))).getTime()/1e3;return n>t&&e>n});return i},timeIntervals:function(t,e,i){for(var n=[],s=e-t,r=0;s>r;r+=i)n.push(t+r);return n},earliestTimeInRange:function(t,e){var i=this.wordModelsFromStartToEnd(t,e),n=_.sortBy(i,function(t){return new Date(Date.parse(t.get("created_at")))}),s=n[0];return new Date(Date.parse(s.get("created_at"))).getTime()/1e3},wordString:function(t,e){var i=this.wordModelsFromStartToEnd(t,e),n=_.map(i,function(t){return t.get("letters")});return n.join("+")}}),AlchemyResultsView=Backbone.View.extend({el:"#alchemy-results-view",events:{},initialize:function(t){alchemyResultsSelf=this,this.options=t||{},this.queryAlchemy(this.options.stringToQuery)},queryAlchemy:function(t){$.ajax({url:"/alchemy_search",method:"post",data:{words:t},dataType:"json"}).done(function(t){var e=0;_.each(t.entities.slice(0,10),function(t){e+=parseFloat(t.relevance)});var i=_.map(t.entities,function(t){var i=parseFloat(t.relevance),n=Math.random();return{id:t.text+" - "+t.type,size:[i/e],color:[n],relevance:i}});this.renderTreemap(i)}.bind(this))},renderTreemap:function(t){if(this.$el.empty(),this.$el.append("<div id='treemap'>"),t.length>0){var e=_.template($("#entity-nav-template").html());if(this.$el.append(e),$("#treemap").treemap({nodeData:{id:"group 1",children:t}}).bind("treemapclick",this.mouseclickhandler),this.options.liveMode){$("#entity-results").empty();for(var i=0;3>i;i++)if(void 0!==t[i]){var n=t[i].id.split(" - ")[0],s=t[i].id.split(" - ")[1].toLowerCase(),r=n.toLowerCase().split(" ").join("+"),a=new EntityItemView({type:s,query:r,liveMode:this.options.liveMode});$("#entity-results").append(a.$el)}}else $("html, body").animate({scrollTop:$("#treemap").offset().top-80},400);$(window).on("resize",function(){$("canvas").width(window.innerWidth-100)})}else this.displayNoEntitiesError()},mouseclickhandler:function(t,e){var i=(e.nodes,e.ids),n=i[0].split(" - ")[0].toLowerCase(),s=i[0].split(" - ")[1].toLowerCase();if(alchemyResultsSelf.entityDisplayed(n))$("html, body").animate({scrollTop:$("h3:contains("+n+")").offset().top-80});else{var r=n.split(" ").join("+"),a=new EntityItemView({type:s,query:r});$("#entity-results").prepend(a.$el),$("html, body").animate({scrollTop:$("#entity-results").offset().top-80})}},entityDisplayed:function(t){var e=$(".entity-title").map(function(){return $(this).text()});return-1!==$.makeArray(e).indexOf(t)},hideTranscript:function(){"Show Treemap"==$("#treemap-button").text()?($("#treemap-button").text("Hide Treemap"),$("#treemap").slideDown()):($("#treemap-button").text("Show Treemap"),$("#treemap").slideUp())},displayNoEntitiesError:function(){$("#RelephantError").remove(),this.$el.append('<div id="RelephantError">No entities were detected</div>')}}),CrunchBaseView=Backbone.View.extend({tagName:"div",className:"crunchbase-view",initialize:function(t){this.options=t||{},this.queryCrunchbase()},queryCrunchbase:function(){$.ajax({url:"/crunchbase_search",method:"get",data:{query:this.options.query},dataType:"json"}).done(function(t){void 0===t.error&&(this.description=t.data.properties.short_description,this.foundedYear=t.data.properties.founded_year,this.homepageURL=t.data.properties.homepage_url,this.headquartersCity=t.data.relationships.headquarters.items[0].city,this.headquartersRegion=t.data.relationships.headquarters.items[0].region,this.render())}.bind(this))},render:function(){this.$el.append('<p><span class="crunch-bold">Description: </span>'+this.description+"</p>"),this.$el.append('<p><span class="crunch-bold">Founded: </span>'+this.foundedYear+"</p>"),this.$el.append("<p>"+this.headquartersCity+", "+this.headquartersRegion+"</p>"),this.$el.append('<p><span class="crunch-bold">Homepage: </span><a href="'+this.homepageURL+'">'+this.homepageURL+"</a></p>")}}),EntityItemView=Backbone.View.extend({tagName:"div",className:"entity-item-view",events:{"click .entity-delete-x":"removeSelf"},initialize:function(t){this.options=t||{},this.addHeader(),googleImagesBox=new GoogleImagesView({query:this.options.query,liveMode:this.options.liveMode}),googleResultBox=new GoogleResultsView({query:this.options.query,liveMode:this.options.liveMode});var e=this.specialBox();this.$el.append(googleImagesBox.el),this.$el.append(googleResultBox.el),this.$el.append(e)},specialBox:function(){var t=this.options.type;if("city"===t||"continent"===t||"country"===t||"facility"===t||"geographicfeature"===t||"region"===t||"stateorcounty"===t){var e=8;("country"===t||"continent"===t)&&(e=4);var i=new GoogleMapsView({googleMapsQuery:this.options.query,zoomLevel:e});return i.el}if("company"===t){var n=new CrunchBaseView({query:this.options.query});return n.el}},addHeader:function(){var t=this.options.query.split("+").join(" ");this.$el.append("<i class='entity-delete-x fa fa-times-circle-o'></i>"),this.$el.append('<h3 class="entity-title">'+t+"</h3>")},removeSelf:function(){this.$el.remove()}}),GoogleImagesView=Backbone.View.extend({tagName:"div",className:"google-images-view",initialize:function(t){this.options=t||{},this.queryGoogle(this.options.query)},queryGoogle:function(t){$.ajax({url:"/google_image_search",method:"get",data:{entity:t},dataType:"json"}).done(function(t){var e=t.items;this.render(e)}.bind(this))},render:function(t){_.each(t,function(t){var e=t.link;this.$el.append('<a class="google-image-link" href="'+e+'" target="_blank"><img class="google-image-image" src="'+e+'"></a>')}.bind(this))}}),GoogleMapsView=Backbone.View.extend({tagName:"div",className:"google-maps-view",initialize:function(t){this.options=t||{},this.geocode()},geocode:function(){var t=new google.maps.Geocoder;t.geocode({address:this.options.googleMapsQuery},function(t,e){if(e==google.maps.GeocoderStatus.OK){var i=t[0].geometry.location.k,n=t[0].geometry.location.B;this.initializeMap(i,n)}}.bind(this))},initializeMap:function(t,e){var i=""+Math.random();this.$el.html('<div class="map-canvas" id="'+i+'"></div>');{var n=new google.maps.LatLng(t,e),s={zoom:this.options.zoomLevel,center:n,scrollwheel:!1},r=new google.maps.Map(document.getElementById(i),s);new google.maps.Marker({position:n,map:r})}}}),GoogleResultsView=Backbone.View.extend({tagName:"div",className:"google-results-view",initialize:function(t){this.options=t||{},this.queryGoogle(this.options.query)},queryGoogle:function(t){$.ajax({url:"/google_search",method:"get",data:{entity:t},dataType:"json"}).done(function(t){var e=t.items;this.render(e)}.bind(this))},render:function(t){_.each(t,function(t){var e=t.title,i=t.snippet,n=t.link;this.$el.append($('<div class="google-result-item"><a target="_blank" class="google-result-link" href="'+n+'">'+e+'</a><p class="google-result-description">'+i+"</p></div>"))}.bind(this))}}),LiveModeView=Backbone.View.extend({el:"#live-mode",initialize:function(){this.setPlaceHolder(),this.setQueryInterval()},setPlaceHolder:function(){this.$el.append('<div id="placeholder"><h3>Speak</h3></div>')},setQueryInterval:function(){clearInterval(this.currentQueryInterval),this.currentQueryInterval=setInterval(function(){})}}),SpeechInputView=Backbone.View.extend({el:"#speech-input",events:{"click button#microphone":"microphoneButton"},initialize:function(t){this.options=t||{},$("#microphone").nextAll().remove(),this.tempWordStorage=[],this.prevAlchemyWordString="",this.curAlchemyWordString="",reco.statusText("status"),reco.statusImage("status_img"),reco.finalResults("final_span"),reco.interimResults("interim_span"),reco.continuous=!0,reco.maxAlternatives=1,reco.recognition.onresult=function(t){for(var e="",i=t.resultIndex;i<t.results.length;++i)if(t.results[i].isFinal){var n=t.results[i][0].transcript.trim().split(" ");n[n.length-1]+=".",_.each(n,function(t){this.tempWordStorage.push(t),this.curAlchemyWordString+=t+" "}.bind(this))}else e+=t.results[i][0].transcript;document.getElementById("interim_span").innerHTML=e}.bind(this),this.listenForWords(),this.options.liveMode&&(this.setPlaceHolder(),this.setQueryInterval(),reco.toggleStartStop())},microphoneButton:function(){reco.toggleStartStop()},listenForWords:function(){setInterval(function(){if(this.tempWordStorage.length>0){for(var t=0;t<this.tempWordStorage.length;t++){var e={letters:this.tempWordStorage[t]};this.collection.create(e)}this.tempWordStorage=[]}}.bind(this),2e3)},setQueryInterval:function(){clearInterval(this.currentQueryInterval),this.currentQueryInterval=setInterval(function(){""!==this.curAlchemyWordString&&this.prevAlchemyWordString!==this.curAlchemyWordString&&($("#placeholder").remove(),this.prevAlchemyWordString=this.curAlchemyWordString,this.renderAlchemyView(this.curAlchemyWordString))}.bind(this),5e3)},displayNoSpeechError:function(){$("#RelephantError").remove(),this.$el.append('<div id="RelephantError">No words detected, please continue speaking</div>')},renderAlchemyView:function(){new AlchemyResultsView({stringToQuery:this.curAlchemyWordString,liveMode:!0})},setPlaceHolder:function(){this.$el.append('<div id="placeholder"><img src="http://i.imgur.com/c1ZAaYq.png" /><h3>Please continue speaking</h3></div>')},close:function(){clearInterval(this.currentQueryInterval),clearInterval(this.currentListenInterval)}}),graph,WordListView=Backbone.View.extend({el:"#history-mode",events:{"click button#datetimebutton":"resetTime","click button#word-search":"wordSearch","click button#transcript":"generateTranscript","click button#alchemy":"renderAlchemyResults","click div.treemap-node":"googleResults"},initialize:function(){this.template=_.template($("#word-chart-template").html()),this.$el.html(this.template),this.viewInitializer()},viewInitializer:function(){$("#datetimepicker1").datetimepicker(),this.listenTo(this.collection,"add",this.addToTempStorage),this.DEFAULTHOURSPAST=1,this.SMOOTHING=1.001,this.tempWordStorage=[],this.$("#chart_container").remove(),$("<div id=chart_container></div>").insertBefore("#slider-range"),this.collection.fetch(),this.startDate=this.setStartDate(),this.endDate=(new Date).getTime(),this.xIntervalSeconds=this.setIntervalSeconds((this.endDate-this.startDate)/1e3),this.graphObjectArray=this.queryDBforGraphData(this.xIntervalSeconds),this.render()},render:function(){this.lineDataArray=this.getLineDataArray(this.graphObjectArray),this.initializeChart(),graph.render(),this.setSlider(),this.setTickInterval()},setIntervalSeconds:function(t){var e,i=3600;return e=2*i>t?1:24*i>t?5:84*i>t?10:168*i>t?30:720*i>t?150:1200,$("#tick-interval").text(e+" seconds"),e},generateTranscript:function(){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var t=this.collection.wordString(leftSliderDateTime,rightSliderDateTime).split("+").join(" ");"Generate Transcript"==$("#transcript").text()?($("#transcript-box").empty(),$("#transcript").text("Hide Transcript"),$("#transcript-box").slideDown(),$("#transcript-box").append("<h4 id=transcript-title>Transcript from "+prettyDateTime(new Date(1e3*leftSliderDateTime))+" to "+prettyDateTime(new Date(1e3*rightSliderDateTime))+':</h4><div id="email"><a href="mailto:?&subject=Transcript%20from%20'+prettyDateTime(new Date(1e3*leftSliderDateTime))+"%20to%20"+prettyDateTime(new Date(1e3*rightSliderDateTime))+"&body="+t+'">Email <i class="fa fa-share"></i></a></div>'),$("#transcript-box").append('<div id="email"><a href="mailto:?&subject=Transcript%20from%20'+prettyDateTime(new Date(1e3*leftSliderDateTime))+"%20to%20"+prettyDateTime(new Date(1e3*rightSliderDateTime))+"&body="+t+'>Email <i class="fa fa-share"></i></a></div><p id=transcript-content>'+t+"</p>")):($("#transcript").text("Generate Transcript"),$("#transcript-box").slideUp()),$("html, body").animate({scrollTop:$("#transcript-box").offset().top-80},400)},sliderDateTimes:function(){var t=new Date-this.startDate,e=parseFloat(document.getElementById("left-slider").style.left)/100,i=parseFloat(document.getElementById("right-slider").style.left)/100,n=(e*t+this.startDate)/1e3,s=(i*t+this.startDate)/1e3;return[n,s]},resetTime:function(){this.startDate=this.setStartDate(),clearInterval(this.currentInterval),this.viewInitializer()},getLineDataArray:function(t){return _.map(t,function(t){return{x:t.x,y:t.y.length}})},wordSearch:function(){var t=[{x:this.startDate/1e3,y:0}],e=$("#search-input").val();if(""!==e){var i=this.sliderDateTimes()[0],n=this.sliderDateTimes()[1];_.each(this.graphObjectArray,function(s){s.y.length>0&&_.each(s.y,function(r,a,o){-1!==r.get("letters").toLowerCase().indexOf(e.toLowerCase())&&s.x>i&&s.x<n&&t.push({x:s.x,y:o.length})}.bind(this))}.bind(this));var s=Math.floor(200*Math.random()),r=Math.floor(200*Math.random()),a=Math.floor(255*Math.random()),o="rgb("+s+","+r+","+a+")",l=t.length-1;graph.series.push({data:t,renderer:"scatterplot",color:o}),$("#legend").append("<div class='search-term' style='background: "+o+";'><span class='search-count'>("+l+")</span> "+e+"</div>"),graph.render(),$("html, body").animate({scrollTop:$("body").offset().top+150},400)}},renderAlchemyResults:function(){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var t=this.collection.wordString(leftSliderDateTime,rightSliderDateTime);""===t?(this.displayNoWordsError(),$("html, body").animate({scrollTop:$("#alchemy-results-view").offset().top+100},400)):($("#alchemy-results-view").empty(),new AlchemyResultsView({stringToQuery:t,liveMode:!1}))},displayNoWordsError:function(){$("#alchemy-results-view").empty(),this.$el.append('<div id="RelephantError">No words detected, please adjust your view</div>')},setTickInterval:function(){var t=1,e=this.endDate/1e3;this.currentInterval=setInterval(function(){var i=e+this.xIntervalSeconds*t,n=this.lineDataArray,s=_.map(this.tempWordStorage,function(t){return new WordModel({letters:t})}),r=0===this.tempWordStorage.length?n[n.length-1].y/this.SMOOTHING:this.tempWordStorage.length;this.lineDataArray.push({x:i,y:r}),this.graphObjectArray.push({x:i,y:s}),this.tempWordStorage=[],graph.render(),t++}.bind(this),1e3*this.xIntervalSeconds)},setStartDate:function(){var t=$(".form-control").val();if(""===t)return(new Date).getTime()-60*this.DEFAULTHOURSPAST*60*1e3;var e=new Date(t).getTime();return e>(new Date).getTime()&&($(".form-control").css("border-color","red"),e=(new Date).getTime()-60*this.DEFAULTHOURSPAST*60*1e3),e},initializeChart:function(){$("#chart_container").prepend("<div id='chart'>"),$("#chart_container").prepend("<div id='y_axis'>"),graph=new Rickshaw.Graph({element:document.querySelector("#chart"),renderer:"multi",width:window.innerWidth-150,height:400,series:[{data:this.lineDataArray,renderer:"line",color:"steelblue"}]}),$(window).on("resize",function(){graph.configure({width:window.innerWidth-150}),graph.render(),$("#slider-range").width(window.innerWidth-150)});new Rickshaw.Graph.Axis.Time({graph:graph,timeUnit:"seconds"}),new Rickshaw.Graph.Axis.Y({graph:graph,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById("y_axis")}),new Rickshaw.Graph.HoverDetail({graph:graph,formatter:function(t,e,i){var n=_.filter(this.graphObjectArray,function(t){return t.x===e}.bind(this));if(n.length>0){var s=_.map(n[0].y,function(t){return t.get("letters")});$("#legend-datetime").text(prettyDateTime(new Date(1e3*e))),$("#legend-words").text(s.join(" "))}return n[0].y.length>0?"word count: "+i:"word count: 0"}.bind(this)})},queryDBforGraphData:function(t){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var e=this.collection.graphObjectInDateTimeRange(leftSliderDateTime,rightSliderDateTime,t);return e},addToTempStorage:function(t){this.tempWordStorage.push(t.get("letters"))},setSlider:function(){new Rickshaw.Graph.RangeSlider({graph:graph,element:document.querySelector("#slider-range")})},close:function(){clearInterval(this.currentInterval),this.$el.empty()}}),reco=new WebSpeechRecognition,RephantoRouter=Backbone.Router.extend({routes:{"":"live",history:"history"},initialize:function(){this.collection=new WordCollection},start:function(){Backbone.history.start()},live:function(){void 0!==this.speechInputView&&this.speechInputView.close(),void 0!==this.wordListView&&this.wordListView.close(),$("#alchemy-results-view").empty(),$("#entity-results").empty(),this.speechInputView=new SpeechInputView({collection:this.collection,liveMode:!0})},history:function(){void 0!==this.speechInputView&&this.speechInputView.close(),$("#alchemy-results-view").empty(),$("#entity-results").empty(),reco.stop(),this.speechInputView=new SpeechInputView({collection:this.collection,liveMode:!1}),this.collection.fetch({success:function(){this.wordListView=new WordListView({collection:this.collection})}.bind(this)})}}),rephantoRouter;$(document).ready(backboneReady),$(document).on("page:load",function(){Backbone.history.stop(),backboneReady()});