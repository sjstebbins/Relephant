function WebSpeechRecognition(){var t=this;t.continuous=!1,t.lang="",t.maxAlternatives=1,t.status_array=status_array_en,t.image_array=image_array_mic;var e,n=!1;t.supported=function(){return!!t.recognition},t.statusText=function(e){t.status_elem=t.getElem(e),t.refreshState()},t.statusImage=function(e){t.image_elem=t.getElem(e),t.refreshState()},t.finalResults=function(e){t.final_results=t.getElem(e)},t.interimResults=function(e){t.interim_results=t.getElem(e)},t.inProgress=function(){return n},t.start=function(){n=!0,e=!1,t.final_transcript="",t.setText(t.final_results,""),t.setText(t.interim_results,""),t.recognition.continuous=t.continuous,t.recognition.interimResults=!!t.interim_results,t.recognition.maxAlternatives=t.maxAlternatives,""!=t.lang&&(t.recognition.lang=t.lang),t.recognition.start(),t.onState("allow")},t.stop=function(){n=!1,t.recognition.stop()},t.toggleStartStop=function(){reco.inProgress()?reco.stop():reco.start()},t.onState=function(e){t.onStatusChange(e),t.onImageChange(e),t.currentState=e},t.refreshState=function(){t.onState(t.currentState)},t.onStatusChange=function(e){if(t.status_elem){var n=t.status_array[e];n?(t.setText(t.status_elem,n),t.status_elem.style.visibility="visible"):t.status_elem.style.visibility="hidden"}},t.onImageChange=function(e){if(t.image_elem){var n=t.image_array[e];n||(n=t.image_array.disable),t.image_elem.src=n}},t.setText=function(e,n){e&&("INPUT"==e.nodeName?e.value=n:e.innerHTML=t.linebreak(n))},t.getElem=function(t){return"string"==typeof t?document.getElementById(t):t};var i=/\n\n/g,r=/\n/g;t.linebreak=function(t){return t.replace(i,"<p></p>").replace(r,"<br>")};var s=/\S/;t.capitalize=function(t){return t.replace(s,function(t){return t.toUpperCase()})},"webkitSpeechRecognition"in window?(t.recognition=new webkitSpeechRecognition,t.final_transcript="",t.interim_transcript="",t.onState("ready"),t.onEnd=null,t.recognition.onstart=function(){n=!0,t.onState("active")},t.recognition.onerror=function(n){("no-speech"==n.error||"audio-capture"==n.error||"not-allowed"==n.error)&&(t.onState(n.error),e=!0)},t.recognition.onend=function(){if(n=!1,!e){if(""==t.final_transcript)return void t.onState("ready");t.onState("complete"),t.onEnd&&t.onEnd()}},t.recognition.onresult=function(e){t.interim_transcript="";for(var n=e.resultIndex;n<e.results.length;++n)e.results[n].isFinal?t.final_transcript+=e.results[n][0].transcript:t.interim_transcript+=e.results[n][0].transcript;t.final_transcript=t.capitalize(t.final_transcript),t.setText(t.final_results,t.final_transcript),t.setText(t.interim_results,t.interim_transcript),t.onResult&&t.onResult()}):t.onState("upgrade")}function backboneReady(){rephantoRouter=new RephantoRouter,rephantoRouter.start(),setDate(),runJoyride()}function setDate(){$("#datetimepicker1").datetimepicker()}function prettyDateTime(t){return t.toDateString()+" at "+t.toLocaleTimeString()}function runJoyride(){$("#joyRideTipContent").joyride({nextButton:!0,tipAnimation:"pop",cookieMonster:!0,cookieName:"JoyRide"})}function relephantViewPicker(t,e){if($("#entity-based-results-view").empty(),"city"===t||"continent"===t||"country"===t||"facility"===t||"geographicfeature"===t||"region"===t||"stateorcounty"===t){$("#entity-based-results-view").append('<div id="google-maps-view">');var n=8;("country"===t||"continent"===t)&&(n=4),new googleMapsView({googleMapsQuery:e,zoomLevel:n})}}function displayRelephantError(t){$("#RelephantError").remove(),$("#alchemy-results-view").append('<div id="RelephantError">'+t+"</div>")}(function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,a=i.push,o=i.slice,u=i.concat,l=r.toString,c=r.hasOwnProperty,d=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,_=i.indexOf,y=i.lastIndexOf,w=Array.isArray,b=Object.keys,k=s.bind,x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.6.0";var D=x.each=x.forEach=function(t,e,i){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var a=x.keys(t),r=0,s=a.length;s>r;r++)if(e.call(i,t[a[r]],a[r],t)===n)return;return t};x.map=x.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):(D(t,function(t,r,s){i.push(e.call(n,t,r,s))}),i)};var M="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=x.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(D(t,function(t,s,a){r?n=e.call(i,n,t,s,a):(n=t,r=!0)}),!r)throw new TypeError(M);return n},x.reduceRight=x.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=x.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var a=x.keys(t);s=a.length}if(D(t,function(o,u,l){u=a?a[--s]:--s,r?n=e.call(i,n,t[u],u,l):(n=t[u],r=!0)}),!r)throw new TypeError(M);return n},x.find=x.detect=function(t,e,n){var i;return S(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},x.filter=x.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(D(t,function(t,r,s){e.call(n,t,r,s)&&i.push(t)}),i)},x.reject=function(t,e,n){return x.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},x.every=x.all=function(t,e,i){e||(e=x.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,i):(D(t,function(t,s,a){return(r=r&&e.call(i,t,s,a))?void 0:n}),!!r)};var S=x.some=x.any=function(t,e,i){e||(e=x.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(D(t,function(t,s,a){return r||(r=e.call(i,t,s,a))?n:void 0}),!!r)};x.contains=x.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):S(t,function(t){return t===e})},x.invoke=function(t,e){var n=o.call(arguments,2),i=x.isFunction(e);return x.map(t,function(t){return(i?e:t[e]).apply(t,n)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matches(e))},x.findWhere=function(t,e){return x.find(t,x.matches(e))},x.max=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return D(t,function(t,s,a){var o=e?e.call(n,t,s,a):t;o>r&&(i=t,r=o)}),i},x.min=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,r=1/0;return D(t,function(t,s,a){var o=e?e.call(n,t,s,a):t;r>o&&(i=t,r=o)}),i},x.shuffle=function(t){var e,n=0,i=[];return D(t,function(t){e=x.random(n++),i[n-1]=i[e],i[e]=t}),i},x.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return null==t?x.identity:x.isFunction(t)?t:x.property(t)};x.sortBy=function(t,e,n){return e=T(e),x.pluck(x.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,i){var r={};return n=T(n),D(e,function(s,a){var o=n.call(i,s,a,e);t(r,o,s)}),r}};x.groupBy=C(function(t,e,n){x.has(t,e)?t[e].push(n):t[e]=[n]}),x.indexBy=C(function(t,e,n){t[e]=n}),x.countBy=C(function(t,e){x.has(t,e)?t[e]++:t[e]=1}),x.sortedIndex=function(t,e,n,i){n=T(n);for(var r=n.call(i,e),s=0,a=t.length;a>s;){var o=s+a>>>1;n.call(i,t[o])<r?s=o+1:a=o}return s},x.toArray=function(t){return t?x.isArray(t)?o.call(t):t.length===+t.length?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:o.call(t,0,e)},x.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},x.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var $=function(t,e,n){return e&&x.every(t,x.isArray)?u.apply(n,t):(D(t,function(t){x.isArray(t)||x.isArguments(t)?e?a.apply(n,t):$(t,e,n):n.push(t)}),n)};x.flatten=function(t,e){return $(t,e,[])},x.without=function(t){return x.difference(t,o.call(arguments,1))},x.partition=function(t,e){var n=[],i=[];return D(t,function(t){(e(t)?n:i).push(t)}),[n,i]},x.uniq=x.unique=function(t,e,n,i){x.isFunction(e)&&(i=n,n=e,e=!1);var r=n?x.map(t,n,i):t,s=[],a=[];return D(r,function(n,i){(e?i&&a[a.length-1]===n:x.contains(a,n))||(a.push(n),s.push(t[i]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(t){var e=o.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return x.contains(e,t)})})},x.difference=function(t){var e=u.apply(i,o.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=x.max(x.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=x.pluck(arguments,""+n);return e},x.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},x.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=x.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},x.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(y&&t.lastIndexOf===y)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},x.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=new Array(i);i>r;)s[r++]=t,t+=n;return s};var O=function(){};x.bind=function(t,e){var n,i;if(k&&t.bind===k)return k.apply(t,o.call(arguments,1));if(!x.isFunction(t))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(o.call(arguments)));O.prototype=t.prototype;var r=new O;O.prototype=null;var s=t.apply(r,n.concat(o.call(arguments)));return Object(s)===s?s:r}},x.partial=function(t){var e=o.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,s=i.length;s>r;r++)i[r]===x&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},x.bindAll=function(t){var e=o.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return D(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var n={};return e||(e=x.identity),function(){var i=e.apply(this,arguments);return x.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},x.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(o.call(arguments,1)))},x.throttle=function(t,e,n){var i,r,s,a=null,o=0;n||(n={});var u=function(){o=n.leading===!1?0:x.now(),a=null,s=t.apply(i,r),i=r=null};return function(){var l=x.now();o||n.leading!==!1||(o=l);var c=e-(l-o);return i=this,r=arguments,0>=c?(clearTimeout(a),a=null,o=l,s=t.apply(i,r),i=r=null):a||n.trailing===!1||(a=setTimeout(u,c)),s}},x.debounce=function(t,e,n){var i,r,s,a,o,u=function(){var l=x.now()-a;e>l?i=setTimeout(u,e-l):(i=null,n||(o=t.apply(s,r),s=r=null))};return function(){s=this,r=arguments,a=x.now();var l=n&&!i;return i||(i=setTimeout(u,e)),l&&(o=t.apply(s,r),s=r=null),o}},x.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},x.wrap=function(t,e){return x.partial(e,t)},x.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},x.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},x.keys=function(t){if(!x.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)x.has(t,n)&&e.push(n);return e},x.values=function(t){for(var e=x.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},x.pairs=function(t){for(var e=x.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},x.invert=function(t){for(var e={},n=x.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},x.functions=x.methods=function(t){var e=[];for(var n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=function(t){return D(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},x.pick=function(t){var e={},n=u.apply(i,o.call(arguments,1));return D(n,function(n){n in t&&(e[n]=t[n])}),e},x.omit=function(t){var e={},n=u.apply(i,o.call(arguments,1));for(var r in t)x.contains(n,r)||(e[r]=t[r]);return e},x.defaults=function(t){return D(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var r=l.call(t);if(r!=l.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var a=t.constructor,o=e.constructor;if(a!==o&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var u=0,c=!0;if("[object Array]"==r){if(u=t.length,c=u==e.length)for(;u--&&(c=A(t[u],e[u],n,i)););}else{for(var d in t)if(x.has(t,d)&&(u++,!(c=x.has(e,d)&&A(t[d],e[d],n,i))))break;if(c){for(d in e)if(x.has(e,d)&&!u--)break;c=!u}}return n.pop(),i.pop(),c};x.isEqual=function(t,e){return A(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=w||function(t){return"[object Array]"==l.call(t)},x.isObject=function(t){return t===Object(t)},D(["Arguments","Function","String","Number","Date","RegExp"],function(t){x["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(t){return"function"==typeof t}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return c.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.property=function(t){return function(e){return e[t]}},x.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},x.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var Y={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};Y.unescape=x.invert(Y.escape);var E={escape:new RegExp("["+x.keys(Y.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(Y.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(E[t],function(e){return Y[t][e]})}}),x.result=function(t,e){if(null==t)return void 0;var n=t[e];return x.isFunction(n)?n.call(t):n},x.mixin=function(t){D(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),j.call(this,n.apply(x,t))}})};var N=0;x.uniqueId=function(t){var e=++N+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,n){var i;n=x.defaults({},n,x.templateSettings);var r=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),s=0,a="__p+='";t.replace(r,function(e,n,i,r,o){return a+=t.slice(s,o).replace(P,function(t){return"\\"+L[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),s=o+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(e)return i(e,x);var u=function(t){return i.call(this,t,x)};return u.source="function("+(n.variable||"obj")+"){\n"+a+"}",u},x.chain=function(t){return x(t).chain()};var j=function(t){return this._chain?x(t).chain():t};x.mixin(x),D(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],j.call(this,n)}}),D(["concat","join","slice"],function(t){var e=i[t];x.prototype[t]=function(){return j.call(this,e.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){{var r=t.Backbone,s=[],a=(s.push,s.slice);s.splice}e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var r=this,s=n.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var r,s,a,o,u,c,d,h;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(o=t?[t]:n.keys(this._events),u=0,c=o.length;c>u;u++)if(t=o[u],a=this._events[t]){if(this._events[t]=r=[],e||i)for(d=0,h=a.length;h>d;d++)s=a[d],(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&r.push(s);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&c(n,e),i&&c(i,arguments),this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var s=!e&&!i;i||"object"!=typeof e||(i=this),t&&((r={})[t._listenId]=t);for(var a in r)t=r[a],t.off(e,i,this),(s||n.isEmpty(t._events))&&delete this._listeningTo[a];return this}},u=/\s+/,l=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var s=n.split(u),a=0,o=s.length;o>a;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},c=function(t,e){var n,i=-1,r=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},d={listenTo:"on",listenToOnce:"once"};n.each(d,function(t,e){o[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=n.uniqueId("l"));return s[a]=e,r||"object"!=typeof i||(r=this),e[t](i,r,this),this}}),o.bind=o.on,o.unbind=o.off,n.extend(e,o);var h=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var r,s,a,o,u,l,c,d;if(null==t)return this;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;a=i.unset,u=i.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],n.isEqual(d[r],e)||o.push(r),n.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,a?delete d[r]:d[r]=e;if(!u){o.length&&(this._pending=i);for(var h=0,p=o.length;p>h;h++)this.trigger("change:"+o[h],this,d[o[h]],i)}if(l)return this;if(!u)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)n.isEqual(r[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},P(this,t),this.sync("read",this,t)},save:function(t,e,i){var r,s,a,o=this.attributes;if(null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},o,r)),void 0===i.parse&&(i.parse=!0);var u=this,l=i.success;return i.success=function(t){u.attributes=o;var e=u.parse(t,i);return i.wait&&(e=n.extend(r||{},e)),n.isObject(e)&&!u.set(e,i)?!1:(l&&l(u,t,i),void u.trigger("sync",u,t,i))},P(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=r),a=this.sync(s,this,i),r&&i.wait&&(this.attributes=o),a},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&r(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;P(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(t){h.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(f.prototype,o,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var r,s,a,o;for(r=0,s=t.length;s>r;r++)o=t[r]=this.get(t[r]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,m),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var r,s,a,o,u,l,c,d=e.at,p=this.model,f=this.comparator&&null==d&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],_=[],y={},w=e.add,b=e.merge,k=e.remove,x=!f&&w&&k?[]:!1;for(r=0,s=t.length;s>r;r++){if(u=t[r]||{},a=u instanceof h?o=u:u[p.prototype.idAttribute||"id"],l=this.get(a))k&&(y[l.cid]=!0),b&&(u=u===o?o.attributes:u,e.parse&&(u=l.parse(u,e)),l.set(u,e),f&&!c&&l.hasChanged(g)&&(c=!0)),t[r]=l;else if(w){if(o=t[r]=this._prepareModel(u,e),!o)continue;v.push(o),this._addReference(o,e)}o=l||o,!x||!o.isNew()&&y[o.id]||x.push(o),y[o.id]=!0}if(k){for(r=0,s=this.length;s>r;++r)y[(o=this.models[r]).cid]||_.push(o);_.length&&this.remove(_,e)}if(v.length||x&&x.length)if(f&&(c=!0),this.length+=v.length,null!=d)for(r=0,s=v.length;s>r;r++)this.models.splice(d+r,0,v[r]);else{x&&(this.models.length=0);var D=x||v;for(r=0,s=D.length;s>r;r++)this.models.push(D[r])}if(c&&this.sort({silent:!0}),!e.silent){for(r=0,s=v.length;s>r;r++)(o=v[r]).trigger("add",o,this,e);(c||x&&x.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},P(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,r=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),r&&r(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(t){f.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var _=["groupBy","countBy","sortBy","indexBy"];n.each(_,function(t){f.prototype[t]=function(e,i){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,i)}});var y=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var r=e.match(w),s=r[1],a=r[2];i=n.bind(i,this),s+=".delegateEvents"+this.cid,""===a?this.$el.on(s,i):this.$el.on(s,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,r){var s=x[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||L()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",r.emulateJSON&&(a.data._method=s);var o=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===a.type||r.emulateJSON||(a.processData=!1),"PATCH"===a.type&&k&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=r.xhr=e.ajax(n.extend(a,r));return i.trigger("request",i,u,r),u};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var D=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,T=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(D.prototype,o,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return e.history.route(t,function(n){var a=s._extractParameters(t,n);s.execute(r,a),s.trigger.apply(s,["route:"+i].concat(a)),s.trigger("route",i,a),e.history.trigger("route",s,i,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this
},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(M,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var $=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,Y=/msie [\w.]+/,E=/\/$/,N=/#.*$/;$.started=!1,n.extend($.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(E,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(O,"")},start:function(t){if($.started)throw new Error("Backbone.history has already been started");$.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,s=Y.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(A,"/"),s&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(O,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),$.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!$.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(N,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new $;var I=function(t,e){var i,r=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,t&&n.extend(i.prototype,t),i.__super__=r.prototype,i};h.extend=f.extend=D.extend=y.extend=$.extend=I;var L=function(){throw new Error('A "url" property or function must be specified')},P=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(t,e){return function(n){return c(t.call(this,n),e)}}function i(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function r(){}function s(t){k(t),o(this,t)}function a(t){var e=g(t),n=e.year||0,i=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,o=e.minute||0,u=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*u+6e4*o+36e5*a,this._days=+s+7*r,this._months=+i+12*n,this._data={},this._bubble()}function o(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function u(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&ge.hasOwnProperty(e)&&(n[e]=t[e]);return n}function l(t){return 0>t?Math.ceil(t):Math.floor(t)}function c(t,e,n){for(var i=""+Math.abs(t),r=t>=0;i.length<e;)i="0"+i;return(r?n?"+":"":"-")+i}function d(t,e,n,i){var r,s,a=e._milliseconds,o=e._days,u=e._months;a&&t._d.setTime(+t._d+a*n),(o||u)&&(r=t.minute(),s=t.hour()),o&&t.date(t.date()+o*n),u&&t.month(t.month()+u*n),a&&!i&&ie.updateOffset(t),(o||u)&&(t.minute(r),t.hour(s))}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function f(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&_(t[i])!==_(e[i]))&&a++;return a+s}function m(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Ge[t]||Ve[e]||e}return t}function g(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=m(n),e&&(i[e]=t[n]));return i}function v(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}ie[e]=function(r,s){var a,o,u=ie.fn._lang[e],l=[];if("number"==typeof r&&(s=r,r=t),o=function(t){var e=ie().utc().set(i,t);return u.call(ie.fn._lang,e,r||"")},null!=s)return o(s);for(a=0;n>a;a++)l.push(o(a));return l}}function _(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function y(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function w(t){return b(t)?366:365}function b(t){return t%4===0&&t%100!==0||t%400===0}function k(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[le]<0||t._a[le]>11?le:t._a[ce]<1||t._a[ce]>y(t._a[ue],t._a[le])?ce:t._a[de]<0||t._a[de]>23?de:t._a[he]<0||t._a[he]>59?he:t._a[pe]<0||t._a[pe]>59?pe:t._a[fe]<0||t._a[fe]>999?fe:-1,t._pf._overflowDayOfYear&&(ue>e||e>ce)&&(e=ce),t._pf.overflow=e)}function x(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function D(t){return t?t.toLowerCase().replace("_","-"):t}function M(t,e){return e._isUTC?ie(t).zone(e._offset||0):ie(t).local()}function S(t,e){return e.abbr=t,me[t]||(me[t]=new r),me[t].set(e),me[t]}function T(t){delete me[t]}function C(t){var e,n,i,r,s=0,a=function(t){if(!me[t]&&ve)try{require("./lang/"+t)}catch(e){}return me[t]};if(!t)return ie.fn._lang;if(!h(t)){if(n=a(t))return n;t=[t]}for(;s<t.length;){for(r=D(t[s]).split("-"),e=r.length,i=D(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=a(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&f(r,i,!0)>=e-1)break;e--}s++}return ie.fn._lang}function $(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function O(t){var e,n,i=t.match(be);for(e=0,n=i.length;n>e;e++)i[e]=Ze[i[e]]?Ze[i[e]]:$(i[e]);return function(r){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(r,t):i[e];return s}}function A(t,e){return t.isValid()?(e=Y(e,t.lang()),qe[e]||(qe[e]=O(e)),qe[e](t)):t.lang().invalidDate()}function Y(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(ke.lastIndex=0;i>=0&&ke.test(t);)t=t.replace(ke,n),ke.lastIndex=0,i-=1;return t}function E(t,e){var n,i=e._strict;switch(t){case"DDDD":return Ne;case"YYYY":case"GGGG":case"gggg":return i?Ie:Me;case"Y":case"G":case"g":return Pe;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Le:Se;case"S":if(i)return Ye;case"SS":if(i)return Ee;case"SSS":if(i)return Ne;case"DDD":return De;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ce;case"a":case"A":return C(e._l)._meridiemParse;case"X":return Ae;case"Z":case"ZZ":return $e;case"T":return Oe;case"SSSS":return Te;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ee:xe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xe;default:return n=new RegExp(U(W(t.replace("\\","")),"i"))}}function N(t){t=t||"";var e=t.match($e)||[],n=e[e.length-1]||[],i=(n+"").match(Fe)||["-",0,0],r=+(60*i[1])+_(i[2]);return"+"===i[0]?-r:r}function I(t,e,n){var i,r=n._a;switch(t){case"M":case"MM":null!=e&&(r[le]=_(e)-1);break;case"MMM":case"MMMM":i=C(n._l).monthsParse(e),null!=i?r[le]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[ce]=_(e));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=_(e));break;case"YY":r[ue]=_(e)+(_(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":r[ue]=_(e);break;case"a":case"A":n._isPm=C(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":r[de]=_(e);break;case"m":case"mm":r[he]=_(e);break;case"s":case"ss":r[pe]=_(e);break;case"S":case"SS":case"SSS":case"SSSS":r[fe]=_(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=N(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function L(t){var e,n,i,r,s,a,o,u,l,c,d=[];if(!t._d){for(i=j(t),t._w&&null==t._a[ce]&&null==t._a[le]&&(s=function(e){var n=parseInt(e,10);return e?e.length<3?n>68?1900+n:2e3+n:n:null==t._a[ue]?ie().weekYear():t._a[ue]},a=t._w,null!=a.GG||null!=a.W||null!=a.E?o=J(s(a.GG),a.W||1,a.E,4,1):(u=C(t._l),l=null!=a.d?q(a.d,u):null!=a.e?parseInt(a.e,10)+u._week.dow:0,c=parseInt(a.w,10)||1,null!=a.d&&l<u._week.dow&&c++,o=J(s(a.gg),c,l,u._week.doy,u._week.dow)),t._a[ue]=o.year,t._dayOfYear=o.dayOfYear),t._dayOfYear&&(r=null==t._a[ue]?i[ue]:t._a[ue],t._dayOfYear>w(r)&&(t._pf._overflowDayOfYear=!0),n=V(r,0,t._dayOfYear),t._a[le]=n.getUTCMonth(),t._a[ce]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=d[e]=i[e];for(;7>e;e++)t._a[e]=d[e]=null==t._a[e]?2===e?1:0:t._a[e];d[de]+=_((t._tzm||0)/60),d[he]+=_((t._tzm||0)%60),t._d=(t._useUTC?V:G).apply(null,d)}}function P(t){var e;t._d||(e=g(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],L(t))}function j(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function R(t){t._a=[],t._pf.empty=!0;var e,n,i,r,s,a=C(t._l),o=""+t._i,u=o.length,l=0;for(i=Y(t._f,a).match(be)||[],e=0;e<i.length;e++)r=i[e],n=(o.match(E(r,t))||[])[0],n&&(s=o.substr(0,o.indexOf(n)),s.length>0&&t._pf.unusedInput.push(s),o=o.slice(o.indexOf(n)+n.length),l+=n.length),Ze[r]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(r),I(r,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=u-l,o.length>0&&t._pf.unusedInput.push(o),t._isPm&&t._a[de]<12&&(t._a[de]+=12),t._isPm===!1&&12===t._a[de]&&(t._a[de]=0),L(t),k(t)}function W(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})}function U(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function F(t){var n,i,r,s,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)a=0,n=o({},t),n._pf=e(),n._f=t._f[s],R(n),x(n)&&(a+=n._pf.charsLeftOver,a+=10*n._pf.unusedTokens.length,n._pf.score=a,(null==r||r>a)&&(r=a,i=n));o(t,i||n)}function H(t){var e,n,i=t._i,r=je.exec(i);if(r){for(t._pf.iso=!0,e=0,n=We.length;n>e;e++)if(We[e][1].exec(i)){t._f=We[e][0]+(r[6]||" ");break}for(e=0,n=Ue.length;n>e;e++)if(Ue[e][1].exec(i)){t._f+=Ue[e][0];break}i.match($e)&&(t._f+="Z"),R(t)}else t._d=new Date(i)}function z(e){var n=e._i,i=_e.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?H(e):h(n)?(e._a=n.slice(0),L(e)):p(n)?e._d=new Date(+n):"object"==typeof n?P(e):e._d=new Date(n)}function G(t,e,n,i,r,s,a){var o=new Date(t,e,n,i,r,s,a);return 1970>t&&o.setFullYear(t),o}function V(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function q(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function B(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function X(t,e,n){var i=oe(Math.abs(t)/1e3),r=oe(i/60),s=oe(r/60),a=oe(s/24),o=oe(a/365),u=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===s&&["h"]||22>s&&["hh",s]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",oe(a/30)]||1===o&&["y"]||["yy",o];return u[2]=e,u[3]=t>0,u[4]=n,B.apply({},u)}function Z(t,e,n){var i,r=n-e,s=n-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=ie(t).add("d",s),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function J(t,e,n,i,r){var s,a,o=V(t,0,1).getUTCDay();return n=null!=n?n:r,s=r-o+(o>i?7:0)-(r>o?7:0),a=7*(e-1)+(n-r)+s+1,{year:a>0?t:t-1,dayOfYear:a>0?a:w(t-1)+a}}function Q(t){var e=t._i,n=t._f;return null===e?ie.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=C().preparse(e)),ie.isMoment(e)?(t=u(e),t._d=new Date(+e._d)):n?h(n)?F(t):R(t):z(t),new s(t))}function K(t,e){ie.fn[t]=ie.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),ie.updateOffset(this),this):this._d["get"+n+e]()}}function te(t){ie.duration.fn[t]=function(){return this._data[t]}}function ee(t,e){ie.duration.fn["as"+t]=function(){return+this/e}}function ne(t){var e=!1,n=ie;"undefined"==typeof ender&&(t?(ae.moment=function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},o(ae.moment,n)):ae.moment=ie)}for(var ie,re,se="2.5.1",ae=this,oe=Math.round,ue=0,le=1,ce=2,de=3,he=4,pe=5,fe=6,me={},ge={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ve="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,_e=/^\/?Date\((\-?\d+)/i,ye=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,we=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,be=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ke=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xe=/\d\d?/,De=/\d{1,3}/,Me=/\d{1,4}/,Se=/[+\-]?\d{1,6}/,Te=/\d+/,Ce=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$e=/Z|[\+\-]\d\d:?\d\d/gi,Oe=/T/i,Ae=/[\+\-]?\d+(\.\d{1,3})?/,Ye=/\d/,Ee=/\d\d/,Ne=/\d{3}/,Ie=/\d{4}/,Le=/[+-]?\d{6}/,Pe=/[+-]?\d+/,je=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Re="YYYY-MM-DDTHH:mm:ssZ",We=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ue=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Fe=/([\+\-]|\d\d)/gi,He="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ze={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ge={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ve={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},qe={},Be="DDD w W M D d".split(" "),Xe="M D H h m s w W".split(" "),Ze={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+c(Math.abs(t),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return _(this.milliseconds()/100)},SS:function(){return c(_(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(_(t/60),2)+":"+c(_(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(_(t/60),2)+c(_(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Je=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Be.length;)re=Be.pop(),Ze[re+"o"]=i(Ze[re],re);for(;Xe.length;)re=Xe.pop(),Ze[re+re]=n(Ze[re],2);for(Ze.DDDD=n(Ze.DDD,3),o(r.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=ie.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=ie([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Z(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ie=function(n,i,r,s){var a;return"boolean"==typeof r&&(s=r,r=t),a={},a._isAMomentObject=!0,a._i=n,a._f=i,a._l=r,a._strict=s,a._isUTC=!1,a._pf=e(),Q(a)},ie.utc=function(n,i,r,s){var a;return"boolean"==typeof r&&(s=r,r=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=r,a._i=n,a._f=i,a._strict=s,a._pf=e(),Q(a).utc()},ie.unix=function(t){return ie(1e3*t)},ie.duration=function(t,e){var n,i,r,s=t,o=null;return ie.isDuration(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(o=ye.exec(t))?(n="-"===o[1]?-1:1,s={y:0,d:_(o[ce])*n,h:_(o[de])*n,m:_(o[he])*n,s:_(o[pe])*n,ms:_(o[fe])*n}):(o=we.exec(t))&&(n="-"===o[1]?-1:1,r=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},s={y:r(o[2]),M:r(o[3]),d:r(o[4]),h:r(o[5]),m:r(o[6]),s:r(o[7]),w:r(o[8])}),i=new a(s),ie.isDuration(t)&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},ie.version=se,ie.defaultFormat=Re,ie.updateOffset=function(){},ie.lang=function(t,e){var n;return t?(e?S(D(t),e):null===e?(T(t),t="en"):me[t]||C(t),n=ie.duration.fn._lang=ie.fn._lang=C(t),n._abbr):ie.fn._lang._abbr},ie.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),C(t)},ie.isMoment=function(t){return t instanceof s||null!=t&&t.hasOwnProperty("_isAMomentObject")},ie.isDuration=function(t){return t instanceof a},re=Je.length-1;re>=0;--re)v(Je[re]);for(ie.normalizeUnits=function(t){return m(t)},ie.invalid=function(t){var e=ie.utc(0/0);return null!=t?o(e._pf,t):e._pf.userInvalidated=!0,e},ie.parseZone=function(t){return ie(t).parseZone()},o(ie.fn=s.prototype,{clone:function(){return ie(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=ie(this).utc();return 0<t.year()&&t.year()<=9999?A(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&f(this._a,(this._isUTC?ie.utc(this._a):ie(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=A(this,t||ie.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?ie.duration(+e,t):ie.duration(t,e),d(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?ie.duration(+e,t):ie.duration(t,e),d(this,n,-1),this},diff:function(t,e,n){var i,r,s=M(t,this),a=6e4*(this.zone()-s.zone());return e=m(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+s.daysInMonth()),r=12*(this.year()-s.year())+(this.month()-s.month()),r+=(this-ie(this).startOf("month")-(s-ie(s).startOf("month")))/i,r-=6e4*(this.zone()-ie(this).startOf("month").zone()-(s.zone()-ie(s).startOf("month").zone()))/i,"year"===e&&(r/=12)):(i=this-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?r:l(r)},from:function(t,e){return ie.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ie(),t)},calendar:function(){var t=M(ie(),this).startOf("day"),e=this.diff(t,"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=q(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),ie.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=m(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=m(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ie(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ie(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+M(t,this).startOf(e)},min:function(t){return t=ie.apply(null,arguments),this>t?this:t},max:function(t){return t=ie.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=N(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&d(this,ie.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ie(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return y(this.year(),this.month())},dayOfYear:function(t){var e=oe((ie(this).startOf("day")-ie(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(t){var e=Z(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=Z(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=Z(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=m(t),this[t]()},set:function(t,e){return t=m(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=C(e),this)}}),re=0;re<He.length;re++)K(He[re].toLowerCase().replace(/s$/,""),He[re]);K("year","FullYear"),ie.fn.days=ie.fn.day,ie.fn.months=ie.fn.month,ie.fn.weeks=ie.fn.week,ie.fn.isoWeeks=ie.fn.isoWeek,ie.fn.toJSON=ie.fn.toISOString,o(ie.duration.fn=a.prototype,{_bubble:function(){var t,e,n,i,r=this._milliseconds,s=this._days,a=this._months,o=this._data;o.milliseconds=r%1e3,t=l(r/1e3),o.seconds=t%60,e=l(t/60),o.minutes=e%60,n=l(e/60),o.hours=n%24,s+=l(n/24),o.days=s%30,a+=l(s/30),o.months=a%12,i=l(a/12),o.years=i},weeks:function(){return l(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)},humanize:function(t){var e=+this,n=X(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=ie.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=ie.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=m(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=m(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ie.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||s?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"}});for(re in ze)ze.hasOwnProperty(re)&&(ee(re,ze[re]),te(re.toLowerCase()));ee("Weeks",6048e5),ie.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ie.lang("en",{ordinal:function(t){var e=t%10,n=1===_(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),ve?(module.exports=ie,ne(!0)):"function"==typeof define&&define.amd?define("moment",function(e,n,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&ne(i.config().noGlobal===t),ie}):ne()}.call(this),function(t){if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){if("undefined"==typeof e)throw alert("momentjs is requried"),new Error("momentjs is required");var n=0,r=e,s=function(e,s){var a={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:new r({y:1900}),maxDate:(new r).add(100,"y"),showToday:!0,collapse:!0,language:"en",defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:!1},o={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},u=this,l=function(){var i,l=!1;if(u.options=t.extend({},a,s),u.options.icons=t.extend({},o,u.options.icons),u.element=t(e),d(),!u.options.pickTime&&!u.options.pickDate)throw new Error("Must choose at least one picker");if(u.id=n++,r.lang(u.options.language),u.date=r(),u.unset=!1,u.isInput=u.element.is("input"),u.component=!1,u.element.hasClass("input-group")&&(u.component=u.element.find(0==u.element.find(".datepickerbutton").size()?"[class^='input-group-']":".datepickerbutton")),u.format=u.options.format,i=r()._lang._longDateFormat,u.format||(u.format=u.options.pickDate?i.L:"",u.options.pickDate&&u.options.pickTime&&(u.format+=" "),u.format+=u.options.pickTime?i.LT:"",u.options.useSeconds&&(~i.LT.indexOf(" A")?u.format=u.format.split(" A")[0]+":ss A":u.format+=":ss")),u.use24hours=u.format.toLowerCase().indexOf("a")<1,u.component&&(l=u.component.find("span")),u.options.pickTime&&l&&l.addClass(u.options.icons.time),u.options.pickDate&&l&&(l.removeClass(u.options.icons.time),l.addClass(u.options.icons.date)),u.widget=t(W()).appendTo("body"),u.options.useSeconds&&!u.use24hours&&u.widget.width(300),u.minViewMode=u.options.minViewMode||0,"string"==typeof u.minViewMode)switch(u.minViewMode){case"months":u.minViewMode=1;break;case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.viewMode=u.options.viewMode||0,"string"==typeof u.viewMode)switch(u.viewMode){case"months":u.viewMode=1;break;case"years":u.viewMode=2;break;default:u.viewMode=0}if(u.options.disabledDates=j(u.options.disabledDates),u.options.enabledDates=j(u.options.enabledDates),u.startViewMode=u.viewMode,u.setMinDate(u.options.minDate),u.setMaxDate(u.options.maxDate),g(),v(),y(),w(),b(),m(),C(),$(),""!==u.options.defaultDate&&""==c().val()&&u.setValue(u.options.defaultDate),1!==u.options.minuteStepping){var h=u.date.minutes(),p=u.options.minuteStepping;
u.date.minutes(Math.round(h/p)*p%60).seconds(0)}},c=function(){return u.isInput?u.element:dateStr=u.element.find("input")},d=function(){var t;t=(u.element.is("input"),u.element.data()),void 0!==t.dateFormat&&(u.options.format=t.dateFormat),void 0!==t.datePickdate&&(u.options.pickDate=t.datePickdate),void 0!==t.datePicktime&&(u.options.pickTime=t.datePicktime),void 0!==t.dateUseminutes&&(u.options.useMinutes=t.dateUseminutes),void 0!==t.dateUseseconds&&(u.options.useSeconds=t.dateUseseconds),void 0!==t.dateUsecurrent&&(u.options.useCurrent=t.dateUsecurrent),void 0!==t.dateMinutestepping&&(u.options.minuteStepping=t.dateMinutestepping),void 0!==t.dateMindate&&(u.options.minDate=t.dateMindate),void 0!==t.dateMaxdate&&(u.options.maxDate=t.dateMaxdate),void 0!==t.dateShowtoday&&(u.options.showToday=t.dateShowtoday),void 0!==t.dateCollapse&&(u.options.collapse=t.dateCollapse),void 0!==t.dateLanguage&&(u.options.language=t.dateLanguage),void 0!==t.dateDefaultdate&&(u.options.defaultDate=t.dateDefaultdate),void 0!==t.dateDisableddates&&(u.options.disabledDates=t.dateDisableddates),void 0!==t.dateEnableddates&&(u.options.enabledDates=t.dateEnableddates),void 0!==t.dateIcons&&(u.options.icons=t.dateIcons),void 0!==t.dateUsestrict&&(u.options.useStrict=t.dateUsestrict),void 0!==t.dateDirection&&(u.options.direction=t.dateDirection),void 0!==t.dateSidebyside&&(u.options.sideBySide=t.dateSidebyside)},h=function(){var e="absolute",n=u.component?u.component.offset():u.element.offset(),i=t(window);u.width=u.component?u.component.outerWidth():u.element.outerWidth(),n.top=n.top+u.element.outerHeight();var r;"up"===u.options.direction?r="top":"bottom"===u.options.direction?r="bottom":"auto"===u.options.direction&&(r=n.top+u.widget.height()>i.height()+i.scrollTop()&&u.widget.height()+u.element.outerHeight()<n.top?"top":"bottom"),"top"===r?(n.top-=u.widget.height()+u.element.outerHeight()+15,u.widget.addClass("top").removeClass("bottom")):(n.top+=1,u.widget.addClass("bottom").removeClass("top")),void 0!==u.options.width&&u.widget.width(u.options.width),"left"===u.options.orientation&&(u.widget.addClass("left-oriented"),n.left=n.left-u.widget.width()+20),E()&&(e="fixed",n.top-=i.scrollTop(),n.left-=i.scrollLeft()),i.width()<n.left+u.widget.outerWidth()?(n.right=i.width()-n.left-u.width,n.left="auto",u.widget.addClass("pull-right")):(n.right="auto",u.widget.removeClass("pull-right")),u.widget.css({position:e,top:n.top,left:n.left,right:n.right})},p=function(t,e){r(u.date).isSame(r(t))||(u.element.trigger({type:"dp.change",date:r(u.date),oldDate:r(t)}),"change"!==e&&u.element.change())},f=function(t){u.element.trigger({type:"dp.error",date:r(t)})},m=function(t){r.lang(u.options.language);var e=t;e||(e=c().val(),e&&(u.date=r(e,u.format,u.options.useStrict)),u.date||(u.date=r())),u.viewDate=r(u.date).startOf("month"),_(),k()},g=function(){r.lang(u.options.language);var e,n=t("<tr>"),i=r.weekdaysMin();if(0==r()._lang._week.dow)for(e=0;7>e;e++)n.append('<th class="dow">'+i[e]+"</th>");else for(e=1;8>e;e++)n.append(7==e?'<th class="dow">'+i[0]+"</th>":'<th class="dow">'+i[e]+"</th>");u.widget.find(".datepicker-days thead").append(n)},v=function(){r.lang(u.options.language);for(var t="",e=0,n=r.monthsShort();12>e;)t+='<span class="month">'+n[e++]+"</span>";u.widget.find(".datepicker-months td").append(t)},_=function(){r.lang(u.options.language);var e,n,i,s,a,o,l,c,d=u.viewDate.year(),h=u.viewDate.month(),p=u.options.minDate.year(),f=u.options.minDate.month(),m=u.options.maxDate.year(),g=u.options.maxDate.month(),v=[],_=r.months();for(u.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-days th:eq(1)").text(_[h]+" "+d),e=r(u.viewDate).subtract("months",1),o=e.daysInMonth(),e.date(o).startOf("week"),(d==p&&f>=h||p>d)&&u.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(d==m&&h>=g||d>m)&&u.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),n=r(e).add(42,"d");e.isBefore(n);){if(e.weekday()===r().startOf("week").weekday()&&(i=t("<tr>"),v.push(i)),s="",e.year()<d||e.year()==d&&e.month()<h?s+=" old":(e.year()>d||e.year()==d&&e.month()>h)&&(s+=" new"),e.isSame(r({y:u.date.year(),M:u.date.month(),d:u.date.date()}))&&(s+=" active"),(L(e)||!P(e))&&(s+=" disabled"),u.options.showToday===!0&&e.isSame(r(),"day")&&(s+=" today"),u.options.daysOfWeekDisabled)for(a in u.options.daysOfWeekDisabled)if(e.day()==u.options.daysOfWeekDisabled[a]){s+=" disabled";break}i.append('<td class="day'+s+'">'+e.date()+"</td>"),e.add(1,"d")}for(u.widget.find(".datepicker-days tbody").empty().append(v),c=u.date.year(),_=u.widget.find(".datepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active"),c===d&&_.eq(u.date.month()).addClass("active"),p>c-1&&u.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),c+1>m&&u.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),a=0;12>a;a++)d==p&&f>a||p>d?t(_[a]).addClass("disabled"):(d==m&&a>g||d>m)&&t(_[a]).addClass("disabled");for(v="",d=10*parseInt(d/10,10),l=u.widget.find(".datepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td"),u.widget.find(".datepicker-years").find("th").removeClass("disabled"),p>d&&u.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),d+9>m&&u.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),d-=1,a=-1;11>a;a++)v+='<span class="year'+(-1===a||10===a?" old":"")+(c===d?" active":"")+(p>d||d>m?" disabled":"")+'">'+d+"</span>",d+=1;l.html(v)},y=function(){r.lang(u.options.language);var t,e,n,i=u.widget.find(".timepicker .timepicker-hours table"),s="";if(i.parent().hide(),u.use24hours)for(t=0,e=0;6>e;e+=1){for(s+="<tr>",n=0;4>n;n+=1)s+='<td class="hour">'+R(t.toString())+"</td>",t++;s+="</tr>"}else for(t=1,e=0;3>e;e+=1){for(s+="<tr>",n=0;4>n;n+=1)s+='<td class="hour">'+R(t.toString())+"</td>",t++;s+="</tr>"}i.html(s)},w=function(){var t,e,n=u.widget.find(".timepicker .timepicker-minutes table"),i="",r=0,s=u.options.minuteStepping;for(n.parent().hide(),(s=1)&&(s=5),t=0;t<Math.ceil(60/s/4);t++){for(i+="<tr>",e=0;4>e;e+=1)60>r?(i+='<td class="minute">'+R(r.toString())+"</td>",r+=s):i+="<td></td>";i+="</tr>"}n.html(i)},b=function(){var t,e,n=u.widget.find(".timepicker .timepicker-seconds table"),i="",r=0;for(n.parent().hide(),t=0;3>t;t++){for(i+="<tr>",e=0;4>e;e+=1)i+='<td class="second">'+R(r.toString())+"</td>",r+=5;i+="</tr>"}n.html(i)},k=function(){if(u.date){var t=u.widget.find(".timepicker span[data-time-component]"),e=u.date.hours(),n="AM";u.use24hours||(e>=12&&(n="PM"),0===e?e=12:12!=e&&(e%=12),u.widget.find(".timepicker [data-action=togglePeriod]").text(n)),t.filter("[data-time-component=hours]").text(R(e)),t.filter("[data-time-component=minutes]").text(R(u.date.minutes())),t.filter("[data-time-component=seconds]").text(R(u.date.second()))}},x=function(e){e.stopPropagation(),e.preventDefault(),u.unset=!1;var n,i,s,a,o=t(e.target).closest("span, td, th"),l=r(u.date);if(1===o.length&&!o.is(".disabled"))switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"switch":C(1);break;case"prev":case"next":s=U.modes[u.viewMode].navStep,"prev"===o[0].className&&(s=-1*s),u.viewDate.add(s,U.modes[u.viewMode].navFnc),_()}break;case"span":o.is(".month")?(n=o.parent().find("span").index(o),u.viewDate.month(n)):(i=parseInt(o.text(),10)||0,u.viewDate.year(i)),u.viewMode===u.minViewMode&&(u.date=r({y:u.viewDate.year(),M:u.viewDate.month(),d:u.viewDate.date(),h:u.date.hours(),m:u.date.minutes(),s:u.date.seconds()}),p(l,e.type),N()),C(-1),_();break;case"td":o.is(".day")&&(a=parseInt(o.text(),10)||1,n=u.viewDate.month(),i=u.viewDate.year(),o.is(".old")?0===n?(n=11,i-=1):n-=1:o.is(".new")&&(11==n?(n=0,i+=1):n+=1),u.date=r({y:i,M:n,d:a,h:u.date.hours(),m:u.date.minutes(),s:u.date.seconds()}),u.viewDate=r({y:i,M:n,d:Math.min(28,a)}),_(),N(),p(l,e.type))}},D={incrementHours:function(){I("add","hours",1)},incrementMinutes:function(){I("add","minutes",u.options.minuteStepping)},incrementSeconds:function(){I("add","seconds",1)},decrementHours:function(){I("subtract","hours",1)},decrementMinutes:function(){I("subtract","minutes",u.options.minuteStepping)},decrementSeconds:function(){I("subtract","seconds",1)},togglePeriod:function(){var t=u.date.hours();t>=12?t-=12:t+=12,u.date.hours(t)},showPicker:function(){u.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),u.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var n=u.widget.find(".timepicker [data-action=togglePeriod]").text(),i=parseInt(t(e.target).text(),10);"PM"==n&&(i+=12),u.date.hours(i),D.showPicker.call(u)},selectMinute:function(e){u.date.minutes(parseInt(t(e.target).text(),10)),D.showPicker.call(u)},selectSecond:function(e){u.date.seconds(parseInt(t(e.target).text(),10)),D.showPicker.call(u)}},M=function(e){var n=r(u.date),i=t(e.currentTarget).data("action"),s=D[i].apply(u,arguments);return S(e),u.date||(u.date=r({y:1970})),N(),k(),p(n,e.type),s},S=function(t){t.stopPropagation(),t.preventDefault()},T=function(e){r.lang(u.options.language);var n=t(e.target),i=r(u.date),s=r(n.val(),u.format,u.options.useStrict);s.isValid()&&!L(s)&&P(s)?(m(),u.setValue(s),p(i,e.type),N()):(u.viewDate=i,p(i,e.type),f(s),u.unset=!0)},C=function(t){t&&(u.viewMode=Math.max(u.minViewMode,Math.min(2,u.viewMode+t)));U.modes[u.viewMode].clsName;u.widget.find(".datepicker > div").hide().filter(".datepicker-"+U.modes[u.viewMode].clsName).show()},$=function(){var e,n,i,r,s;u.widget.on("click",".datepicker *",t.proxy(x,this)),u.widget.on("click","[data-action]",t.proxy(M,this)),u.widget.on("mousedown",t.proxy(S,this)),u.options.pickDate&&u.options.pickTime&&u.widget.on("click.togglePicker",".accordion-toggle",function(a){if(a.stopPropagation(),e=t(this),n=e.closest("ul"),i=n.find(".in"),r=n.find(".collapse:not(.in)"),i&&i.length){if(s=i.data("collapse"),s&&s.date-transitioning)return;i.collapse("hide"),r.collapse("show"),e.find("span").toggleClass(u.options.icons.time+" "+u.options.icons.date),u.element.find(".input-group-addon span").toggleClass(u.options.icons.time+" "+u.options.icons.date)}}),u.isInput?u.element.on({focus:t.proxy(u.show,this),change:t.proxy(T,this),blur:t.proxy(u.hide,this)}):(u.element.on({change:t.proxy(T,this)},"input"),u.component?u.component.on("click",t.proxy(u.show,this)):u.element.on("click",t.proxy(u.show,this)))},O=function(){t(window).on("resize.datetimepicker"+u.id,t.proxy(h,this)),u.isInput||t(document).on("mousedown.datetimepicker"+u.id,t.proxy(u.hide,this))},A=function(){u.widget.off("click",".datepicker *",u.click),u.widget.off("click","[data-action]"),u.widget.off("mousedown",u.stopEvent),u.options.pickDate&&u.options.pickTime&&u.widget.off("click.togglePicker"),u.isInput?u.element.off({focus:u.show,change:u.change}):(u.element.off({change:u.change},"input"),u.component?u.component.off("click",u.show):u.element.off("click",u.show))},Y=function(){t(window).off("resize.datetimepicker"+u.id),u.isInput||t(document).off("mousedown.datetimepicker"+u.id)},E=function(){if(u.element){var e,n=u.element.parents(),i=!1;for(e=0;e<n.length;e++)if("fixed"==t(n[e]).css("position")){i=!0;break}return i}return!1},N=function(){r.lang(u.options.language);var t="";u.unset||(t=r(u.date).format(u.format)),c().val(t),u.element.data("date",t),u.options.pickTime||u.hide()},I=function(t,e,n){r.lang(u.options.language);var i;return"add"==t?(i=r(u.date),23==i.hours()&&i.add(n,e),i.add(n,e)):i=r(u.date).subtract(n,e),L(r(i.subtract(n,e)))||L(i)?void f(i.format(u.format)):("add"==t?u.date.add(n,e):u.date.subtract(n,e),void(u.unset=!1))},L=function(t){return r.lang(u.options.language),t.isAfter(u.options.maxDate)||t.isBefore(u.options.minDate)?!0:u.options.disabledDates===!1?!1:u.options.disabledDates[r(t).format("YYYY-MM-DD")]===!0},P=function(t){return r.lang(u.options.language),u.options.enabledDates===!1?!0:u.options.enabledDates[r(t).format("YYYY-MM-DD")]===!0},j=function(t){var e={},n=0;for(i=0;i<t.length;i++)dDate=r(t[i]),dDate.isValid()&&(e[dDate.format("YYYY-MM-DD")]=!0,n++);return n>0?e:!1},R=function(t){return t=t.toString(),t.length>=2?t:"0"+t},W=function(){if(u.options.pickDate&&u.options.pickTime){var t="";return t='<div class="bootstrap-datetimepicker-widget'+(u.options.sideBySide?" timepicker-sbs":"")+' dropdown-menu" style="z-index:9999 !important;">',t+=u.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+U.template+'</div><div class="col-sm-6 timepicker">'+F.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(u.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+U.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+u.options.icons.time+'"></span></a></li><li'+(u.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+F.getTemplate()+"</div></li></ul>",t+="</div>"}return u.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+F.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+U.template+"</div></div>"},U={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},F={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};U.template='<div class="datepicker-days"><table class="table-condensed">'+U.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+U.headTemplate+U.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+U.headTemplate+U.contTemplate+"</table></div>",F.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+u.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(u.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+u.options.icons.up+'"></span></a>':"")+"</td>"+(u.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+u.options.icons.up+'"></span></a></td>':"")+(u.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+F.hourTemplate+'</td> <td class="separator">:</td><td>'+(u.options.useMinutes?F.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(u.options.useSeconds?'<td class="separator">:</td><td>'+F.secondTemplate+"</td>":"")+(u.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+u.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(u.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+u.options.icons.down+'"></span></a>':"")+"</td>"+(u.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+u.options.icons.down+'"></span></a></td>':"")+(u.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(u.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},u.destroy=function(){A(),Y(),u.widget.remove(),u.element.removeData("DateTimePicker"),u.component&&u.component.removeData("DateTimePicker")},u.show=function(t){u.options.useCurrent===!0&&""==c().val()&&u.setValue(r().format(u.format)),u.widget.show(),u.height=u.component?u.component.outerHeight():u.element.outerHeight(),h(),u.element.trigger({type:"dp.show",date:r(u.date)}),O(),t&&S(t)},u.disable=function(){var t=u.element.find("input");t.prop("disabled")||(t.prop("disabled",!0),A())},u.enable=function(){var t=u.element.find("input");t.prop("disabled")&&(t.prop("disabled",!1),$())},u.hide=function(e){if(!e||!t(e.target).is(u.element.attr("id"))){var n,i,s=u.widget.find(".collapse");for(n=0;n<s.length;n++)if(i=s.eq(n).data("collapse"),i&&i.date-transitioning)return;u.widget.hide(),u.viewMode=u.startViewMode,C(),u.element.trigger({type:"dp.hide",date:r(u.date)}),Y()}},u.setValue=function(t){r.lang(u.options.language),t?u.unset=!1:(u.unset=!0,N()),r.isMoment(t)||(t=r(t)),t.isValid()?(u.date=t,N(),u.viewDate=r({y:u.date.year(),M:u.date.month()}),_(),k()):f(t)},u.getDate=function(){return u.unset?null:u.date},u.setDate=function(t){var e=r(u.date);u.setValue(t?t:null),p(e,"function")},u.setDisabledDates=function(t){u.options.disabledDates=j(t),u.viewDate&&m()},u.setEnabledDates=function(t){u.options.enabledDates=j(t),u.viewDate&&m()},u.setMaxDate=function(t){void 0!=t&&(u.options.maxDate=r(t),u.viewDate&&m())},u.setMinDate=function(t){void 0!=t&&(u.options.minDate=r(t),u.viewDate&&m())},l()};t.fn.datetimepicker=function(e){return this.each(function(){var n=t(this),i=n.data("DateTimePicker");i||n.data("DateTimePicker",new s(this,e))})}}),function(t,e){function n(e,n){var r,s,a,o=e.nodeName.toLowerCase();return"area"===o?(r=e.parentNode,s=r.name,e.href&&s&&"map"===r.nodeName.toLowerCase()?(a=t("img[usemap=#"+s+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,s=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,r,s=t(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(s.css("zIndex"),10),!isNaN(r)&&0!==r))return r;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function r(e,n,i,r){return t.each(s,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var s="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?o["inner"+i].call(this):this.each(function(){t(this).css(a,r(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(a,r(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var r,s=t.ui[e].prototype;for(r in i)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([n,i[r]])},call:function(t,e,n){var i,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)t.options[r[i][0]]&&r[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0?!0:(e[i]=1,r=e[i]>0,e[i]=0,r)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(s){}r(e)},t.widget=function(e,n,i){var r,s,a,o,u={},l=e.split(".")[0];e=e.split(".")[1],r=l+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[l]=t[l]||{},s=t[l][e],a=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,s,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),o=new n,o.options=t.widget.extend({},o.options),t.each(i,function(e,i){return t.isFunction(i)?void(u[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,s=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=s,e}}()):void(u[e]=i)}),a.prototype=t.widget.extend(o,{widgetEventPrefix:s?o.widgetEventPrefix||e:e},u,{constructor:a,namespace:l,widgetName:e,widgetFullName:r}),s?(t.each(s._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete s._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(n){for(var r,s,a=i.call(arguments,1),o=0,u=a.length;u>o;o++)for(r in a[o])s=a[o][r],a[o].hasOwnProperty(r)&&s!==e&&(n[r]=t.isPlainObject(s)?t.isPlainObject(n[r])?t.widget.extend({},n[r],s):t.widget.extend({},s):s);return n},t.widget.bridge=function(n,r){var s=r.prototype.widgetFullName||n;t.fn[n]=function(a){var o="string"==typeof a,u=i.call(arguments,1),l=this;return a=!o&&u.length?t.widget.extend.apply(null,[a].concat(u)):a,this.each(o?function(){var i,r=t.data(this,s);return r?t.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,u),i!==r&&i!==e?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+a+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,s);e?e.option(a||{})._init():t.data(this,s,new r(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,s,a,o=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(o={},r=n.split("."),n=r.shift(),r.length){for(s=o[n]=t.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)s[r[a]]=s[r[a]]||{},s=s[r[a]];if(n=r.pop(),1===arguments.length)return s[n]===e?null:s[n];s[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var r,s=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function o(){return e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):void 0}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||t.guid++);var u=i.match(/^(\w+)\s*(.*)$/),l=u[1]+s.eventNamespace,c=u[2];c?r.delegate(c,l,o):n.bind(l,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,s,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(r in s)r in n||(n[r]=s[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,s){"string"==typeof r&&(r={effect:r});var a,o=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=s,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[o]?i[e](r):o!==e&&i[o]?i[o](r.duration,r.easing,s):i.queue(function(n){t(this)[e](),s&&s.call(i[0]),n()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,s="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),e=r.length;n>e;e++)a.push(s);this.handles=r.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)
},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,r,s,a,o,u,l,c=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-c.values(e));(r>n||r===n&&(e===c._lastChangedValue||c.values(e)===d.min))&&(r=n,s=t(this),a=e)}),o=this._start(e,a),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,s.addClass("ui-state-active").focus(),u=s.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-u.left-s.width()/2,top:e.pageY-u.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,s;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),s=this._valueMin()+i*r,this._trimAlignValue(s)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,r,s;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>i||1===e&&i>n)&&(n=i),n!==this.values(e)&&(r=this.values(),r[e]=n,s=this._trigger("slide",t,{handle:this.handles[e],value:n,values:r}),i=this.values(e?0:1),s!==!1&&this.values(e,n))):n!==this.value()&&(s=this._trigger("slide",t,{handle:this.handles[e],value:n}),s!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,r,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,r=arguments[0],s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(r[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,n){var i,r=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,r,s,a=this.options.range,o=this.options,u=this,l=this._animateOff?!1:o.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=(u.values(i)-u._valueMin())/(u._valueMax()-u._valueMin())*100,c["horizontal"===u.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[l?"animate":"css"](c,o.animate),u.options.range===!0&&("horizontal"===u.orientation?(0===i&&u.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},o.animate),1===i&&u.range[l?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:o.animate})):(0===i&&u.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},o.animate),1===i&&u.range[l?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:o.animate}))),e=n}):(i=this.value(),r=this._valueMin(),s=this._valueMax(),n=s!==r?(i-r)/(s-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](c,o.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},o.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:o.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},o.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(n){var i,r,s,a,o=t(n.target).data("ui-slider-handle-index");switch(n.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(n.target).addClass("ui-state-active"),i=this._start(n,o),i===!1))return}switch(a=this.options.step,r=s=this.options.values&&this.options.values.length?this.values(o):this.value(),n.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(r===this._valueMax())return;s=this._trimAlignValue(r+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(r===this._valueMin())return;s=this._trimAlignValue(r-a)}this._slide(n,o,s)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(jQuery);var status_array_en={ready:"Click on the microphone icon and begin speaking.",active:"Speak now.","no-speech":'No speech was detected. You may need to adjust your <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892"> microphone settings</a>.',"audio-capture":'No microphone was found. Ensure that a microphone is installed and that <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892"> microphone settings</a> are configured correctly.',allow:'Click the "Allow" button above to enable your microphone.',"not-allowed":"Permission to use microphone is denied. To change, go to chrome://settings/contentExceptions#media-stream",upgrade:'Web Speech API is not supported by this browser.  Upgrade to <a href="//www.google.com/chrome">Chrome</a>.'},image_array_mic={ready:"/assets/mic-64613180017f36853cfc3a53e0600a9d.gif",complete:"mic.gif",active:"/assets/mic_animate-517cf92a957a635c69d8a394008568b4.gif","no-speech":"/assets/mic-64613180017f36853cfc3a53e0600a9d.gif",disable:"/assets/mic_slash-a5c6c047e775e2f572a1445e4a988c6f.gif"},TreemapUtils=TreemapUtils||{};TreemapUtils.KeySpline=function(t){function e(t,e){return 1-3*e+3*t}function n(t,e){return 3*e-6*t}function i(t){return 3*t}function r(t,r,s){return((e(r,s)*t+n(r,s))*t+i(r))*t}function s(t,r,s){return 3*e(r,s)*t*t+2*n(r,s)*t+i(r)}function a(t){for(var e=t,n=0;4>n;++n){var i=s(e,o,l);if(0==i)return e;var a=r(e,o,l)-t;e-=a/i}return e}var o=t.mX1||0,u=t.mY1||0,l=t.mX2||1,c=t.mY2||1;this.get=function(t){return o==u&&l==c?t:r(a(t),u,c)}},TreemapUtils.Easing={ease:{mX1:.25,mY1:.1,mX2:.25,mY2:1},linear:{mX1:0,mY1:0,mX2:1,mY2:1},"ease-in":{mX1:.42,mY1:0,mX2:1,mY2:1},"ease-out":{mX1:0,mY1:0,mX2:.58,mY2:1},"ease-in-out":{mX1:.42,mY1:0,mX2:.58,mY2:1}},TreemapUtils.sumArray=function(){function t(t,e){return t+e}return function(e){return e.reduce(t)}}(),TreemapUtils.deepCopy=function(t){if("[object Array]"===Object.prototype.toString.call(t)){for(var e=[],n=0,i=t.length;i>n;n++)e[n]=arguments.callee(t[n]);return e}if("object"==typeof t){var n,e={};for(n in t)e[n]=arguments.callee(t[n]);return e}return t},TreemapUtils.changeColor=function(t,e,n){t=t.replace(/^\s*|\s*$/,""),t=t.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var i=Math.round(256*e)*(n?-1:1),r=t.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),s=r&&null!==r[4]?r[4]:null,a=r?[r[1],r[2],r[3]]:t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(t,e,n,i){return parseInt(e,16)+","+parseInt(n,16)+","+parseInt(i,16)}).split(/,/);return r?"rgb"+(null!==s?"a":"")+"("+Math[n?"max":"min"](parseInt(a[0],10)+i,n?0:255)+", "+Math[n?"max":"min"](parseInt(a[1],10)+i,n?0:255)+", "+Math[n?"max":"min"](parseInt(a[2],10)+i,n?0:255)+(null!==s?", "+s:"")+")":["#",Math[n?"max":"min"](parseInt(a[0],10)+i,n?0:255).toString(16).lpad("0",2),Math[n?"max":"min"](parseInt(a[1],10)+i,n?0:255).toString(16).lpad("0",2),Math[n?"max":"min"](parseInt(a[2],10)+i,n?0:255).toString(16).lpad("0",2)].join("")},TreemapUtils.lighterColor=function(t,e){return TreemapUtils.changeColor(t,e,!1)},TreemapUtils.darkerColor=function(t,e){return TreemapUtils.changeColor(t,e,!0)},TreemapUtils.rgb2hex=function(t){var e="#"+(t[2]|t[1]<<8|t[0]<<16).toString(16).lpad("0",6);return e},TreemapUtils.avgRgb=function(t){return Math.floor(TreemapUtils.sumArray(t)/3)},TreemapUtils.hex2rgb=function(t){return t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(t,e,n,i){return parseInt(e,16)+","+parseInt(n,16)+","+parseInt(i,16)}).split(/,/)},TreemapUtils.squarify=function(t,e){var n,i=function(t){this.setX=function(e){t[2]-=e-t[0],t[0]=e},this.setY=function(e){t[3]-=e-t[1],t[1]=e},this.getX=function(){return t[0]},this.getY=function(){return t[1]},this.getW=function(){return t[2]},this.getH=function(){return t[3]},this.getWidth=function(){return Math.min(t[2],t[3])}},r=function(t,e){var n=Math.max.apply(null,t),i=Math.min.apply(null,t),r=TreemapUtils.sumArray(t),s=r*r,a=e*e;return Math.max(a*n/s,s/(a*i))},s=function(t){var e,n,i,r=c.getX(),s=c.getY(),a=r+c.getW(),o=s+c.getH();if(c.getW()<c.getH()){for(e=Math.ceil(TreemapUtils.sumArray(t)/c.getW()),s+e>=o&&(e=o-s),n=0;n<t.length;n++)i=Math.ceil(t[n]/e),(r+i>a||n+1===t.length)&&(i=a-r),u.push([r,s,i,e]),r+=i;c.setY(s+e)}else{for(e=Math.ceil(TreemapUtils.sumArray(t)/c.getH()),r+e>=a&&(e=a-r),n=0;n<t.length;n++)i=Math.ceil(t[n]/e),(s+i>o||n+1===t.length)&&(i=o-s),u.push([r,s,e,i]),s+=i;c.setX(r+e)}},a=function(t){var e=[];if(e.push(t.shift()),0===t.length)return e;var n=e.slice(),i=c.getWidth();do{if(n.push(t[0]),!(r(e,i)>r(n,i)))break;e=n.slice(),t.shift()}while(t.length>0);return e},o=function(t){do s(a(t));while(t.length>0)},u=[],l=[];if(t[2]<=0||t[3]<=0)for(n=0;n<e.length;n++)u.push(t.slice());else{l=e.map(function(e){return e*t[2]*t[3]});var c=new i(t.slice());o(l)}return u},function(t){t.widget("ui.treemap",{options:{dimensions:[1080,400],colorStops:[{val:0,color:"#08f"},{val:.5,color:"#03f"},{val:1,color:"#005"}],colorResolution:1024,naColor:"#000",innerNodeHeaderHeightPx:12,innerNodeHeaderLabeller:function(t,e,n,i){t.rect(e[0],e[1],e[2],e[3]),t.clip(),t.fillStyle="#555",t.font="0.625em Verdana, Geneva, sans-serif",t.fillText(i,e[0],e[1]+10)},innerNodeHeaderGradient:function(t,e){var n=t.createLinearGradient(e[0],e[1],e[0],e[1]+e[3]);return n.addColorStop(0,"#ccc"),n.addColorStop(.5,"#fff"),n.addColorStop(.9,"#fff"),n.addColorStop(1,"#555"),n},leafNodeBodyLabeller:function(t,e,n,i){t.rect(e[0],e[1],e[2],e[3]),t.clip(),t.fillStyle=TreemapUtils.avgRgb(n)<=200?"#fff":"#888",t.font="0.9em Lucida Grande, Geneva, sans-serif; margin-top: 20px",t.fillText(i,e[0],e[1]+10)},leafNodeBodyGradient:function(t,e,n){var i=.1*Math.min(e[2],e[3]),r=Math.max(e[2],e[3]),s=e[0]+.5*e[2],a=e[1]+.5*e[3],o=t.createRadialGradient(s,a,i,s,a,r);return o.addColorStop(0,TreemapUtils.lighterColor(TreemapUtils.rgb2hex(n),.2)),o.addColorStop(1,TreemapUtils.darkerColor(TreemapUtils.rgb2hex(n),.2)),o},layoutMethod:TreemapUtils.squarify,sizeOption:0,colorOption:0,nodeBorderWidth:.5,labelsEnabled:!0,animationEnabled:!0,animationDurationMs:1e3,animationEasing:{},postProcessCurve:{},nodeData:{}},_create:function(){this.stats={}},_init:function(){this.stats={},this._refreshCanvas(),this._refreshColorGradient(),this._refreshColor(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels()},_setOption:function(e){switch(t.Widget.prototype._setOption.apply(this,arguments),e){case"dimensions":this._refreshCanvas(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels();break;case"layoutMethod":this._refreshLayout(),this._renderNodes(),this._renderNodeLabels();break;case"labelsEnabled":this._renderNodes(),this._renderNodeLabels();break;case"leafNodeBodyGradient":this._renderNodes(),this._renderNodeLabels();break;case"colorStops":this._refreshColorGradient(),this._refreshColor(),this._renderNodes(),this._renderNodeLabels();break;case"colorOption":this._refreshColor(),this._renderNodes(),this._renderNodeLabels();break;case"sizeOption":this._refreshLayout(),this._animateOptionChange();break;case"postProcessCurve":this._refreshLayout(),this._animateOptionChange();break;case"nodeData":this._refreshColor(),this._refreshLayout(),this._renderNodes(),this._renderNodeLabels()}},_animateOptionChange:function(){function t(r){var r=Date.now(),s=r-n;s<i.options.animationDurationMs?(i._animateNodes(e.get(s/i.options.animationDurationMs)),requestAnimationFrame(t)):(i._animationActive=!1,i._renderNodes(),i._renderNodeLabels())}if(1==this.options.animationEnabled){!function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};window.requestAnimationFrame=t}(),this._animationActive=!0;var e=new TreemapUtils.KeySpline(this.options.animationEasing),n=Date.now(),i=this;requestAnimationFrame(t)}else this._renderNodes(),this._renderNodeLabels()},_animateNodes:function(t){var e=function(i){var s,a,o;for(a=0;a<i.length;a++)if(i[a].hasOwnProperty("children")===!1){if(void 0!==i[a].prevGeometry)for(s=i[a].prevGeometry.body.slice(),o=0;4>o;o++)s[o]+=(i[a].geometry.body[o]-i[a].prevGeometry.body[o])*t;else s=i[a].geometry.body;r.save(),r.fillStyle=n.options.leafNodeBodyGradient.call(n,r,s,i[a].computedColor),r.fillRect(s[0],s[1],s[2],s[3]),r.restore()}else e(i[a].children)},n=this,i=n.element.find("canvas")[0],r=i.getContext("2d");r.clearRect(0,0,i.width,i.height),e([n.options.nodeData])},_renderNodes:function(){if(void 0===this._animationActive||this._animationActive!==!0){var t=function(n){var i,s,a,o,u;for(o=0;o<n.length;o++){if(e._isRootNode(n[o])===!1){if(i=n[o].geometry.body,s=n[o].geometry.header,a=i.slice(),i[2]<=0||i[3]<=0)continue;for(r.save(),n[o].hasOwnProperty("children")&&null!==s?(r.fillStyle=e.options.innerNodeHeaderGradient.call(e,r,s,n[o].computedColor),r.fillRect(s[0],s[1],s[2],s[3]),n[o].hasOwnProperty("children")&&0===e.options.nodeBorderWidth&&(r.strokeStyle="#000",r.lineWidth=.5,r.beginPath(),r.moveTo(s[0]+s[2],s[1]),r.lineTo(s[0]+s[2],s[1]+s[3]),r.closePath(),r.stroke()),a[0]=s[0],a[1]=s[1],a[3]=s[3]+i[3]):(r.fillStyle=e.options.leafNodeBodyGradient.call(e,r,i,n[o].computedColor),r.fillRect(i[0],i[1],i[2],i[3])),r.restore(),u=0;u<a[3];u++)e._addRunlength(a[0],a[0]+a[2],a[1]+u,n[o].id)}n[o].hasOwnProperty("children")&&t(n[o].children)}},e=this,n=new Date,i=e.element.find("canvas")[0],r=i.getContext("2d");r.clearRect(0,0,i.width,i.height),e._clearScanLines(),t([e.options.nodeData]);var s=new Date;e.stats.renderLayoutMsec=s-n}},_renderNodeLabels:function(){if((void 0===this._animationActive||this._animationActive!==!0)&&this.options.labelsEnabled===!0){var t=function(n){var i,s,a;for(a=0;a<n.length;a++){if(e._isRootNode(n[a])===!1){if(i=n[a].geometry.body,s=n[a].geometry.header,i[2]<=0||i[3]<=0){n[a].hasOwnProperty("children")===!1&&(e.stats.leafNodeCnt+=1);continue}r.save(),r.beginPath(),n[a].hasOwnProperty("children")?null!==s&&e.options.innerNodeHeaderLabeller.call(e,r,s,n[a].computedColor,n[a].id):(e.options.leafNodeBodyLabeller.call(e,r,i,n[a].computedColor,n[a].id),e.stats.leafNodeCnt+=1,e.stats.renderedLeafNodeCnt+=1),r.restore()}n[a].hasOwnProperty("children")&&t(n[a].children)}},e=this;e.stats.leafNodeCnt=0,e.stats.renderedLeafNodeCnt=0;var n=new Date,i=e.element.find("canvas")[0],r=i.getContext("2d");t([e.options.nodeData]);var s=new Date;e.stats.renderLabelsMsec=s-n}},_refreshCanvas:function(){var t=this.element.find("canvas");t&&t.remove(),t=document.createElement("canvas"),t.setAttribute("width",this.options.dimensions[0]),t.setAttribute("height",this.options.dimensions[1]);var e=this;this.element.append(t).mousemove(function(t){if(void 0===e._animationActive||e._animationActive!==!0){var n,i,r,s,a=e.element.offset(),o=parseInt(a.left,10),u=parseInt(a.top,10),l=e.options.dimensions[0],c=e.options.dimensions[1];if(t.pageX<o+l&&t.pageY<u+c){for(n=e._coordsToId(t.pageX-o,t.pageY-u),i=[],s=0;s<n.length;s++)i.push(e._getNode([n[s]]));r={nodes:i,ids:n},e._trigger("mousemove",t,r)}}}).click(function(t){if(void 0===e._animationActive||e._animationActive!==!0){var n,i,r,s,a=e.element.offset(),o=parseInt(a.left,10),u=parseInt(a.top,10),l=e.options.dimensions[0],c=e.options.dimensions[1];if(t.pageX<o+l&&t.pageY<u+c){for(n=e._coordsToId(t.pageX-o,t.pageY-u),i=[],s=0;s<n.length;s++)i.push(e._getNode([n[s]]));r={nodes:i,ids:n},e._trigger("click",t,r)}}})},_refreshColorGradient:function(){var t,e,n,i=document.createElement("canvas"),r=this.options.colorStops;for(i.setAttribute("width",this.options.colorResolution),i.setAttribute("height",1),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(i),t=i.getContext("2d"),e=t.createLinearGradient(0,0,this.options.colorResolution,0),n=0;n<r.length;n+=1)e.addColorStop(r[n].val,r[n].color);t.fillStyle=e,t.fillRect(0,0,this.options.colorResolution,1),this.options.colorGradientMap=t.getImageData(0,0,this.options.colorResolution,1)},_refreshColor:function(){function t(n){var i;for(i=0;i<n.length;i++)void 0!==n[i].color&&(n[i].colorVal=n[i].color[e.options.colorOption],n[i].computedColor=e._getRgbColor(n[i].colorVal)),n[i].hasOwnProperty("children")&&t(n[i].children)}var e=this;t([e.options.nodeData])},_refreshLayout:function(){function t(t){if(0!==Object.getOwnPropertyNames(n.options.postProcessCurve).length){var e;for(e=0;e<t.length;e++)t[e]=r.get(t[e]);var i=TreemapUtils.sumArray(t);for(e=0;e<t.length;e++)t[e]=t[e]/i}return t}function e(i,r){var s,a,o,u,l=[];for(r.sort(function(t,e){return t.size[n.options.sizeOption]>e.size[n.options.sizeOption]?-1:t.size[n.options.sizeOption]<e.size[n.options.sizeOption]?1:0}),u=0;u<r.length;u++)l[u]=n._isRootNode(r[u])===!0?1:r[u].size[n.options.sizeOption];for(t(l),o=n.options.layoutMethod([i[0],i[1],i[2],i[3]],l),u=0;u<r.length;u++)r[u].geometry&&(r[u].prevGeometry=TreemapUtils.deepCopy(r[u].geometry)),r[u].geometry={body:o[u],header:null},n._addNode2NodeList(r[u]);for(u=0;u<r.length;u++)r[u].hasOwnProperty("children")&&(s=r[u].geometry.body,a=r[u].geometry.header,n._isRootNode(r[u])===!1&&s[3]-n.options.innerNodeHeaderHeightPx>0&&(a=r[u].geometry.header=s.slice(),a[3]=n.options.innerNodeHeaderHeightPx,s[1]+=n.options.innerNodeHeaderHeightPx,s[3]-=n.options.innerNodeHeaderHeightPx),n._isRootNode(r[u])===!1&&s[2]-n.options.nodeBorderWidth>0&&s[3]-n.options.nodeBorderWidth>0&&(n.options.dimensions[0]>s[0]+s[2]&&(s[2]-=n.options.nodeBorderWidth,null!==a&&(a[2]-=n.options.nodeBorderWidth)),n.options.dimensions[1]>s[1]+s[3]&&(s[3]-=n.options.nodeBorderWidth)),e(s,r[u].children))}var n=this,i=new Date,r=new TreemapUtils.KeySpline(this.options.postProcessCurve),s=[0,0,n.options.dimensions[0],n.options.dimensions[1]];n._clearNodeList(),e(s,[n.options.nodeData]);var a=new Date;n.stats.computeLayoutMsec=a-i},_getRgbColor:function(t){if(null===t)return TreemapUtils.hex2rgb(this.options.naColor);var e=this.options.colorGradientMap.data,n=4*Math.floor(t*(e.length/4));return[e[n],e[n+1],e[n+2]]},_clearScanLines:function(){this.scanLines&&(this.scanLines.length=0,this.scanLines=[])},_addRunlength:function(t,e,n,i){void 0===this.scanLines&&(this.scanLines=[]),y_str=parseInt(n,10),this.scanLines[y_str]||(this.scanLines[y_str]=[]),this.scanLines[y_str].push([t,e,i])},_coordsToId:function(t,e){var n,i,r,s,a,o,u;if(void 0===this.scanLines)return[];if(n=this.scanLines[e],a=[],n)for(u=n.length-1;u>=0;u--)i=n[u],r=i[0],s=i[1],o=i[2],t>=r&&s>t&&a.push(o);return a},_clearNodeList:function(){this.nodeList&&(this.nodeList={})},_addNode2NodeList:function(t){void 0===this.nodeList&&(this.nodeList={}),this.nodeList[t.id]||(this.nodeList[t.id]=t)},_getNode:function(t){return this.nodeList[t]},_isRootNode:function(t){return this.options.nodeData===t?!0:!1},destroy:function(){this.element.find("canvas").remove(),t(window).unbind("resize"),t.Widget.prototype.destroy.call(this)}})}(jQuery),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.lpad=function(t,e){for(var n=this;n.length<e;)n=t+n;return n},String.prototype.rpad=function(t,e){for(var n=this;n.length<e;)n+=t;return n},function(t,e,n){"use strict";var i={version:"2.1",tipLocation:"bottom",nubPosition:"auto",scroll:!0,scrollSpeed:300,timer:0,autoStart:!1,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookiePath:!1,localStorage:!1,localStorageKey:"joyride",tipContainer:"body",modal:!1,expose:!1,postExposeCallback:t.noop,preRideCallback:t.noop,postRideCallback:t.noop,preStepCallback:t.noop,postStepCallback:t.noop,template:{link:'<a href="#close" class="joyride-close-tip">X</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper" role="dialog"></div>',button:'<a href="#" class="joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'}},r=r||!1,s={},a={init:function(n){return this.each(function(){t.isEmptyObject(s)?(s=t.extend(!0,i,n),s.document=e.document,s.$document=t(s.document),s.$window=t(e),s.$content_el=t(this),s.$body=t(s.tipContainer),s.body_offset=t(s.tipContainer).position(),s.$tip_content=t("> li",s.$content_el),s.paused=!1,s.attempts=0,s.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},a.jquery_check(),t.isFunction(t.cookie)||(s.cookieMonster=!1),s.cookieMonster&&t.cookie(s.cookieName)||s.localStorage&&a.support_localstorage()&&localStorage.getItem(s.localStorageKey)||(s.$tip_content.each(function(e){a.create({$li:t(this),index:e})}),s.autoStart&&(!s.startTimerOnClick&&s.timer>0?(a.show("init"),a.startTimer()):a.show("init"))),s.$document.on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),s.$li.next().length<1?a.end():s.timer>0?(clearTimeout(s.automate),a.hide(),a.show(),a.startTimer()):(a.hide(),a.show())}),s.$document.on("click.joyride",".joyride-close-tip",function(t){t.preventDefault(),a.end(!0)}),s.$window.bind("resize.joyride",function(){if(s.$li){if(s.exposed&&s.exposed.length>0){var e=t(s.exposed);e.each(function(){var e=t(this);a.un_expose(e),a.expose(e)})}a.is_phone()?a.pos_phone():a.pos_default()}})):a.restart()})},resume:function(){a.set_li(),a.show()},nextTip:function(){s.$li.next().length<1?a.end():s.timer>0?(clearTimeout(s.automate),a.hide(),a.show(),a.startTimer()):(a.hide(),a.show())},tip_template:function(e){var n,i,r;return e.tip_class=e.tip_class||"",n=t(s.template.tip).addClass(e.tip_class),i=t.trim(t(e.li).html())+a.button_text(e.button_text)+s.template.link+a.timer_instance(e.index),r=t(s.template.wrapper),e.li.attr("data-aria-labelledby")&&r.attr("aria-labelledby",e.li.attr("data-aria-labelledby")),e.li.attr("data-aria-describedby")&&r.attr("aria-describedby",e.li.attr("data-aria-describedby")),n.append(r),n.first().attr("data-index",e.index),t(".joyride-content-wrapper",n).append(i),n[0]},timer_instance:function(e){var n;return n=0===e&&s.startTimerOnClick&&s.timer>0||0===s.timer?"":a.outerHTML(t(s.template.timer)[0])},button_text:function(e){return s.nextButton?(e=t.trim(e)||"Next",e=a.outerHTML(t(s.template.button).append(e)[0])):e="",e},create:function(e){var n=e.$li.attr("data-button")||e.$li.attr("data-text"),i=e.$li.attr("class"),r=t(a.tip_template({tip_class:i,index:e.index,button_text:n,li:e.$li}));t(s.tipContainer).append(r)},show:function(e){var i,r,o={},u=[],l=0,c=null;if(s.$li===n||-1===t.inArray(s.$li.index(),s.pauseAfter))if(s.paused?s.paused=!1:a.set_li(e),s.attempts=0,s.$li.length&&s.$target.length>0){for(e&&(s.preRideCallback(s.$li.index(),s.$next_tip),s.modal&&a.show_modal()),s.preStepCallback(s.$li.index(),s.$next_tip),u=(s.$li.data("options")||":").split(";"),l=u.length,i=l-1;i>=0;i--)r=u[i].split(":"),2===r.length&&(o[t.trim(r[0])]=t.trim(r[1]));s.tipSettings=t.extend({},s,o),s.tipSettings.tipLocationPattern=s.tipLocationPatterns[s.tipSettings.tipLocation],s.modal&&s.expose&&a.expose(),!/body/i.test(s.$target.selector)&&s.scroll&&a.scroll_to(),a.is_phone()?a.pos_phone(!0):a.pos_default(!0),c=t(".joyride-timer-indicator",s.$next_tip),/pop/i.test(s.tipAnimation)?(c.outerWidth(0),s.timer>0?(s.$next_tip.show(),c.animate({width:t(".joyride-timer-indicator-wrap",s.$next_tip).outerWidth()},s.timer)):s.$next_tip.show()):/fade/i.test(s.tipAnimation)&&(c.outerWidth(0),s.timer>0?(s.$next_tip.fadeIn(s.tipAnimationFadeSpeed),s.$next_tip.show(),c.animate({width:t(".joyride-timer-indicator-wrap",s.$next_tip).outerWidth()},s.timer)):s.$next_tip.fadeIn(s.tipAnimationFadeSpeed)),s.$current_tip=s.$next_tip,t(".joyride-next-tip",s.$current_tip).focus(),a.tabbable(s.$current_tip)}else s.$li&&s.$target.length<1?a.show():a.end();else s.paused=!0},is_phone:function(){return r?r.mq("only screen and (max-width: 767px)"):s.$window.width()<767?!0:!1},support_localstorage:function(){return r?r.localstorage:!!e.localStorage},hide:function(){s.modal&&s.expose&&a.un_expose(),s.modal||t(".joyride-modal-bg").hide(),s.$current_tip.hide(),s.postStepCallback(s.$li.index(),s.$current_tip)},set_li:function(t){t?(s.$li=s.$tip_content.eq(s.startOffset),a.set_next_tip(),s.$current_tip=s.$next_tip):(s.$li=s.$li.next(),a.set_next_tip()),a.set_target()},set_next_tip:function(){s.$next_tip=t(".joyride-tip-guide[data-index="+s.$li.index()+"]")},set_target:function(){var e=s.$li.attr("data-class"),n=s.$li.attr("data-id"),i=function(){return n?t(s.document.getElementById(n)):e?t("."+e).filter(":visible").first():t("body")};s.$target=i()},scroll_to:function(){var e,n;e=s.$window.height()/2,n=Math.ceil(s.$target.offset().top-e+s.$next_tip.outerHeight()),t("html, body").stop().animate({scrollTop:n},s.scrollSpeed)},paused:function(){return-1===t.inArray(s.$li.index()+1,s.pauseAfter)?!0:!1},destroy:function(){t.isEmptyObject(s)||s.$document.off(".joyride"),t(e).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(s.automate),s={}},restart:function(){s.autoStart?(a.hide(),s.$li=n,a.show("init")):(!s.startTimerOnClick&&s.timer>0?(a.show("init"),a.startTimer()):a.show("init"),s.autoStart=!0)},pos_default:function(e){var n=(Math.ceil(s.$window.height()/2),s.$next_tip.offset(),t(".joyride-nub",s.$next_tip)),i=Math.ceil(n.outerWidth()/2),r=Math.ceil(n.outerHeight()/2),o=e||!1;if(o&&(s.$next_tip.css("visibility","hidden"),s.$next_tip.show()),/body/i.test(s.$target.selector))s.$li.length&&a.pos_modal(n);else{var u=s.tipSettings.tipAdjustmentY?parseInt(s.tipSettings.tipAdjustmentY):0,l=s.tipSettings.tipAdjustmentX?parseInt(s.tipSettings.tipAdjustmentX):0;a.bottom()?(s.$next_tip.css({top:s.$target.offset().top+r+s.$target.outerHeight()+u,left:s.$target.offset().left+l}),/right/i.test(s.tipSettings.nubPosition)&&s.$next_tip.css("left",s.$target.offset().left-s.$next_tip.outerWidth()+s.$target.outerWidth()),a.nub_position(n,s.tipSettings.nubPosition,"top")):a.top()?(s.$next_tip.css({top:s.$target.offset().top-s.$next_tip.outerHeight()-r+u,left:s.$target.offset().left+l}),a.nub_position(n,s.tipSettings.nubPosition,"bottom")):a.right()?(s.$next_tip.css({top:s.$target.offset().top+u,left:s.$target.outerWidth()+s.$target.offset().left+i+l}),a.nub_position(n,s.tipSettings.nubPosition,"left")):a.left()&&(s.$next_tip.css({top:s.$target.offset().top+u,left:s.$target.offset().left-s.$next_tip.outerWidth()-i+l}),a.nub_position(n,s.tipSettings.nubPosition,"right")),!a.visible(a.corners(s.$next_tip))&&s.attempts<s.tipSettings.tipLocationPattern.length&&(n.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),s.tipSettings.tipLocation=s.tipSettings.tipLocationPattern[s.attempts],s.attempts++,a.pos_default(!0))}o&&(s.$next_tip.hide(),s.$next_tip.css("visibility","visible"))},pos_phone:function(e){var n=s.$next_tip.outerHeight(),i=(s.$next_tip.offset(),s.$target.outerHeight()),r=t(".joyride-nub",s.$next_tip),o=Math.ceil(r.outerHeight()/2),u=e||!1;r.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),u&&(s.$next_tip.css("visibility","hidden"),s.$next_tip.show()),/body/i.test(s.$target.selector)?s.$li.length&&a.pos_modal(r):a.top()?(s.$next_tip.offset({top:s.$target.offset().top-n-o}),r.addClass("bottom")):(s.$next_tip.offset({top:s.$target.offset().top+i+o}),r.addClass("top")),u&&(s.$next_tip.hide(),s.$next_tip.css("visibility","visible"))},pos_modal:function(t){a.center(),t.hide(),a.show_modal()},show_modal:function(){t(".joyride-modal-bg").length<1&&t("body").append(s.template.modal).show(),/pop/i.test(s.tipAnimation)?t(".joyride-modal-bg").show():t(".joyride-modal-bg").fadeIn(s.tipAnimationFadeSpeed)},expose:function(){var n,i,r,o,u="expose-"+Math.floor(1e4*Math.random());if(arguments.length>0&&arguments[0]instanceof t)r=arguments[0];else{if(!s.$target||/body/i.test(s.$target.selector))return!1;r=s.$target}return r.length<1?(e.console&&console.error("element not valid",r),!1):(n=t(s.template.expose),s.$body.append(n),n.css({top:r.offset().top,left:r.offset().left,width:r.outerWidth(!0),height:r.outerHeight(!0)}),i=t(s.template.exposeCover),o={zIndex:r.css("z-index"),position:r.css("position")},r.css("z-index",1*n.css("z-index")+1),"static"==o.position&&r.css("position","relative"),r.data("expose-css",o),i.css({top:r.offset().top,left:r.offset().left,width:r.outerWidth(!0),height:r.outerHeight(!0)}),s.$body.append(i),n.addClass(u),i.addClass(u),s.tipSettings.exposeClass&&(n.addClass(s.tipSettings.exposeClass),i.addClass(s.tipSettings.exposeClass)),r.data("expose",u),s.postExposeCallback(s.$li.index(),s.$next_tip,r),void a.add_exposed(r))
},un_expose:function(){var n,i,r,o,u=!1;if(arguments.length>0&&arguments[0]instanceof t)i=arguments[0];else{if(!s.$target||/body/i.test(s.$target.selector))return!1;i=s.$target}return i.length<1?(e.console&&console.error("element not valid",i),!1):(n=i.data("expose"),r=t("."+n),arguments.length>1&&(u=arguments[1]),u===!0?t(".joyride-expose-wrapper,.joyride-expose-cover").remove():r.remove(),o=i.data("expose-css"),"auto"==o.zIndex?i.css("z-index",""):i.css("z-index",o.zIndex),o.position!=i.css("position")&&("static"==o.position?i.css("position",""):i.css("position",o.position)),i.removeData("expose"),i.removeData("expose-z-index"),void a.remove_exposed(i))},add_exposed:function(e){s.exposed=s.exposed||[],e instanceof t?s.exposed.push(e[0]):"string"==typeof e&&s.exposed.push(e)},remove_exposed:function(e){var n;e instanceof t?n=e[0]:"string"==typeof e&&(n=e),s.exposed=s.exposed||[];for(var i=0;i<s.exposed.length;i++)if(s.exposed[i]==n)return void s.exposed.splice(i,1)},center:function(){var t=s.$window;return s.$next_tip.css({top:(t.height()-s.$next_tip.outerHeight())/2+t.scrollTop(),left:(t.width()-s.$next_tip.outerWidth())/2+t.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(s.tipSettings.tipLocation)},top:function(){return/top/i.test(s.tipSettings.tipLocation)},right:function(){return/right/i.test(s.tipSettings.tipLocation)},left:function(){return/left/i.test(s.tipSettings.tipLocation)},corners:function(t){var e=s.$window,n=e.height()/2,i=Math.ceil(s.$target.offset().top-n+s.$next_tip.outerHeight()),r=e.width()+e.scrollLeft(),a=e.height()+i,o=e.height()+e.scrollTop(),u=e.scrollTop();return u>i&&(u=0>i?0:i),a>o&&(o=a),[t.offset().top<u,r<t.offset().left+t.outerWidth(),o<t.offset().top+t.outerHeight(),e.scrollLeft()>t.offset().left]},visible:function(t){for(var e=t.length;e--;)if(t[e])return!1;return!0},nub_position:function(t,e,n){t.addClass("auto"===e?n:e)},startTimer:function(){s.$li.length?s.automate=setTimeout(function(){a.hide(),a.show(),a.startTimer()},s.timer):clearTimeout(s.automate)},end:function(e){e=e||!1,e&&s.$window.unbind("resize.joyride"),s.cookieMonster&&t.cookie(s.cookieName,"ridden",{expires:365,domain:s.cookieDomain,path:s.cookiePath}),s.localStorage&&localStorage.setItem(s.localStorageKey,!0),s.timer>0&&clearTimeout(s.automate),s.modal&&s.expose&&a.un_expose(),s.$current_tip&&s.$current_tip.hide(),s.$li&&(s.postStepCallback(s.$li.index(),s.$current_tip,e),s.postRideCallback(s.$li.index(),s.$current_tip,e)),t(".joyride-modal-bg").hide()},jquery_check:function(){return t.isFunction(t.fn.on)?!0:(t.fn.on=function(t,e,n){return this.delegate(e,t,n)},t.fn.off=function(t,e,n){return this.undelegate(e,t,n)},!1)},outerHTML:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)},version:function(){return s.version},tabbable:function(e){t(e).on("keydown",function(n){if(!n.isDefaultPrevented()&&n.keyCode&&27===n.keyCode)return n.preventDefault(),void a.end(!0);if(9===n.keyCode){var i=t(e).find(":tabbable"),r=i.filter(":first"),s=i.filter(":last");n.target!==s[0]||n.shiftKey?n.target===r[0]&&n.shiftKey&&(s.focus(1),n.preventDefault()):(r.focus(1),n.preventDefault())}})}};t.fn.joyride=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.joyride"):a.init.apply(this,arguments)}}(jQuery,this);var WordModel=Backbone.Model.extend({urlRoot:"/words"}),WordCollection=Backbone.Collection.extend({model:WordModel,url:function(){var t=window.location.pathname.match(/\/\d+$/)[0].replace("/","");return"/users/"+t+"/words"},graphObjectInDateTimeRange:function(t,e,n){for(var i=[],r=this.timeIntervals(t,e,n),s=0;s<r.length;s++){var a=this.wordModelsFromStartToEnd(r[s],r[s+1]);i.push({x:r[s],y:a})}return i},wordModelsFromStartToEnd:function(t,e){var n=this.filter(function(n){var i=new Date(Date.parse(n.get("created_at"))).getTime()/1e3;return i>t&&e>i});return n},timeIntervals:function(t,e,n){for(var i=[],r=e-t,s=0;r>s;s+=n)i.push(t+s);return i},earliestTimeInRange:function(t,e){var n=this.wordModelsFromStartToEnd(t,e),i=_.sortBy(n,function(t){return new Date(Date.parse(t.get("created_at")))}),r=i[0];return new Date(Date.parse(r.get("created_at"))).getTime()/1e3},wordString:function(t,e){var n=this.wordModelsFromStartToEnd(t,e),i=_.map(n,function(t){return t.get("letters")});return i.join("+")}}),alchemyResultsView=Backbone.View.extend({el:"#alchemy-results-view",events:{},initialize:function(t){this.options=t||{},""!==this.options.stringToQuery&&this.queryAlchemy(this.options.stringToQuery)},queryAlchemy:function(t){$.ajax({url:"/alchemy_search",method:"post",data:{words:t},dataType:"json"}).done(function(t){var e=0;_.each(t.entities.slice(0,10),function(t){e+=parseFloat(t.relevance)});var n=_.map(t.entities,function(t){var n=parseFloat(t.relevance),i=Math.random();return{id:t.text+" - "+t.type,size:[n/e],color:[i],relevance:n}});this.renderTreemap(n)}.bind(this))},renderTreemap:function(t){if(this.$el.empty(),this.$el.append("<div id='treemap'>"),t.length>0)if($("#treemap").treemap({nodeData:{id:"group 1",children:t}}).bind("treemapclick",this.mouseclickhandler),this.options.liveMode){var e=0,n=t[e].id.split(" - ")[0],i=t[0].id.split(" - ")[1].toLowerCase(),r=n.toLowerCase().split(" ").join("+");new GoogleResultsView({query:r,liveMode:this.options.liveMode}),relephantViewPicker(i,r)}else $("html, body").animate({scrollTop:$("#treemap").offset().top-80},400);else this.renderRelephantError()},mouseclickhandler:function(t,e){var n=(e.nodes,e.ids),i=n[0].split(" - ")[0],r=n[0].split(" - ")[1].toLowerCase(),s=i.toLowerCase().split(" ").join("+");new GoogleResultsView({query:s}),relephantViewPicker(r,s)},renderRelephantError:function(){if(this.options.liveMode)var t="Speak More";else var t="RelephantError: No concepts found. Try adjusting your search window or recording more conversations.";displayRelephantError(t)}}),googleMapsView=Backbone.View.extend({el:"div#google-maps-view",initialize:function(t){this.options=t||{},this.geocode()},geocode:function(){var t=new google.maps.Geocoder;t.geocode({address:this.options.googleMapsQuery},function(t,e){if(e==google.maps.GeocoderStatus.OK){var n=t[0].geometry.location.k,i=t[0].geometry.location.A;this.initializeMap(n,i)}}.bind(this))},initializeMap:function(t,e){$("#google-maps-view").append('<div class="map-canvas" id="map-canvas"></div>');{var n=new google.maps.LatLng(t,e),i={zoom:this.options.zoomLevel,center:n},r=new google.maps.Map(document.getElementById("map-canvas"),i);new google.maps.Marker({position:n,map:r})}}}),GoogleResultsView=Backbone.View.extend({el:"#google-results-view",initialize:function(t){this.options=t||{},this.queryGoogle(this.options.query)},queryGoogle:function(t){var e;$.ajax({url:"/google_search",method:"get",data:{entity:t},dataType:"json"}).done(function(t){e=t.items,this.renderResults(e),this.options.liveMode||$("html, body").animate({scrollTop:$("#entity-based-results-view").offset().top-80},400)}.bind(this))},renderResults:function(t){this.$el.empty(),_.each(t,function(t){var e=t.title,n=t.snippet,i=t.link;this.$el.append($('<div id="google-result"><a href="'+i+'"><h3>'+e+"</h3></a><br><p>"+n+"</p></div>"))}.bind(this))}}),reco=new WebSpeechRecognition,SpeechInputView=Backbone.View.extend({el:"#speech-input",events:{"click button#microphone":"microphoneButton"},initialize:function(){this.wordStorage=[],reco.statusText("status"),reco.statusImage("status_img"),reco.finalResults("final_span"),reco.interimResults("interim_span"),reco.continuous=!0,reco.maxAlternatives=1,reco.recognition.onresult=function(t){for(var e="",n=t.resultIndex;n<t.results.length;++n)if(t.results[n].isFinal){var i=t.results[n][0].transcript.trim().split(" ");_.each(i,function(t){this.wordStorage.push(t)}.bind(this))}else e+=t.results[n][0].transcript;document.getElementById("interim_span").innerHTML=e}.bind(this),this.listenForWords()},microphoneButton:function(){reco.toggleStartStop()},listenForWords:function(){setInterval(function(){this.wordStorage.length>0&&(this.wordStorage[this.wordStorage.length-1]+=".");for(var t=0;t<this.wordStorage.length;t++){var e={letters:this.wordStorage[t]};this.collection.create(e)}this.wordStorage=[]}.bind(this),2e3)}}),graph,WordListView=Backbone.View.extend({el:"#main-container",events:{"click button#word-search":"wordSearch","click button#datetimebutton":"resetTime","click button#alchemy":"renderAlchemyResults","click div.treemap-node":"googleResults","click button#transcript":"generateTranscript","click #live-mode":"startLiveChart","click #tooltip":"startGuide","click #history":"resetTime"},initialize:function(){this.viewInitializer(),this.startLiveChart()},viewInitializer:function(){this.listenTo(this.collection,"add",this.addToTempStorage),this.DEFAULTHOURSPAST=1,this.SMOOTHING=1.001,this.tempWordStorage=[],this.previousAlchemyQuery,this.currentAlchemyInterval,this.$("#chart_container").remove(),$("<div id=chart_container></div>").insertBefore("#slider-range"),this.collection.fetch(),this.startDate=this.setStartDate(),this.endDate=(new Date).getTime(),this.xIntervalSeconds=this.setIntervalSeconds((this.endDate-this.startDate)/1e3),this.graphObjectArray=this.queryDBforGraphData(this.xIntervalSeconds),this.render()},render:function(){this.lineDataArray=this.getLineDataArray(this.graphObjectArray),this.initializeChart(),graph.render(),this.setSlider(),this.setTickInterval()},startGuide:function(){runJoyride()},startLiveChart:function(){clearInterval(this.currentInterval),this.$("#chart_container").remove(),$("<div id=chart_container></div>").insertBefore("#slider-range"),this.collection.fetch(),this.startDate=(new Date).getTime()-6e4,this.endDate=(new Date).getTime(),this.xIntervalSeconds=.1,this.graphObjectArray=this.queryDBforGraphData(this.xIntervalSeconds),this.$("#chart-to-hide").hide(),0===$("#relephant-placeholder").length&&$("<div id='relephant-placeholder'><img src='/assets/logo.png'><h3>Speak</h3></div>").insertAfter(this.$("#chart-to-hide")),$("#chart-to-hide").slideUp(),$("#relephant-placeholder").fadeIn(),$("#status_img").click(),this.render(),this.initializeLiveAlchemy()},initializeLiveAlchemy:function(){clearInterval(this.currentAlchemyInterval),this.currentAlchemyInterval=setInterval(function(){$("#relephant-placeholder").size()>0&&$("#relephant-placeholder").remove(),this.renderAlchemyResults(!0)}.bind(this),1e4)},setIntervalSeconds:function(t){var e,n=3600;return e=2*n>t?1:24*n>t?5:84*n>t?10:168*n>t?30:720*n>t?150:1200,$("#tick-interval").text(e+" seconds"),e},generateTranscript:function(){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var t=this.collection.wordString(leftSliderDateTime,rightSliderDateTime).split("+").join(" ");$("#transcript-box").empty(),$("#transcript-box").slideDown(),$("#transcript-box").append("<h4 id=transcript-title>Transcript from "+prettyDateTime(new Date(1e3*leftSliderDateTime))+" to "+prettyDateTime(new Date(1e3*rightSliderDateTime))+":</h4>"),$("#transcript-box").append("<p id=transcript-content>"+t+"</p>"),$("#transcript-box").append('<div id="email"><a href="mailto:@? subject=Transcript%20from%20'+prettyDateTime(new Date(1e3*leftSliderDateTime))+"%20to%20"+prettyDateTime(new Date(1e3*rightSliderDateTime))+"&body="+t+'">Email <i class="fa fa-share"></i></a></div>'),$("html, body").animate({scrollTop:$("#transcript-box").offset().top-80},400)},sliderDateTimes:function(){var t=new Date-this.startDate,e=parseFloat(document.getElementById("left-slider").style.left)/100,n=parseFloat(document.getElementById("right-slider").style.left)/100,i=(e*t+this.startDate)/1e3,r=(n*t+this.startDate)/1e3;return[i,r]},resetTime:function(){this.startDate=this.setStartDate(),clearInterval(this.currentInterval),clearInterval(this.currentAlchemyInterval),this.viewInitializer(),$("#chart-to-hide").slideDown(),$("#relephant-placeholder").slideUp()},getLineDataArray:function(t){return _.map(t,function(t){return{x:t.x,y:t.y.length}})},wordSearch:function(){var t=[{x:this.startDate/1e3,y:0}],e=$("#search-input").val(),n=this.sliderDateTimes()[0],i=this.sliderDateTimes()[1];_.each(this.graphObjectArray,function(r){r.y.length>0&&_.each(r.y,function(s,a,o){s.get("letters").toLowerCase()===e.toLowerCase()&&r.x>n&&r.x<i&&t.push({x:r.x,y:o.length})}.bind(this))}.bind(this));var r=Math.floor(150*Math.random()),s=Math.floor(150*Math.random()),a=Math.floor(150*Math.random()),o="rgb("+r+","+s+","+a+")",u=t.length-1;graph.series.push({data:t,renderer:"scatterplot",color:o}),$("#legend").append("<div class='search-term' style='background: "+o+";'><span class='search-count'>("+u+")</span> "+e+"</div>"),graph.render(),$("html, body").animate({scrollTop:$("body").offset().top+100},400)},renderAlchemyResults:function(t){var e=t===!0?!0:!1;leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var n=this.collection.wordString(leftSliderDateTime,rightSliderDateTime);if(""===n){var i="RelephantError: No concepts found. Try adjusting your search window or recording more conversations.";displayRelephantError(i)}this.previousAlchemyQuery!==n&&(this.$("#alchemy-results-view").empty(),this.previousAlchemyQuery=n,new alchemyResultsView({stringToQuery:n,liveMode:e}))},setTickInterval:function(){var t=1,e=this.endDate/1e3;this.currentInterval=setInterval(function(){var n=e+this.xIntervalSeconds*t,i=this.lineDataArray,r=_.map(this.tempWordStorage,function(t){return new WordModel({letters:t})}),s=0===this.tempWordStorage.length?i[i.length-1].y/this.SMOOTHING:this.tempWordStorage.length;this.lineDataArray.push({x:n,y:s}),this.graphObjectArray.push({x:n,y:r}),this.tempWordStorage=[],graph.render(),t++}.bind(this),1e3*this.xIntervalSeconds)},setStartDate:function(){$(".form-control").css("border-color","#ddd"),$("#tick-interval").parent().find("p").remove();var t=$(".form-control").val();if(""===t)return(new Date).getTime()-60*this.DEFAULTHOURSPAST*60*1e3;var e=new Date(t).getTime();return e>(new Date).getTime()&&($(".form-control").css("border-color","red"),$("#tick-interval").parent().append("<p>Time cannot be in the future</p>"),e=(new Date).getTime()-60*this.DEFAULTHOURSPAST*60*1e3),e},initializeChart:function(){$("#chart_container").prepend("<div id='chart'>"),$("#chart_container").prepend("<div id='y_axis'>"),graph=new Rickshaw.Graph({element:document.querySelector("#chart"),renderer:"multi",width:1100,height:400,series:[{data:this.lineDataArray,renderer:"line",color:"steelblue"}]});new Rickshaw.Graph.Axis.Time({graph:graph,timeUnit:"seconds"}),new Rickshaw.Graph.Axis.Y({graph:graph,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById("y_axis")}),new Rickshaw.Graph.HoverDetail({graph:graph,formatter:function(t,e,n){var i=_.filter(this.graphObjectArray,function(t){return t.x===e}.bind(this));if(i.length>0){var r=_.map(i[0].y,function(t){return t.get("letters")});$("#legend-datetime").text(prettyDateTime(new Date(1e3*e))),$("#legend-words").text(r.join(" "))}return i[0].y.length>0?"word count: "+n:"word count: 0"}.bind(this)})},queryDBforGraphData:function(t){leftSliderDateTime=this.sliderDateTimes()[0],rightSliderDateTime=this.sliderDateTimes()[1];var e=this.collection.graphObjectInDateTimeRange(leftSliderDateTime,rightSliderDateTime,t);return e},addToTempStorage:function(t){this.tempWordStorage.push(t.get("letters"))},setSlider:function(){new Rickshaw.Graph.RangeSlider({graph:graph,element:document.querySelector("#slider-range")})}}),RephantoRouter=Backbone.Router.extend({routes:{"":"show"},initialize:function(){this.collection=new WordCollection},start:function(){Backbone.history.start()},show:function(){this.collection.fetch({success:function(){this.speechInputView=new SpeechInputView({collection:this.collection}),this.wordListView=new WordListView({collection:this.collection})}.bind(this)})}}),rephantoRouter;$(document).ready(backboneReady),$(document).on("page:load",function(){Backbone.history.stop(),backboneReady()});